/**
* @package     Nenkraft2
* @author      Gustav 'Nuuf' Åberg <gustavrein@gmail.com>
* @version     2.4.5
* @copyright   (C) 2018-2019 Gustav 'Nuuf' Åberg
* @license     {@link https://github.com/Nuuf/nenkraft2/blob/master/LICENSE}
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nk2=e():t.nk2=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=11)}([function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(5);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=Math.ceil,u=Math.round,s=Math.abs,a=Math.sqrt,l=Math.atan2,c=Math.cos,h=Math.sin,f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}var e,n,r;return e=t,r=[{key:"SortMinMag",value:function(t,e){return t.GetMagnitudeSquared()-e.GetMagnitudeSquared()}},{key:"pool",get:function(){return d}},{key:"USE_POOL",get:function(){return y},set:function(t){y=!!t}}],(n=[{key:"Copy",value:function(){return!0===y?d.Retrieve(this.x,this.y):new t(this.x,this.y)}},{key:"FromPool",value:function(e,n){return!0===y?d.Retrieve(e,n):new t(e,n)}},{key:"AbsoluteCopy",value:function(){return this.Copy().Positive()}},{key:"SetV",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"Set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"SetSame",value:function(t){return this.x=t,this.y=t,this}},{key:"Is0",value:function(){return 0===this.x&&0===this.y}},{key:"AddVC",value:function(t){return this.Copy().AddV(t)}},{key:"AddV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"Add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"SubtractVC",value:function(t){return this.Copy().SubtractV(t)}},{key:"SubtractV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"Subtract",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"MultiplyVC",value:function(t){return this.Copy().MultiplyV(t)}},{key:"MultiplyV",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"Multiply",value:function(t,e){return this.x*=t,this.y*=e,this}},{key:"DivideVC",value:function(t){return this.Copy().DivideV(t)}},{key:"DivideV",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"Divide",value:function(t,e){return this.x/=t,this.y/=e,this}},{key:"Normalize",value:function(){var t=this.GetMagnitude();return this.Divide(t,t)}},{key:"Positive",value:function(){return this.x=s(this.x),this.y=s(this.y),this}},{key:"Negative",value:function(){return this.x=-s(this.x),this.y=-s(this.y),this}},{key:"Invert",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"Rotate",value:function(t){var e=h(t),n=c(t),r=this.x,i=this.y;return this.x=r*n-i*e,this.y=r*e+i*n,this}},{key:"RotateAroundV",value:function(t,e){return this.SubtractV(t).Rotate(e).AddV(t)}},{key:"RotateAround",value:function(t,e,n){return this.SubtractV(t,e).Rotate(n).AddV(t,e)}},{key:"RotateAbsolute",value:function(t){return this.Rotate(t-this.GetAngle())}},{key:"RotateAbsoluteAroundV",value:function(t,e){return this.SubtractV(t).RotateAbsolute(e).AddV(t)}},{key:"RotateAbsoluteAround",value:function(t,e,n){return this.SubtractV(t,e).RotateAbsolute(n).AddV(t,e)}},{key:"PushFromV",value:function(t,e){return v.SetV(this).SubtractV(t).Normalize().Multiply(e,e),this.AddV(v)}},{key:"PushFrom",value:function(t,e,n){return v.SetV(this).SubtractV(t,e).Normalize().Multiply(n,n),this.AddV(v)}},{key:"GetWeightedAverageV",value:function(t,e){return this.FromPool(this.x*(1-e)+t.x*e,this.y*(1-e)+t.y*e)}},{key:"GetWeightedAverage",value:function(t,e,n){return this.FromPool(this.x*(1-n)+t*n,this.y*(1-n)+e*n)}},{key:"GetAngle",value:function(){return l(this.y,this.x)}},{key:"GetAngleBetweenV",value:function(t){return l(this.y-t.y,this.x-t.x)}},{key:"GetAngleBetween",value:function(t,e){return l(this.y-e,this.x-t)}},{key:"GetDotV",value:function(t){return this.x*t.x+this.y*t.y}},{key:"GetDot",value:function(t,e){return this.x*t+this.y*e}},{key:"GetCrossV",value:function(t){return this.x*t.y+this.y*t.x}},{key:"GetCross",value:function(t,e){return this.x*e+this.y*t}},{key:"GetMagnitudeSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"GetMagnitude",value:function(){return a(this.x*this.x+this.y*this.y)}},{key:"GetDistanceSquaredV",value:function(t){return v.SetV(this).SubtractV(t).GetMagnitudeSquared()}},{key:"GetDistanceSquared",value:function(t,e){return v.SetV(this).Subtract(t,e).GetMagnitudeSquared()}},{key:"GetDistanceV",value:function(t){return v.SetV(this).SubtractV(t).GetMagnitude()}},{key:"GetDistance",value:function(t,e){return v.SetV(this).Subtract(t,e).GetMagnitude()}},{key:"GetPerpendicularCCWV",value:function(t){return this.FromPool(-(t.y-this.y),t.x-this.x)}},{key:"GetPerpendicularCCW",value:function(t,e){return this.FromPool(-(e-this.y),t-this.x)}},{key:"GetPerpendicularCWV",value:function(t){return this.FromPool(t.y-this.y,-(t.x-this.x))}},{key:"GetPerpendicularCW",value:function(t,e){return this.FromPool(e-this.y,-(t-this.x))}},{key:"GetNormalAV",value:function(t){return this.GetPerpendicularCCWV(t).Normalize()}},{key:"GetNormalA",value:function(t,e){return this.GetPerpendicularCCW(t,e).Normalize()}},{key:"GetNormalBV",value:function(t){return this.GetPerpendicularCWV(t).Normalize()}},{key:"GetNormalB",value:function(t,e){return this.GetPerpendicularCW(t,e).Normalize()}},{key:"GetMidpointV",value:function(t){return this.Copy().AddV(t).Multiply(.5,.5)}},{key:"GetMidpoint",value:function(t,e){return this.Copy().Add(t,e).Multiply(.5,.5)}},{key:"IsEqualToV",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"IsEqualTo",value:function(t,e){return this.x===t&&this.y===e}},{key:"GetProjectionOntoV",value:function(t){var e=this.GetDotV(t);if(0===e)return this.FromPool(0,0);var n=t.GetMagnitude(),r=e/(n*n);return t.Copy().Multiply(r,r)}},{key:"GetProjectionOnto",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);if(0===r)return n.SetSame(0);var i=n.GetMagnitude(),o=r/(i*i);return n.Multiply(o,o)}},{key:"GetReflectionV",value:function(t){var e=t.Copy(),n=this.GetDotV(e);return e.Multiply(2,2).Multiply(n,n),this.SubtractVC(e)}},{key:"GetReflection",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);return n.Multiply(2,2).Multiply(r,r),this.SubtractVC(n)}},{key:"Store",value:function(){return d.Store(this),this}},{key:"AddTo",value:function(t){for(var e=0;e<t.length;++e)t[e].AddV(this);return this}},{key:"Floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"Ceil",value:function(){return this.x=o(this.x),this.y=o(this.y),this}},{key:"Round",value:function(){return this.x=u(this.x),this.y=u(this.y),this}},{key:"GetMinMaxDot",value:function(t){for(var e=1/0,n=-e,r=0,i=this.Copy(),o=0;o<t.length;++o)(r=t[o].GetDotV(this))>n&&(n=r),r<e&&(e=r);return i.Set(e,n),i}}])&&i(e.prototype,n),r&&i(e,r),t}(),d=new r.a,y=!0;d.Retrieve=function(t,e){return this.PreRetrieve(),this.objects.pop().Set(t,e)},d.Flood(function(){return new f(0,0)},1e3);var v=new f(0,0)},function(t,e,n){"use strict";n.r(e),n.d(e,"RandomInteger",function(){return c}),n.d(e,"RandomIntegerAvoid",function(){return h}),n.d(e,"RandomFloat",function(){return f}),n.d(e,"RandomFloatAvoid",function(){return d}),n.d(e,"IsInteger",function(){return y}),n.d(e,"IsFloat",function(){return v}),n.d(e,"IsArray",function(){return p}),n.d(e,"IsObject",function(){return b}),n.d(e,"IsFunction",function(){return m}),n.d(e,"Sign",function(){return S}),n.d(e,"IsBitSet",function(){return w}),n.d(e,"SetBit",function(){return g}),n.d(e,"ClearBit",function(){return k}),n.d(e,"ToggleBit",function(){return x}),n.d(e,"Clamp",function(){return A}),n.d(e,"InverseClamp",function(){return C}),n.d(e,"FlipACoin",function(){return I}),n.d(e,"NearestPow2Floor",function(){return T}),n.d(e,"NearestPow2Ceil",function(){return O}),n.d(e,"NearestPow2Round",function(){return E}),n.d(e,"GenerateSequence",function(){return P}),n.d(e,"RandomInArray",function(){return _}),n.d(e,"MinMaxOrValue",function(){return R}),n.d(e,"UUID",function(){return N}),n.d(e,"ApplyProperties",function(){return M}),n.d(e,"Nested",function(){return V}),n.d(e,"ArrayGetRandom",function(){return G}),n.d(e,"ArrayShuffle",function(){return D}),n.d(e,"Base16ToBase10",function(){return j}),n.d(e,"Base2ToBase10",function(){return F}),n.d(e,"IsObjectEmpty",function(){return B}),n.d(e,"DeepClone",function(){return L}),n.d(e,"CreateIteratorArgs",function(){return H}),n.d(e,"ReplaceArgumentWithObjectValue",function(){return U}),n.d(e,"AssignIfUndefined",function(){return q}),n.d(e,"ValidateWithSchema",function(){return Y}),n.d(e,"PRINT_VERSION",function(){return W});var r=n(3),i=n(7);function o(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function u(t){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var s=n(13).version,a=Math.random,l=Math.clz32;function c(t,e){return a()*(e-t+1)+t|0}function h(t,e,n,r){var i=c(t,e);if(t>n||e<r)throw new Error("Avoid causing infinite loops!");for(;i>n&&i<r;)i=c(t,e);return i}function f(t,e){return a()*(e-t)+t}function d(t,e,n,r){var i=f(t,e);if(t>n||e<r)throw new Error("Avoid causing infinite loops!");for(;i>n&&i<r;)i=f(t,e);return i}function y(t){return Number(t)===t&&t%1==0}function v(t){return Number(t)===t&&t%1!=0}function p(t){return"[object Array]"===Object.prototype.toString.call(t)}function b(t){return"[object Object]"===Object.prototype.toString.call(t)}function m(t){return"[object Function]"===Object.prototype.toString.call(t)}function S(t,e){return 0===t?!0===e?1:0:t>0?1:-1}function w(t,e){return 0!=(e&1<<t)}function g(t,e){return e|1<<t}function k(t,e){return e&~(1<<t)}function x(t,e){return e^1<<t}function A(t,e,n){return t<e?e:t>n?n:t}function C(t,e,n){return t<e?n:t>n?e:t}function I(t,e){return 1===c(1,2)?t:e}function T(t){return 1<<31-l(t)}function O(t){return 1<<31-l(2*t)}function E(t){return 1<<31-l(1.5*t)}function P(t,e,n,i){for(var o=[],u=0;u<e;u+=n)o.push(Object(r.PrecisionRound)(u,i));return o}function _(t){return t[c(0,t.length-1)]}function R(t,e){return null!=t.min&&null!=t.max?f(t.min,t.max):null!=t.values&&t.values.length>0?_(t.values):null!=e&&t[e].length>0?_(t[e]):t}function N(t,e,n,r){var o,u,s="",a=t/e;t=null==t?32:t,e=null==e?4:e,n=null==n?0:n,r=null==r?"-":r;for(var l=i.a[n],h=0;h<t;++h)0!==(u=h/a)&&y(u)?s+=r:(o=c(1,l.length-1),s+=l.charAt(o));return s}function M(t,e){var n;if(void 0!==e)for(n in e)void 0!==t[n]&&(t[n]=e[n])}function V(t,e,n,r,i,o){var u;if("string"==typeof e&&(o=null==o?".":o,e=e.split(o)),e.length>1){if(void 0!==t[u=e.shift()])return V(t[u],e,n,r,i,o)}else{if(void 0!==t[u=e.shift()])return!0===r?void(t[u]=i):!0===n?t:t[u];if(!0===r)return void(t[u]=i)}}function G(t,e){for(var n=[],r={},i=t.length,o=0;o<e;++o){var u=a()*i|0;void 0===r[u]?(r[u]=null,n.push(t[u])):o--}return n}function D(t){for(var e,n,r=t.length-1;r-- >=0;)n=a()*r|0,e=t[r],t[r]=t[n],t[n]=e}function j(t){return parseInt(t,16)}function F(t){return parseInt(t,2)}function B(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}function L(t){var e,n=null,r=!1;if("function"==typeof t)throw new TypeError("Object was of type: function. Not acceptable.");if(p(t))n=[],r=!0;else{if("object"!==u(t))return t;n={}}if(r)for(var i=0;i<t.length;++i)n[i]=L(t[i]);else for(e in t)t.hasOwnProperty(e)&&(n[e]=L(t[e]));return n}function H(t,e,n){for(var r,i,o,u,s=[],a=0;a<t.length;++a)"string"==typeof(r=t[a])&&0===r.indexOf(e)&&r.indexOf(n)===e.length&&(-1!==(u=r.indexOf("|"))?(i=r.slice(r.indexOf("(")+1,u),o=r.slice(u+1,r.indexOf(")")),s.push({mod:i,val:o,iteratorIndex:a})):s.push({iteratorIndex:a}));return s}function U(t,e,n){for(var r=o(e,1)[0],i=0;i<e.length;r=e[++i])"string"==typeof r&&0===r.indexOf(n)&&(e[i]=V(t,r.slice(n.length)))}function q(t,e){for(var n in t)t.hasOwnProperty(n)&&void 0===e[n]&&(e[n]=t[n])}function Y(t,e){var n,r=!0;for(n in e)null!=e[n]&&!0===e[n].required&&null==t[n]&&(console.error("Key: "+n+" is required!"),r=!1);for(n in t)null!=t[n]&&(null==e[n]?(console.error("Unknown key: "+n),r=!1):!1===e[n].typeCheck(t[n])&&(console.error("Type check failed for key: "+n),r=!1));return r}function W(t){t?console.log("nenkraft2 server version "+s):console.log("%cnenkraft2 %cversion %c"+s,"color:#c89664;background-color:#304860;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#c89664;background-color:#5078a0;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#c89664;background-color:#6496c8;font-family:Arial;font-size:18px;font-weight:900;padding:5px;")}},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return o});var r=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e,n,s){if(null==s||"function"!=typeof t.Assert)switch(e){case o.IS:return void function(t,e,n){var r=!1;t!==e&&(r=!0);u(r,t,e,n)}(t,n,e);case o.IS_NOT:return void function(t,e,n){var r=!1;t===e&&(r=!0);u(r,t,e,n)}(t,n,e);case o.IS_SAME_TYPE:return void function(t,e,n){var o=!1;Object(r.IsArray)(t)||Object(r.IsArray)(e)?!Object(r.IsArray)(t)!=!Object(r.IsArray)(e)&&(o=!0):null===t||null===e?t!==e&&(o=!0):i(t)!==i(e)?o=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&t!==e&&(o=!0);u(o,t,e,n)}(t,n,e);case o.IS_NOT_SAME_TYPE:return void function(t,e,n){var o=!1;Object(r.IsArray)(t)||Object(r.IsArray)(e)?Object(r.IsArray)(t)&&Object(r.IsArray)(e)&&(o=!0):null===t||null===e?e===t&&(o=!0):i(t)===i(e)?o=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&isNaN(t)&&isNaN(e)&&(o=!0);u(o,t,e,n)}(t,n,e);case o.IS_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e||(r=!0);u(r,t,e.name,n)}(t,n,e);case o.IS_NOT_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e&&(r=!0);u(r,t,e.name,n)}(t,n,e);case o.IS_LESS_THAN:return void function(t,e,n){var r=!1;t>=e&&(r=!0);u(r,t,e,n)}(t,n,e);case o.IS_GREATER_THAN:return void function(t,e,n){var r=!1;t<=e&&(r=!0);u(r,t,e,n)}(t,n,e);case o.IS_LESS_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t>e&&(r=!0);u(r,t,e,n)}(t,n,e);case o.IS_GREATER_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t<e&&(r=!0);u(r,t,e,n)}(t,n,e);default:throw new Error("No comparison: "+e)}else t.Assert(e,n)}function u(t,e,n,r){if(t)throw function(t,e,n){switch(n){case o.IS:n=o.IS_NOT;break;case o.IS_NOT:n=o.IS;break;case o.IS_SAME_TYPE:n=o.IS_NOT_SAME_TYPE;break;case o.IS_NOT_SAME_TYPE:n=o.IS_SAME_TYPE;break;case o.IS_INSTANCE_OF:n=o.IS_NOT_INSTANCE_OF;break;case o.IS_NOT_INSTANCE_OF:n=o.IS_INSTANCE_OF;break;case o.IS_LESS_THAN:n=o.IS_GREATER_THAN_OR_EQUAL;break;case o.IS_GREATER_THAN:n=o.IS_LESS_THAN_OR_EQUAL;break;case o.IS_LESS_THAN_OR_EQUAL:n=o.IS_GREATER_THAN;break;case o.IS_GREATER_THAN_OR_EQUAL:n=o.IS_LESS_THAN;break;default:throw new Error("Unexpected error")}console.error(t,n,e)}(e,n,r),new Error("Assertion failed: "+r);o.LOG&&window&&function(t,e,n){console.log("%c<<||-?START?-||>>","background-color: black; color: #0FF; padding: 0px 25px;"),console.log("%cAssertion success: ","background-color: #333; color: #0F0; padding: 0px 25px;"),console.log(t),console.log(n),console.log(e),console.log("%c>>||-?END?-||<<","background-color: black; color: #FF0; padding: 0px 25px;")}(e,n,r)}o.IS="I",o.IS_NOT="IN",o.IS_SAME_TYPE="IST",o.IS_NOT_SAME_TYPE="INST",o.IS_INSTANCE_OF="IIO",o.IS_NOT_INSTANCE_OF="INIO",o.IS_LESS_THAN="ILT",o.IS_GREATER_THAN="IGT",o.IS_LESS_THAN_OR_EQUAL="ILTOE",o.IS_GREATER_THAN_OR_EQUAL="IGTOE",o.Assign=function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.IS=o.IS,e.IS_NOT=o.IS_NOT,e.IS_SAME_TYPE=o.IS_SAME_TYPE,e.IS_NOT_SAME_TYPE=o.IS_NOT_SAME_TYPE,e.IS_INSTANCE_OF=o.IS_INSTANCE_OF,e.IS_NOT_INSTANCE_OF=o.IS_NOT_INSTANCE_OF,e.IS_LESS_THAN=o.IS_LESS_THAN,e.IS_GREATER_THAN=o.IS_GREATER_THAN,e.IS_LESS_THAN_OR_EQUAL=o.IS_LESS_THAN_OR_EQUAL,e.IS_GREATER_THAN_OR_EQUAL=o.IS_GREATER_THAN_OR_EQUAL},o.LOG=!1}).call(this,n(6))},function(t,e,n){"use strict";n.r(e),n.d(e,"PII",function(){return h}),n.d(e,"TAU",function(){return f}),n.d(e,"PI5",function(){return d}),n.d(e,"DEGREES_TO_RADIANS",function(){return y}),n.d(e,"RADIANS_TO_DEGRESS",function(){return v}),n.d(e,"RADIAN",function(){return p}),n.d(e,"DegreesToRadians",function(){return b}),n.d(e,"RadiansToDegress",function(){return m}),n.d(e,"PrecisionRound",function(){return S}),n.d(e,"Spread",function(){return w}),n.d(e,"AttractRepel",function(){return g}),n.d(e,"Oscillate",function(){return k}),n.d(e,"LikeASquareGrid",function(){return x}),n.d(e,"TriRectArray",function(){return A}),n.d(e,"GreatestCommonDivisor",function(){return C}),n.d(e,"SimplifyAspectRatio",function(){return I}),n.d(e,"IntegerNotation",function(){return T}),n.d(e,"GridRow",function(){return O}),n.d(e,"GridColumn",function(){return E}),n.d(e,"GridIndex",function(){return P});var r=n(4);function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}n.d(e,"Misc",function(){return r});var o=Math.PI,u=Math.sin,s=Math.cos,a=Math.pow,l=Math.round,c=Math.ceil,h=2*o,f=h,d=.5*o,y=o/180,v=180/o,p=y;function b(t){return t*y}function m(t){return t*v}function S(t,e){if(null==e)return t;var n=a(10,e);return l(n*t)/n}function w(t,e,n,r){return t-n*(e-1)*.5+r*n}function g(t,e,n,r,i){var o=e.SubtractVC(t);if(o.GetMagnitudeSquared()<r*r){var a=o.GetAngle();n.Add(s(a)*i,u(a)*i)}}function k(t,e,n,r){var i=.5*(n-e);return e+i+u(b(t*r))*i}function x(t,e,n,r,o,u){o=o||0,u=u||0;for(var s=e/n|0,a=i(t,1)[0],l=0;l<t.length;a=t[++l])a.x=l%s*n+o,a.y=(l/s|0)*r+u}function A(t,e,n,r,i){return null!=i?(i[0]=t,i[1]=e,i[2]=t+n,i[3]=e,i[4]=t,i[5]=e+r,i[6]=t,i[7]=e+r,i[8]=t+n,i[9]=e,i[10]=t+n,i[11]=e+r,i):[t,e,t+n,e,t,e+r,t,e+r,t+n,e,t+n,e+r]}function C(t,e){return 0===e?t:C(e,t%e)}function I(t,e,n){var r=C(t,e),i=null==n?[]:n;return i[0]=t/r,i[1]=e/r,i}function T(t,e,n){var r=t%e,i=t/e;return c(0===r?i+1:i)+n+(1+r)}function O(t,e){return t/e|0}function E(t,e){return t%e}function P(t,e,n){return e*n+t}},function(t,e,n){"use strict";n.r(e),n.d(e,"Line2DLine2DIntersection",function(){return i}),n.d(e,"ClosestPoint2DOnLine2D",function(){return o});var r=n(0);function i(t,e,n,r){u.SetV(e).SubtractV(t),s.SetV(r).SubtractV(n);var i=-s.x*u.y+u.x*s.y,o=t.x-n.x,a=t.y-n.y,l=(-u.y*o+u.x*a)/i,c=(s.x*a-s.y*o)/i;return l>=0&&l<=1&&c>=0&&c<=1}function o(t,e,n){var r=u.SetV(e).SubtractV(t),i=((n.x-t.x)*r.x+(n.y-t.y)*r.y)/r.GetMagnitudeSquared();return i<0?t:i>1?e:(r.Set(t.x+i*r.x,t.y+i*r.y),r)}var u=new r.a(0,0),s=new r.a(0,0)},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return i});var i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.objects=[],this.floodFunction=null,this.floodAmount=null,this.context=null}var e,n,i;return e=t,(n=[{key:"Store",value:function(t){this.objects.push(t)}},{key:"PreRetrieve",value:function(){0===this.objects.length&&this.Flood()}},{key:"Retrieve",value:function(){return this.PreRetrieve(),this.objects.pop()}},{key:"Flood",value:function(t,e,n){t&&(this.floodFunction=t),e&&(this.floodAmount=e),n&&(this.context=n);for(var r=0;r<this.floodAmount;++r)this.Store(this.floodFunction.call(this.context))}},{key:"Flush",value:function(){this.objects.length=0}},{key:"Clean",value:function(){var t=this.objects.length;this.Flush(),this.Flood(void 0,t)}}])&&r(e.prototype,n),i&&r(e,i),t}()},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";n.d(e,"a",function(){return r});var r=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@&","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz","0123456789abcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZ"]},function(t,e,n){"use strict";(function(t,r){n.d(e,"a",function(){return u});var i=n(3);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function e(t,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.onProcess=t,this.intervalId=null,this.afId=null,this.immediateId=null,this.timeoutId=null,this.delta=0,this.then=0,this.now=0,this.desiredRate=0,this.type=null,this.issuedStop=!1,this.ProcessAccurate=this.ProcessAccurate.bind(this),this.SetDesiredRate(n),r||this.StartAF()}var n,u,d;return n=e,d=[{key:"LOG",get:function(){return s},set:function(t){s=!!t}}],(u=[{key:"Process",value:function(){this.onProcess(this.ComputeDelta())}},{key:"ProcessAccurate",value:function(){!0!==this.issuedStop&&(this.now=Date.now(),this.then+this.desiredRate<=this.now&&(this.delta=this.now-this.then,this.then=this.now,this.onProcess(this.delta)),Date.now()-this.then<this.desiredRate-16?this.timeoutId=setTimeout(this.ProcessAccurate):this.immediateId=t(this.ProcessAccurate))}},{key:"ProcessAF",value:function(){this.onProcess(this.ComputeDelta()),null!==this.afId&&(this.afId=requestAnimationFrame(this.ProcessAF))}},{key:"ComputeDelta",value:function(){return this.now=Date.now(),this.delta=this.now-this.then,this.then=this.now,this.delta}},{key:"GetTPS",value:function(){return Object(i.PrecisionRound)(1/this.delta*1e3,2)}},{key:"SetDesiredRate",value:function(t){this.desiredRate=void 0===t?16.66:1e3/t}},{key:"IsRunning",value:function(){return null!==this.type&&(f("%cTicker: "+this.type+" is running!","color:#F00;".concat(h)),!0)}},{key:"Start",value:function(){if(this.IsRunning())return null;this.now=this.then=Date.now(),this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),this.type=l,f("%cTicker: Starting "+this.type,"color:#0F0;".concat(h))}},{key:"StartAccurate",value:function(){if(this.IsRunning())return null;this.issuedStop=!1,this.now=this.then=Date.now(),this.timeoutId=setTimeout(this.ProcessAccurate),this.type=c,f("%cTicker: Starting "+this.type,"color:#0F0;".concat(h))}},{key:"StartAF",value:function(){if(this.IsRunning())return null;this.now=this.then=Date.now(),this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),this.type=a,f("%cTicker: Starting "+this.type,"color:#0F0;".concat(h))}},{key:"Stop",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null),null!==this.afId&&(cancelAnimationFrame(this.afId),this.afId=null),null!==this.immediateId&&(r(this.immediateId),this.immediateId=null),null!==this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=null),null!==this.type&&f("%cTicker: Stopping "+this.type,"color:cyan;".concat(h)),this.issuedStop=!0,this.type=null}}])&&o(n.prototype,u),d&&o(n,d),e}(),s=!0,a="RAF",l="INTERVAL",c="ACCURATE INTERVAL",h="background-color:#304860;font-family:Arial;font-size:18px;font-weight:900;padding:5px;",f=function(){!1!==s&&console.log.apply(null,arguments)}}).call(this,n(9).setImmediate,n(9).clearImmediate)},function(t,e,n){(function(t){var r=void 0!==t&&t||"undefined"!=typeof self&&self||window,i=Function.prototype.apply;function o(t,e){this._id=t,this._clearFn=e}e.setTimeout=function(){return new o(i.call(setTimeout,r,arguments),clearTimeout)},e.setInterval=function(){return new o(i.call(setInterval,r,arguments),clearInterval)},e.clearTimeout=e.clearInterval=function(t){t&&t.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(r,this._id)},e.enroll=function(t,e){clearTimeout(t._idleTimeoutId),t._idleTimeout=e},e.unenroll=function(t){clearTimeout(t._idleTimeoutId),t._idleTimeout=-1},e._unrefActive=e.active=function(t){clearTimeout(t._idleTimeoutId);var e=t._idleTimeout;e>=0&&(t._idleTimeoutId=setTimeout(function(){t._onTimeout&&t._onTimeout()},e))},n(14),e.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==t&&t.setImmediate||this&&this.setImmediate,e.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==t&&t.clearImmediate||this&&this.clearImmediate}).call(this,n(6))},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return u});var r=n(1);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.functions={},this.values={},this.constants={},this.components={},this.objects={},this.lists={}}var n,u,y;return n=e,y=[{key:"Assign",value:function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.FUNC=s,e.VAL=a,e.CONST=l,e.COMP=c,e.OBJ=h,e.LIST=f}},{key:"Create",value:function(n){var r=r||null;if(null==r){if(null==t)throw new Error("Neither window nor global exists!");if(void 0!==t[n])throw new Error("global."+n+" already exists!");t[n]=new e}else{if(void 0!==r[n])throw new Error("window."+n+" already exists!");r[n]=new e}}},{key:"FUNCTION",get:function(){return s}},{key:"VALUE",get:function(){return a}},{key:"CONSTANT",get:function(){return l}},{key:"COMPONENT",get:function(){return c}},{key:"OBJECT",get:function(){return h}},{key:"LIST",get:function(){return f}},{key:"AllowGetNullUndefined",get:function(){return d},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_AllowGetNullUndefined"),d=!!t}}],(u=[{key:"Define",value:function(t,e,n){this.Mark(t,e),this.Set(t,e,n)}},{key:"Mark",value:function(t,e){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if((t===l||t===c)&&void 0!==this[t][e])throw new Error("Constants cannot be reassigned!");this[t][e]=null}},{key:"Get",value:function(t,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof n)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if(!1===e.AllowGetNullUndefined&&null==this[t][n])throw new Error("Null or undefined!");return this[t][n]}},{key:"Set",value:function(t,e,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");switch(t){case s:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.functions[e])throw new Error("No mark!");this.functions[e]=n;break;case a:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.values[e])throw new Error("No mark!");this.values[e]=n;break;case l:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.constants[e])throw new Error("No mark!");Object.defineProperty(this.constants,e,{writable:!1,configurable:!1,value:n});break;case c:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.components[e])throw new Error("No mark!");Object.defineProperty(this.components,e,{writable:!1,configurable:!1,value:n});break;case h:if("object"!==i(n))throw new Error("Needs to be an object");if(!0===Object(r.IsArray)(n))throw new Error("Arrays are not allowed!");if(null!==this.objects[e])throw new Error("No mark!");this.objects[e]=n;break;case f:if(!1===Object(r.IsArray)(n))throw new Error("Needs to be an array!");if(null!==this.lists[e])throw new Error("No mark!");this.lists[e]=n;break;default:throw new Error("Unrecognized type!")}}}])&&o(n.prototype,u),y&&o(n,y),e}(),s="functions",a="values",l="constants",c="components",h="objects",f="lists",d=!1}).call(this,n(6))},function(t,e,n){t.exports=n(16)},function(t,e){function n(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}Array.prototype.indexPop=function(t){var e=this.length-1;if(e>1&&t<=e&&t>=0){var n=this[e];return this[e]=this[t],this[t]=n,this.pop()}return this.pop()},Array.prototype.indexShift=function(t){if(this.length>1&&t<=this.length-1&&t>=0){var e=n(this,1)[0];return this[0]=this[t],this[t]=e,this.shift()}return this.shift()},Array.prototype.popSplice=function(t){var e=this.length-1;if(!(e<1)){for(var n=this[t];t<e;)this[t]=this[t+1],t++;return this.pop(),n}},Array.prototype.shiftSplice=function(t){if(!(this.length<1)){for(var e=this[t];t>0;)this[t]=this[t-1],t--;return this.shift(),e}},Array.prototype.fickleSplice=function(t){return t>.5*this.length|0?this.popSplice(t):this.shiftSplice(t)}},function(t){t.exports={name:"nenkraft2",version:"2.4.5",description:"A small rendering tool",main:"./bundle-fe/nk2.js",devDependencies:{"@babel/core":"^7.0.0","@babel/preset-env":"^7.0.0","babel-loader":"^8.0.2","copy-webpack-plugin":"^5.0.3","css-loader":"^2.1.1",eslint:"^5.5.0","file-loader":"^4.0.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0","mini-css-extract-plugin":"^0.7.0","raw-loader":"^3.0.0",rimraf:"^2.6.2",webpack:"^4.17.2","webpack-cli":"^3.3.3","webpack-dev-server":"^3.7.1"},scripts:{"build-prod":"webpack --env production --mode production","build-bundle-fe":"webpack --env bundle-fe --mode production","build-bundle-be":"webpack --env bundle-be --mode production",start:"webpack-dev-server --env development --mode development","clear-bundle-fe":"rimraf bundle-fe/dist","clear-bundle-be":"rimraf bundle-be/dist","clear-dist":"rimraf dist",ce:"rimraf dist bundle-fe/dist bundle-be/dist",be:"yarn run ce && yarn run build-prod && yarn run build-bundle-be && yarn run build-bundle-fe","lint-f":"eslint src demos --fix",lint:"eslint src demos"},keywords:["2d","rendering","command","vector","game","graphic","tween","animation","collision","canvas","web","webgl","utilities"],author:"nuuf",license:"MIT"}},function(t,e,n){(function(t,e){!function(t,n){"use strict";if(!t.setImmediate){var r,i,o,u,s,a=1,l={},c=!1,h=t.document,f=Object.getPrototypeOf&&Object.getPrototypeOf(t);f=f&&f.setTimeout?f:t,"[object process]"==={}.toString.call(t.process)?r=function(t){e.nextTick(function(){y(t)})}:!function(){if(t.postMessage&&!t.importScripts){var e=!0,n=t.onmessage;return t.onmessage=function(){e=!1},t.postMessage("","*"),t.onmessage=n,e}}()?t.MessageChannel?((o=new MessageChannel).port1.onmessage=function(t){y(t.data)},r=function(t){o.port2.postMessage(t)}):h&&"onreadystatechange"in h.createElement("script")?(i=h.documentElement,r=function(t){var e=h.createElement("script");e.onreadystatechange=function(){y(t),e.onreadystatechange=null,i.removeChild(e),e=null},i.appendChild(e)}):r=function(t){setTimeout(y,0,t)}:(u="setImmediate$"+Math.random()+"$",s=function(e){e.source===t&&"string"==typeof e.data&&0===e.data.indexOf(u)&&y(+e.data.slice(u.length))},t.addEventListener?t.addEventListener("message",s,!1):t.attachEvent("onmessage",s),r=function(e){t.postMessage(u+e,"*")}),f.setImmediate=function(t){"function"!=typeof t&&(t=new Function(""+t));for(var e=new Array(arguments.length-1),n=0;n<e.length;n++)e[n]=arguments[n+1];var i={callback:t,args:e};return l[a]=i,r(a),a++},f.clearImmediate=d}function d(t){delete l[t]}function y(t){if(c)setTimeout(y,0,t);else{var e=l[t];if(e){c=!0;try{!function(t){var e=t.callback,r=t.args;switch(r.length){case 0:e();break;case 1:e(r[0]);break;case 2:e(r[0],r[1]);break;case 3:e(r[0],r[1],r[2]);break;default:e.apply(n,r)}}(e)}finally{d(t),c=!1}}}}}("undefined"==typeof self?void 0===t?this:t:self)}).call(this,n(6),n(15))},function(t,e){var n,r,i=t.exports={};function o(){throw new Error("setTimeout has not been defined")}function u(){throw new Error("clearTimeout has not been defined")}function s(t){if(n===setTimeout)return setTimeout(t,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(t){n=o}try{r="function"==typeof clearTimeout?clearTimeout:u}catch(t){r=u}}();var a,l=[],c=!1,h=-1;function f(){c&&a&&(c=!1,a.length?l=a.concat(l):h=-1,l.length&&d())}function d(){if(!c){var t=s(f);c=!0;for(var e=l.length;e;){for(a=l,l=[];++h<e;)a&&a[h].run();h=-1,e=l.length}a=null,c=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===u||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(t)}}function y(t,e){this.fun=t,this.array=e}function v(){}i.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];l.push(new y(t,e)),1!==l.length||c||s(d)},y.prototype.run=function(){this.fun.apply(null,this.array)},i.title="browser",i.browser=!0,i.env={},i.argv=[],i.version="",i.versions={},i.on=v,i.addListener=v,i.once=v,i.off=v,i.removeListener=v,i.removeAllListeners=v,i.emit=v,i.prependListener=v,i.prependOnceListener=v,i.listeners=function(t){return[]},i.binding=function(t){throw new Error("process.binding is not supported")},i.cwd=function(){return"/"},i.chdir=function(t){throw new Error("process.chdir is not supported")},i.umask=function(){return 0}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"CCH1",function(){return g}),n.d(r,"CCH1Decipher",function(){return k});var i={};n.r(i),n.d(i,"Linear",function(){return T}),n.d(i,"QuadIn",function(){return O}),n.d(i,"QuadOut",function(){return E}),n.d(i,"QuadInOut",function(){return P}),n.d(i,"SineIn",function(){return _}),n.d(i,"SineOut",function(){return R}),n.d(i,"SineInOut",function(){return N}),n.d(i,"CircIn",function(){return M}),n.d(i,"CircOut",function(){return V}),n.d(i,"CircInOut",function(){return G});var o={};n.r(o),n.d(o,"Result",function(){return F}),n.d(o,"Collide",function(){return B}),n.d(o,"SeparatingResponse",function(){return L});var u={};n.r(u),n.d(u,"Line2DLine2DCollision",function(){return U});var s={};n.r(s),n.d(s,"Result",function(){return W}),n.d(s,"Collide",function(){return z});var a={};n.r(a),n.d(a,"Result",function(){return K}),n.d(a,"Collide",function(){return Z}),n.d(a,"ElasticResponse",function(){return tt});var l={};n.r(l),n.d(l,"Result",function(){return ct}),n.d(l,"Collide",function(){return ht}),n.d(l,"ReflectingResponse",function(){return ft});var c={};n.r(c),n.d(c,"Result",function(){return pt}),n.d(c,"Collide",function(){return bt}),n.d(c,"AxisSeparates",function(){return mt}),n.d(c,"SeparatingResponse",function(){return St});var h={};n.r(h),n.d(h,"Body2D",function(){return gt}),n.d(h,"AABB2DvsAABB2D",function(){return o}),n.d(h,"Line2DvsLine2D",function(){return u}),n.d(h,"AABB2DvsLine2D",function(){return s}),n.d(h,"CirclevsCircle",function(){return a}),n.d(h,"CirclevsLine2D",function(){return l}),n.d(h,"Polygon2DvsPolygon2D",function(){return c});var f={};n.r(f),n.d(f,"Rectangular2D",function(){return Ot}),n.d(f,"Isosceles2D",function(){return Et}),n.d(f,"Cyclic2D",function(){return Pt}),n.d(f,"Equilateral2D",function(){return _t}),n.d(f,"Star2D",function(){return Rt}),n.d(f,"Butterfly2D",function(){return Nt}),n.d(f,"Rose2D",function(){return Mt}),n.d(f,"Supershape2D",function(){return Vt});var d={};n.r(d),n.d(d,"AABB2D",function(){return Dt}),n.d(d,"Circle",function(){return zt}),n.d(d,"Line2D",function(){return $t}),n.d(d,"Ray2D",function(){return $t}),n.d(d,"Polygon2D",function(){return ee}),n.d(d,"PolygonConstruction",function(){return f});var y={};n.r(y),n.d(y,"Timer",function(){return le}),n.d(y,"Ticker",function(){return ce.a});var v={};n.r(v),n.d(v,"Option",function(){return fe}),n.d(v,"Command",function(){return ve}),n.d(v,"Registry",function(){return ge});var p={};n.r(p),n.d(p,"Motion",function(){return xe}),n.d(p,"Manager",function(){return Ie});var b={};n.r(b),n.d(b,"RectanglePacker",function(){return Ee});var m={};n.r(m),n.d(m,"Dispatcher",function(){return ue}),n.d(m,"Listener",function(){return ie});var S=n(1),w=n(3);function g(t,e){var n,r,i=t.split(""),o=[];e=e||1;for(var u=0;u<i.length;++u)n=((n=i[u]).charCodeAt(0)+e).toString(2),r=Object(S.RandomInteger)(1,9),o.push(r+"x"+n.replace(/1/g,r));return o.join(" ")}function k(t,e){var n,r=t.split(" "),i=[];e=e||1;for(var o=0;o<r.length;++o)n=(n=r[o]).slice(2-n.length),i.push(String.fromCharCode(parseInt(n.replace(/[2-9]/g,"1"),2)-e));return i.join("")}var x=Math.sin,A=Math.cos,C=Math.sqrt,I=Math.PI,T=function(t,e,n,r){return n*t/r+e},O=function(t,e,n,r){return n*(t/=r)*t+e},E=function(t,e,n,r){return-n*(t/=r)*(t-2)+e},P=function(t,e,n,r){return(t/=.5*r)<1?.5*n*t*t+e:.5*-n*(--t*(t-2)-1)+e},_=function(t,e,n,r){return-n*A(t/r*(.5*I))+n+e},R=function(t,e,n,r){return n*x(t/r*(.5*I))+e},N=function(t,e,n,r){return.5*-n*(A(I*t/r)-1)+e},M=function(t,e,n,r){return-n*(C(1-(t/=r)*t)-1)+e},V=function(t,e,n,r){return t/=r,n*C(1- --t*t)+e},G=function(t,e,n,r){return(t/=.5*r)<1?.5*-n*(C(1-t*t)-1)+e:.5*n*(C(1-(t-=2)*t)+1)+e},D=n(0);function j(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var F=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new D.a(0,0),this.occured=!1}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){this.mtv.SetSame(0),this.occured=!1}}])&&j(e.prototype,n),r&&j(e,r),t}(),B=function(t,e,n){var r=t.shape,i=e.shape;return r.tl.x<i.br.x&&i.tl.x<r.br.x&&r.tl.y<i.br.y&&i.tl.y<r.br.y&&(H[0].Set(r.tl.x-i.br.x,0),H[1].Set(r.br.x-i.tl.x,0),H[2].Set(0,r.tl.y-i.br.y),H[3].Set(0,r.br.y-i.tl.y),H.sort(D.a.SortMinMag),n.mtv.SetV(H[0]),n.occured=!0,!0)},L=function(t,e,n){n.mtv.Multiply(.5,.5),t.relative.SubtractV(n.mtv),e.relative.AddV(n.mtv)},H=[new D.a(0,0),new D.a(0,0),new D.a(0,0),new D.a(0,0)];function U(t,e,n,r,i){i.SetV(e).SubtractV(t),q.SetV(r).SubtractV(n);var o=-q.x*i.y+i.x*q.y,u=t.x-n.x,s=t.y-n.y,a=(-i.y*u+i.x*s)/o,l=(q.x*s-q.y*u)/o;return a>=0&&a<=1&&l>=0&&l<=1?(i.Set(t.x+l*i.x,t.y+l*i.y),!0):(i.SetSame(0),!1)}var q=new D.a(0,0);function Y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var W=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.poc={a:new D.a(0,0),b:new D.a(0,0),c:new D.a(0,0),d:new D.a(0,0)},this.top=!1,this.right=!1,this.bottom=!1,this.left=!1}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){this.poc.a.SetSame(0),this.poc.b.SetSame(0),this.poc.c.SetSame(0),this.poc.d.SetSame(0),this.top=!1,this.right=!1,this.bottom=!1,this.left=!1}}])&&Y(e.prototype,n),r&&Y(e,r),t}(),z=function(t,e,n){var r=t.shape,i=e.shape;Q.Set(r.tl.x+(r.br.x-r.tl.x),r.tl.y),X.Set(r.tl.x,r.tl.y+(r.br.y-r.tl.y)),n.top=U(i.s,i.e,r.tl,Q,n.poc.a),n.right=U(i.s,i.e,r.br,Q,n.poc.b),n.bottom=U(i.s,i.e,r.br,X,n.poc.c),n.left=U(i.s,i.e,r.tl,X,n.poc.d)},Q=new D.a(0,0),X=new D.a(0,0);function J(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $=Math.sqrt,K=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new D.a(0,0),this.poc={a:new D.a(0,0),b:new D.a(0,0),c:new D.a(0,0)},this.mtd=0,this.delta=new D.a(0,0),this.occured=!1}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){this.poc.a.SetSame(0),this.poc.b.SetSame(0),this.poc.c.SetSame(0),this.mtv.SetSame(0),this.mtd=0,this.delta.SetSame(0),this.occured=!1}}])&&J(e.prototype,n),r&&J(e,r),t}(),Z=function(t,e,n){var r=t.shape,i=e.shape,o=r.radius+i.radius;ut.SetV(r.center).SubtractV(i.center);var u=ut.GetMagnitudeSquared();if(o*o>u){var s=$(u),a=(r.radiusSquared-i.radiusSquared+u)/(s+s),l=$(r.radiusSquared-a*a)/s,c=-ut.y*l,h=ut.x*l,f=s-r.radius-i.radius;return rt.Set(r.center.x+ut.x*a/s,r.center.y+ut.y*a/s),it.Set(rt.x+c,rt.y+h),ot.Set(rt.x-c,rt.y-h),n.mtv.SetV(ut).Divide(o,o),n.poc.a.SetV(rt),n.poc.b.SetV(it),n.poc.c.SetV(ot),n.mtd=f,n.delta.SetV(ut),n.occured=!0,!0}return!1},tt=function(t,e,n){et.SetV(n.delta).Normalize(),nt.SetV(n.mtv);var r=t.mass,i=e.mass,o=t.velocity,u=e.velocity,s=2*(o.GetDotV(et)-u.GetDotV(et))/(r+i);o.Set(o.x-s*i*et.x,o.y-s*i*et.y),u.Set(u.x+s*r*et.x,u.y+s*r*et.y),nt.Multiply(n.mtd,n.mtd).Multiply(.5,.5),t.relative.SubtractV(nt),e.relative.AddV(nt)},et=new D.a(0,0),nt=new D.a(0,0),rt=new D.a(0,0),it=new D.a(0,0),ot=new D.a(0,0),ut=new D.a(0,0),st=n(4);function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lt=Math.sqrt,ct=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new D.a(0,0),this.cp=new D.a(0,0),this.sOrE=0,this.occured=!1}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){this.mtv.SetSame(0),this.cp.SetSame(0),this.sOrE=0,this.occured=!1}}])&&at(e.prototype,n),r&&at(e,r),t}(),ht=function(t,e,n){var r=t.shape,i=e.shape,o=r.center,u=Object(st.ClosestPoint2DOnLine2D)(i.s,i.e,o);dt.Set(o.x-u.x,o.y-u.y);var s=dt.GetMagnitudeSquared();if(s<r.radiusSquared){var a=r.radius-lt(s);return n.mtv.SetV(dt).Normalize().Multiply(a,a),n.cp.SetV(u),n.occured=!0,u===i.s?n.sOrE=1:u===i.e&&(n.sOrE=-1),!0}return!1},ft=function(t,e,n){var r,i,o=e.shape,u=t.velocity,s=t.relative,a=n.cp;0!==n.sOrE?(r=a.SubtractVC(s)).Normalize():r=o.GetNormalA(),i=u.GetReflectionV(r),u.SetV(i),s.AddV(n.mtv)},dt=new D.a(0,0);function yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vt=Math.abs,pt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new D.a(0,0),this.olAxis=new D.a(0,0),this.mtd=1/0,this.occured=!1}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){this.occured=!1,this.mtv.Set(0,0),this.mtd=1/0,this.olAxis.Set(0,0)}}])&&yt(e.prototype,n),r&&yt(e,r),t}(),bt=function(t,e,n){for(var r=0,i=t.shape.normals,o=e.shape.normals;r<o.length;++r)if(!0===mt(t,e,i[r],n))return!1;for(r=0;r<o.length;++r)if(!0===mt(t,e,o[r],n))return!1;return n.mtv.SetV(n.olAxis),n.mtv.Multiply(n.mtd,n.mtd),n.occured=!0,!0},mt=function(t,e,n,r){var i=n.GetMinMaxDot(t.shape.vertices),o=n.GetMinMaxDot(e.shape.vertices),u=e.relative.SubtractVC(t.relative).GetDotV(n);if(o.Add(u,u),i.x>o.y||o.x>i.y)return!0;var s=0,a=0,l=0,c=i.x,h=i.y,f=o.x,d=o.y;s=c<f?h<d?h-f:(a=h-f)<(l=d-c)?a:-l:h>d?c-d:(a=h-f)<(l=d-c)?a:-l;var y=vt(s);return y<r.mtd&&(r.mtd=y,r.olAxis.SetV(n),s<0&&r.olAxis.Invert()),!1},St=function(t,e,n){n.mtv.Multiply(.5,.5),t.relative.SubtractV(n.mtv),e.relative.AddV(n.mtv)};function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var gt=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.shape=e,this.mass=0,this.relative=null,this.velocity=new D.a(0,0),this.offset=new D.a(0,0)}var e,n,r;return e=t,(n=[{key:"SetMass",value:function(t){return this.mass=t,this}},{key:"SetOffset",value:function(t,e){return this.offset.Set(t,e),this}},{key:"SetVelocity",value:function(t,e){return this.velocity.Set(t,e),this}},{key:"SetVelocityV",value:function(t){return this.velocity.SetV(t),this}},{key:"GetPosition",value:function(){return this.shape.GetPosition()}},{key:"SetPosition",value:function(t,e){this.shape.SetPosition(t+this.offset.x,e+this.offset.y)}},{key:"SetPositionV",value:function(t){return this.SetPosition(t.x,t.y),this}},{key:"SetRelative",value:function(t){return this.relative=t,this}}])&&wt(e.prototype,n),r&&wt(e,r),t}(),kt=Math.PI,xt=Math.cos,At=Math.sin,Ct=Math.abs,It=Math.pow,Tt=Math.exp,Ot=function(t,e,n,r,i){var o=new D.a(e,n),u=new D.a(e+r,n),s=new D.a(e+r,n+i),a=new D.a(e,n+i);return t.Recreate([o,u,s,a]),t.ComputeBounds(),t.ComputeNormalsA(),t},Et=function(t,e,n,r,i){var o=new D.a(e,n),u=new D.a(e+.5*r,n+i),s=new D.a(e-.5*r,n+i);return t.Recreate([o,u,s]),t.ComputeBounds(),t.ComputeNormalsA(),t},Pt=function(t,e,n,r,i){var o,u,s,a=0,l=i,c=2*kt/l;for(t.Recreate([]);a<l;++a)o=xt(s=c*a)*r,u=At(s)*r,t.AddVertex(new D.a(e+o,n+u));return t.ComputeBounds(),t.ComputeNormalsA(),t},_t=function(t,e,n,r){var i,o,u=2.0943951023931953;return t.Recreate([]),i=r,o=0,t.AddVertex(new D.a(e+i,n+o)),i=xt(u)*r,o=At(u)*r,t.AddVertex(new D.a(e+i,n+o)),i=xt(2*u)*r,o=At(2*u)*r,t.AddVertex(new D.a(e+i,n+o)),t.Rotate(-90*new Math.RADIAN),t.ComputeBounds(),t.ComputeNormalsA(),t},Rt=function(t,e,n,r,i,o){var u,s,a,l,c=0,h=2*o,f=2*Math.PI/h;for(t.Recreate([]);c<h;++c)l=0==(1&c)?r:i,a=f*c,u=Math.cos(a)*l,s=Math.sin(a)*l,t.AddVertex(new D.a(e+u,n+s));return t.ComputeBounds(),t.ComputeNormalsA(),t},Nt=function t(e,n,r,i,o){var u,s,a,l=0,c=t.C;for(e.Recreate([]);l<i;++l)a=l*c._1*kt/i,u=xt(a)*(Tt(xt(a))-c._2*xt(c._3*a)-It(At(a/c._4),c._5))*o,s=At(a)*(Tt(xt(a))-c._2*xt(c._3*a)-It(At(a/c._4),c._5))*o,e.AddVertex(new D.a(n+u,r+s));return e.ComputeBounds(),e.ComputeNormalsA(),e};Nt.C={_1:24,_2:2,_3:4,_4:12,_5:5};var Mt=function(t,e,n,r,i,o,u){var s,a,l,c,h=0,f=o,d=2*kt/f*u;for(t.Recreate([]);h<f;++h)c=xt(i*(l=d*h))*r,s=xt(l)*c,a=At(l)*c,t.AddVertex(new D.a(e+s,n+a));return t.ComputeBounds(),t.ComputeNormalsA(),t},Vt=function t(e,n,r,i,o,u,s,a,l){var c,h,f,d,y,v,p=0,b=o,m=t.C;for(s=null==s?1:s,a=null==a?1:a,l=null==l?1:l,e.Recreate([]);p<b;++p)y=xt(u*(f=p*kt*2/o)/4)/m._A,y=Ct(y),y=It(y,a),v=At(u*f/4)/m._B,v=Ct(v),v=It(v,l),d=It(y+v,1/s),0===Ct(d)?(c=0,h=0):(d=1/d,c=xt(f)*d*i,h=At(f)*d*i),e.AddVertex(new D.a(n+c,r+h));return e.ComputeBounds(),e.ComputeNormalsA(),e};function Gt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Vt.C={_A:1,_B:1};var Dt=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tl=new D.a(e,n),this.br=new D.a(r,i),this.w=0,this.h=0,this.hw=0,this.hh=0,this.area=0,this.belongsTo=null,this.TYPE=Ht,this.ComputeWH()}var e,n,r;return e=t,r=[{key:"TYPE",get:function(){return Ht}}],(n=[{key:"Copy",value:function(){return(new t).SetC(this)}},{key:"Set",value:function(t,e,n,r){return this.tl.Set(t,e),this.br.Set(n,r),this.ComputeWH()}},{key:"SetC",value:function(t){return this.Set(t.tl.x,t.tl.y,t.br.x,t.br.y)}},{key:"SetXYWH",value:function(t,e,n,r){return this.Set(t,e,t+n,e+r)}},{key:"SetPosition",value:function(t,e){return this.tl.Set(t,e),this.br.Set(t+this.w,e+this.h),this}},{key:"GetPosition",value:function(){return this.tl}},{key:"Scale",value:function(t,e,n){return!1!==n&&this.tl.Multiply(t,e),this.br.Multiply(t,e),this.ComputeWH()}},{key:"ScaleV",value:function(t,e){return!1!==e&&this.tl.MultiplyV(t),this.br.MultiplyV(t),this.ComputeWH()}},{key:"ComputeWH",value:function(){return this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y,this.hw=.5*this.w,this.hh=.5*this.h,this.area=this.w*this.h,this}},{key:"IntersectsPoint2D",value:function(t){return!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)}},{key:"ContainsPoint2D",value:function(t){return!(t.x<=this.tl.x||t.x>=this.br.x||t.y<=this.tl.y||t.y>=this.br.y)}},{key:"IntersectsAABB2D",value:function(t){return!(t.tl.x>=this.br.x||t.tl.y>=this.br.y||t.br.x<=this.tl.x||t.br.y<=this.tl.y)}},{key:"ContainsAABB2D",value:function(t){return!(t.area>this.area)&&(t.tl.x>this.tl.x&&t.tl.y>this.tl.y&&t.br.x<this.br.x&&t.br.y<this.br.y)}},{key:"GetQuadrant",value:function(e){var n=this.tl,r=this.br;switch(e){case jt:return new t(n.x,n.y,n.x+this.hw,n.y+this.hh);case Ft:return new t(n.x+this.hw,n.y,r.x,n.y+this.hh);case Bt:return new t(n.x,n.y+this.hh,n.x+this.hw,r.y);case Lt:return new t(n.x+this.hw,n.y+this.hh,r.x,r.y);default:return null}}}])&&Gt(e.prototype,n),r&&Gt(e,r),t}(),jt="TL",Ft="TR",Bt="BL",Lt="BR",Ht=1;function Ut(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qt=Math.PI,Yt=Math.sin,Wt=Math.cos,zt=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=new D.a(e,n),this.diameter=0,this.w=0,this.h=0,this.radiusSquared=0,this.radiusUnsquared=0,this.area=0,this.radius=r,this.belongsTo=null,this.TYPE=Qt}var e,n,r;return e=t,r=[{key:"TYPE",get:function(){return Qt}}],(n=[{key:"Copy",value:function(){return(new t).SetC(this)}},{key:"Set",value:function(t,e,n){return this.center.Set(t,e),this.radius=n,this}},{key:"SetC",value:function(t){return this.center.SetV(t),this.radius=t.radius,this}},{key:"SetPosition",value:function(t,e){return this.center.Set(t,e),this}},{key:"GetPosition",value:function(){return this.center}},{key:"Scale",value:function(t){return this.radius*=t,this}},{key:"IntersectsCircle",value:function(t){var e=this.radius+t.radius;return e*e>=this.center.GetDistanceSquaredV(t.center)}},{key:"ContainsCircle",value:function(t){return this.radius-t.radius>this.center.GetDistanceV(t.center)}},{key:"IntersectsPoint2D",value:function(t){return this.radiusSquared>=this.center.GetDistanceSquaredV(t)}},{key:"GenerateRandomPoints",value:function(t,e,n){var r=S.RandomFloat,i=new D.a(this.x-this.radius,this.y-this.radius),o=new D.a(this.x+this.radius,this.y+this.radius),u=[];n=!!n,!0===e&&(r=S.RandomInteger);for(var s=0;s<t;++s){for(var a=new D.a(r(i.x,o.x),r(i.y,o.y));this.IntersectsPoint2D(a)===n;)a.Set(r(i.x,o.x),r(i.y,o.y));u.push(a)}return u}},{key:"GeneratePerimeterPoints",value:function(t,e){var n=[];t*=e;for(var r=0;r<t;r+=e)n.push(new D.a(this.x+Wt(Object(w.DegreesToRadians)(r))*this.radius,this.y+Yt(Object(w.DegreesToRadians)(r))*this.radius));return n}},{key:"x",get:function(){return this.center.x},set:function(t){this.center.x=t}},{key:"y",get:function(){return this.center.y},set:function(t){this.center.y=t}},{key:"radius",get:function(){return this.radiusUnsquared},set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=this.w=this.h=2*t,this.area=qt*t*t}}])&&Ut(e.prototype,n),r&&Ut(e,r),t}(),Qt=2;function Xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Jt=Math.abs,$t=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.s=new D.a(e,n),this.e=new D.a(r,i),this.epsilon=1e3,this.belongsTo=null,this.TYPE=Kt}var e,n,r;return e=t,r=[{key:"TYPE",get:function(){return Kt}}],(n=[{key:"Copy",value:function(){return(new t).SetC(this)}},{key:"Set",value:function(t,e,n,r){return this.s.Set(t,e),this.e.Set(n,r),this}},{key:"SetC",value:function(t){return this.s.SetV(t.s),this.e.SetV(t.e),this}},{key:"SetPosition",value:function(t,e){var n=t+Jt(this.e.x-this.s.x),r=e+Jt(this.e.y-this.s.y);return this.s.Set(t,e),this.e.Set(n,r),this}},{key:"GetPosition",value:function(){return this.s}},{key:"Stretch",value:function(t){var e=.5*t;return this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e),this}},{key:"Rotate",value:function(t,e,n){return e=null==e?.5:e,Zt.SetV(this.s).AddV(this.e).Multiply(e,null==n?e:n),this.s.RotateAroundV(Zt,t),this.e.RotateAroundV(Zt,t),this}},{key:"Cut",value:function(t,e){null==e&&(e=[]);for(var n=0;n<t.length;++n)e.push(this.s.GetWeightedAverageV(this.e,t[n]));return e}},{key:"GetLength",value:function(){return this.s.GetDistanceV(this.e)}},{key:"GetLengthSquared",value:function(){return this.s.GetDistanceSquaredV(this.e)}},{key:"IntersectsPoint2D",value:function(t){var e=this.s,n=this.e,r=(t.y-e.y)*(n.x-e.x)-(t.x-e.x)*(n.y-e.y);if(Math.abs(r)>this.epsilon)return!1;var i=(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y);return!(i<0)&&!(i>this.GetLengthSquared())}},{key:"IntersectsLine2D",value:function(t){return Object(st.Line2DLine2DIntersection)(this.s,this.e,t.s,t.e)}},{key:"GetClosestPoint2DTo",value:function(t){return Object(st.ClosestPoint2DOnLine2D)(this.s,this.e,t)}},{key:"GetNormalA",value:function(){return this.s.GetNormalAV(this.e)}},{key:"GetNormalB",value:function(){return this.s.GetNormalBV(this.e)}}])&&Xt(e.prototype,n),r&&Xt(e,r),t}(),Kt=0,Zt=new D.a(0,0);function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ee=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=[],this.normals=[],this.perimeterMidPoints=[],this.centroid=new D.a(0,0),this.aabb=new Dt(0,0,0,0),this.dirtyBounds=!0,this.dirtyCentroid=!0,this.belongsTo=null,this.TYPE=ne,null!=e&&this.AddVertices(e)}var e,n,r;return e=t,r=[{key:"TYPE",get:function(){return ne}}],(n=[{key:"Copy",value:function(){return(new t).SetC(this)}},{key:"SetC",value:function(t){for(var e=t.vertices,n=0;n<e.length;++n)this.AddVertex(e[n].Copy());return this.ComputeBounds(),this.ComputeCentroid(),this}},{key:"ExtractSegments",value:function(t){var e=this.vertices,n=e.length-1;null==t&&(t=[]);for(var r=0;r<n;++r)t.push(new $t(e[r],e[r+1]));return t.push(new $t(e[n],e[0])),t}},{key:"GenerateRandomPoints",value:function(t,e,n){this.ComputeBounds(),n=!!n;var r=S.RandomFloat,i=this.aabb.tl,o=this.aabb.br,u=[];!0===e&&(r=S.RandomInteger);for(var s=0;s<t;++s){for(var a=new D.a(r(i.x,o.x),r(i.y,o.y));this.IntersectsPoint2D(a)===n;)a.Set(r(i.x,o.x),r(i.y,o.y));u.push(a)}return u}},{key:"AddVertex",value:function(t){return this.vertices.push(t),this.dirtyBounds=!0,this.dirtyCentroid=!0,this}},{key:"AddVertices",value:function(t){if(t[0]instanceof D.a)this.vertices.push.apply(this.vertices,t);else if("number"==typeof t[0])for(var e=0;e<t.length;e+=2)this.AddVertex(new D.a(t[e],t[e+1]));else if(null!=t[0].x)for(e=0;e<t.length;++e)this.AddVertex(new D.a(t[e].x,t[e].y));return this}},{key:"Recreate",value:function(t){return this.vertices.length=0,null!=t&&this.vertices.push.apply(this.vertices,t),this.dirtyBounds=!0,this.dirtyCentroid=!0,this}},{key:"ComputeBounds",value:function(){for(var t,e=1/0,n=-e,r=e,i=-e,o=this.vertices,u=0;u<o.length;++u)(t=o[u]).x<e&&(e=t.x),t.x>n&&(n=t.x),t.y<r&&(r=t.y),t.y>i&&(i=t.y);return this.aabb.Set(e,r,n,i),this.dirtyBounds=!1,this}},{key:"Rotate",value:function(t,e,n){!0===this.dirtyBounds&&this.ComputeBounds();var r=0,i=this.aabb,o=i.tl.Copy(),u=this.vertices,s=u.length;for(e=null==e?.5:e,o.AddV(i.br),o.Multiply(e,null==n?e:n);r<s;++r)u[r].RotateAroundV(o,t);return this.dirtyCentroid=!0,this.dirtyBounds=!0,this}},{key:"SetPosition",value:function(t,e){!0===this.dirtyCentroid&&this.ComputeCentroid();for(var n=this.vertices,r=this.centroid,i=0;i<n.length;++i)n[i].SubtractV(r).Add(t,e);return this.dirtyCentroid=!0,this.dirtyBounds=!0,this}},{key:"ComputeCentroid",value:function(){var t=this.vertices,e=this.centroid;e.Set(0,0);for(var n=0;n<t.length;++n)e.AddV(t[n]);return e.Divide(t.length,t.length),this.dirtyCentroid=!1,this}},{key:"ComputeNormalsA",value:function(){var t=this.vertices,e=t.length-1,n=this.normals;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetNormalAV(t[r+1]));return n.push(t[e].GetNormalAV(t[0])),this}},{key:"ComputeNormalsB",value:function(){var t=this.vertices,e=t.length-1,n=this.normals;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetNormalBV(t[r+1]));return n.push(t[e].GetNormalBV(t[0])),this}},{key:"ComputePerimeterMidPoints",value:function(){var t=this.vertices,e=t.length-1,n=this.perimeterMidPoints;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetMidPointV(t[r+1]));return n.push(t[e].GetMidPointV(t[0])),this}},{key:"IntersectsPoint2D",value:function(t){if(!0===this.dirtyBounds&&this.ComputeBounds(),!1===this.aabb.IntersectsPoint2D(t))return!1;for(var e,n,r=!1,i=this.vertices,o=t.x,u=t.y,s=0,a=i.length-1;s<i.length;a=s++)e=i[s],n=i[a],e.y>u!=n.y>u&&o<(n.x-e.x)*(u-e.y)/(n.y-e.y)+e.x&&(r=!r);return r}}])&&te(e.prototype,n),r&&te(e,r),t}(),ne=3;function re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ie=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=n,this.holderContext=null==e?n:e,this.handle=r,this.removeOnNextCall=i}var e,n,r;return e=t,(n=[{key:"Execute",value:function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()}},{key:"Remove",value:function(){this.holderContext.Remove(this.handle,this.context)}}])&&re(e.prototype,n),r&&re(e,r),t}();function oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ue=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[],this.stopPropagation=!1,this.target=null,this.data=null}var e,n,r;return e=t,(n=[{key:"GetListenerIndex",value:function(t,e){var n,r=this.listeners;if(0===r.length)return-1;for(var i=0;i<r.length;++i)if((n=r[i]).context===e&&n.handle===t)return i;return-1}},{key:"Add",value:function(t,e,n){this.listeners.push(new ie(this,e,t,n))}},{key:"Once",value:function(t,e){this.Add(t,e,!0)}},{key:"Remove",value:function(t,e){var n=this.GetListenerIndex(t,e);-1!==n&&this.listeners.fickleSplice(n)}},{key:"Dump",value:function(t){var e=this.listeners;if(void 0!==t)for(var n=0;n<e.length;++n)e[n].context===t&&e.splice(n);else e.length=0}},{key:"Dispatch",value:function(t,e){var n=this.listeners.slice();if(0!==n.length){this.stopPropagation=!1,this.target=t,this.data=e;for(var r=0;r<n.length&&(n[r].Execute(this),!0!==this.stopPropagation);++r);this.target=null,this.data=null}}}])&&oe(e.prototype,n),r&&oe(e,r),t}();function se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ae=Math.round,le=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopTime=ae(null==e?0:e),this.time=0,this.isRunning=!1,this.canResume=!1,this.count=0,this.onStop=new ue,this.onFinish=new ue,this.onStart=new ue,this.onReset=new ue,this.onPause=new ue,this.onResume=new ue}var e,n,r;return e=t,(n=[{key:"Reset",value:function(){return this.onReset.Dispatch(this,null),this.count=0,this.time=0,this.isRunning=!1,this.canResume=!1,this}},{key:"Start",value:function(t){return this.stopTime=ae(null==t?this.stopTime:t),this.stopTime>0&&(this.time=0,this.isRunning=!0,this.canResume=!1,this.onStart.Dispatch(this,{stopTime:this.stopTime})),this}},{key:"Stop",value:function(){return!0===this.isRunning&&(this.isRunning=!1,this.onStop.Dispatch(this,null)),this}},{key:"Pause",value:function(){return!0===this.isRunning&&!1===this.canResume&&(this.isRunning=!1,this.canResume=!0,this.onPause.Dispatch(this,null)),this}},{key:"Resume",value:function(){return!0===this.canResume&&(this.isRunning=!0,this.canResume=!1,this.onResume.Dispatch(this,null)),this}},{key:"Process",value:function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onFinish.Dispatch(this,null))}}])&&se(e.prototype,n),r&&se(e,r),t}(),ce=n(8);function he(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fe=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.priority=i,this.breakIfExecuted=!!o,this.data={},this.command=null}var e,n,r;return e=t,(n=[{key:"Execute",value:function(t,e,n){return this.handle(t,e,n),this.breakIfExecuted}}])&&he(e.prototype,n),r&&he(e,r),t}();function de(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ye(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ve=function(){function t(e,n,r,i,o,u){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.data={},this.options=null,this.registry=null,this.optionPrefix=null==u?pe:u,this.dataSeparator="=",this.allOptionIds=null,this.fullInfo=null,this.continueToPrime=!!i,this.filterNull=!!o,this.jsonPrefix="(JSON)"}var e,n,r;return e=t,r=[{key:"OPTION_PREFIX",get:function(){return pe},set:function(t){pe=t}}],(n=[{key:"Execute",value:function(t,e,n){this.HandleData(t,e),!0===this.filterNull&&(t=t.filter(me)),!0===this.HandleOptions(t,e,n)&&this.handle(t,e,n)}},{key:"AddOption",value:function(t,e,n,r,i,o){null!=(o=null==o?this.optionPrefix:o)&&(t=t.replace(/\S+/g,o+"$&")),null==this.options&&(this.options=[]),r=null==r?0:r;var u=this.options,s=de(u,1)[0],a=new fe(t,e,n,r,i);a.command=this;for(var l=0;l<u.length;s=u[++l])if(s.priority<=r)return u.splice(l,0,a),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(a),this.allOptionIds=this.GetAllOptionIds(),this}},{key:"HandleData",value:function(t,e){var n,r=this.dataSeparator,i=be,o=this.jsonPrefix,u=o.length;i.push.apply(i,t);for(var s=de(i,1)[0],a=0;a<i.length;s=i[++a])2===(n=s.split(r)).length&&(t[a]=null,n[0].substring(0,u)===o?e[n[0].substring(u)]=JSON.parse(n[1]):e[n[0]]=n[1]);i.length=0}},{key:"HandleOptions",value:function(t,e,n){if(0===t.length)return this.continueToPrime;var r=this.GetAndRemoveMatchingOptionIds(t);if(null==r)return this.continueToPrime;for(var i=0;i<r.length;++i)if(!0===this.GetOptionById(r[i]).Execute(t,e,n))return!1;return this.continueToPrime}},{key:"GetOptionById",value:function(t){for(var e=this.options,n=de(e,1)[0],r=0;r<e.length;n=e[++r])if(-1!==n.id.indexOf(t))return n;return null}},{key:"GetAllOptionIds",value:function(){for(var t=this.options,e=[],n=0;n<t.length;++n)e.push.apply(e,t[n].id);return e}},{key:"GetAndRemoveMatchingOptionIds",value:function(t){var e,n=this.allOptionIds;if(null==n)return null;for(var r=[],i=0;i<n.length;++i)-1!==(e=t.indexOf(n[i]))&&r.push(t.fickleSplice(e));return r}},{key:"GenerateInfoString",value:function(){for(var t="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",e=this.options,n=de(e,1)[0],r=0;r<e.length;n=e[++r])t+="OPTION: "+n.id.join(", ")+" -> "+n.info+"\n";return t}}])&&ye(e.prototype,n),r&&ye(e,r),t}(),pe="",be=[],me=function(t){return null!=t};function Se(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function we(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ge=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commands=[],this.splitter=" "}var e,n,r;return e=t,(n=[{key:"AddCommand",value:function(t){if(null==t.registry)return this.commands.push(t),t.registry=this,t}},{key:"RemoveCommand",value:function(t){var e=this.commands,n=e.indexOf(t);if(-1!==n)return t.registry=null,e.fickleSplice(n)}},{key:"GetCommandById",value:function(t){for(var e=this.commands,n=Se(e,1)[0],r=0;r<e.length;n=e[++r])if(n)for(var i=0;i<n.id.length;++i)if(n.id[i]===t)return n;return null}},{key:"Parse",value:function(t,e){var n=String(t).split(this.splitter),r=n.shift(),i=this.GetCommandById(r);return i?(i.Execute(n,{},e),null):r}}])&&we(e.prototype,n),r&&we(e,r),t}();function ke(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xe=function(){function t(e,n,r,o,u,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.target=n,this.propertyString=r,this.value=o,this.duration=u,this.easing=i[null==s?Ae:s],this.time=0,this.startValue=0,this.change=0,this.property=null,this.properyObject=null,this.running=!1,this.onStart=new ue,this.onEnd=new ue,this.onStop=new ue,this.onReconfigure=new ue,this.onReset=new ue}var e,n,r;return e=t,(n=[{key:"Start",value:function(){var t=this.propertyString.split(".");this.property=t[t.length-1],this.propertyObject=Object(S.Nested)(this.target,this.propertyString,!0),this.startValue=this.propertyObject[this.property],this.change=this.value-this.startValue,this.time=0,this.running=!0,this.onStart.Dispatch(this,null)}},{key:"Stop",value:function(){this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onStop.Dispatch(this,null)}},{key:"Process",value:function(){!0===this.running&&(this.propertyObject[this.property]=this.easing(this.time,this.startValue,this.change,this.duration),++this.time>=this.duration&&(this.running=!1,this.propertyObject[this.property]=this.value,this.onEnd.Dispatch(this,null)))}},{key:"Reconfigure",value:function(t,e,n,r){null!=t&&(this.propertyString=t),this.value=e,this.duration=n,this.easing=i[null==r?Ae:r],this.onReconfigure.Dispatch(this,null)}},{key:"NewValue",value:function(t){this.value=t,this.Start()}},{key:"Reset",value:function(){if(null==this.propertyObject||null==this.property)return!1;this.propertyObject[this.property]=this.startValue,this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onReset.Dispatch(this,null)}}])&&ke(e.prototype,n),r&&ke(e,r),t}(),Ae="Linear";function Ce(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ie=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.motions=[],this.target=e}var e,n,r;return e=t,(n=[{key:"Create",value:function(t,e,n,r,i){if(null==this.GetMotionById(t)){var o=new xe(t,this.target,e,n,r,i);return this.motions.push(o),o}return null}},{key:"Add",value:function(t){null==this.GetMotionById(t.id)&&this.motions.push(t)}},{key:"Start",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Start(),e}},{key:"StartMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Start(t[e])}},{key:"Stop",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Stop(),e}},{key:"StopMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Stop(t[e])}},{key:"Reset",value:function(t){var e=this.GetMotionByid(t);return null!==e&&e.Reset(),e}},{key:"ResetMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Reset(t[e])}},{key:"Process",value:function(){for(var t=this.motions,e=0;e<t.length;++e)t[e].Process()}},{key:"GetMotionById",value:function(t){for(var e=this.motions,n=0;n<e.length;++n)if(e[n].id===t)return e[n];return null}}])&&Ce(e.prototype,n),r&&Ce(e,r),t}();function Te(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ee=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.root=null,this.propW="width",this.propH="height",this.w=e,this.h=n,this.__dynamic=!e,this.padding=new D.a(0,0)}var e,n,r;return e=t,(n=[{key:"Pack",value:function(t,e){var n=t.length,r=this.propW,i=this.propH,o=this.padding.x,u=this.padding.y,s=Te(t,1)[0],a=s[r]+o,l=s[i]+u,c=null,h=[];this.root=new Dt(0,0,0,0).SetXYWH(0,0,this.w,this.h);for(var f=0;f<n;s=t[++f])if(a=s[r]+o,l=s[i]+u,f===n-1&&(a-=o,l-=u),(c=this.Find(this.root,a,l))&&(h[f]=this.Partition(c,a,l)),null==h[f]&&!0!==e)throw new Error(Pe);return h}},{key:"PackDynamic",value:function(t,e){var n=t.length,r=this.propW,i=this.propH,o=this.padding.x,u=this.padding.y,s=Te(t,1)[0],a=s[r]+o,l=s[i]+u,c=null,h=[];this.root=new Dt(0,0,0,0).SetXYWH(0,0,a,l);for(var f=0;f<n;s=t[++f])if(a=s[r]+o,l=s[i]+u,f===n-1&&(a-=o,l-=u),c=this.Find(this.root,a,l),h[f]=c?this.Partition(c,a,l):this.Extend(a,l),null==h[f]&&!0!==e)throw new Error(Pe);return h}},{key:"Find",value:function(t,e,n){return t.vertical&&t.horizontal?this.Find(t.horizontal,e,n)||this.Find(t.vertical,e,n):e<=t.w&&n<=t.h?t:null}},{key:"Partition",value:function(t,e,n){return t.vertical=new Dt(0,0,0,0).SetXYWH(t.tl.x,t.tl.y+n,t.w,t.h-n),t.horizontal=new Dt(0,0,0,0).SetXYWH(t.tl.x+e,t.tl.y,t.w-e,n),t}},{key:"Extend",value:function(t,e){var n=t<=this.root.w,r=e<=this.root.h,i=n&&this.root.w>=this.root.h+e;return r&&this.root.h>=this.root.w+t?this.ExtendAxis(t,e):i?this.ExtendAxis(t,e,!0):r?this.ExtendAxis(t,e):n?this.ExtendAxis(t,e,!0):null}},{key:"ExtendAxis",value:function(t,e,n){var r=null;n?((r=new Dt(0,0,0,0).SetXYWH(0,0,this.root.w,this.root.h+e)).horizontal=this.root,r.vertical=new Dt(0,0,0,0).SetXYWH(0,this.root.h,this.root.w,e)):((r=new Dt(0,0,0,0).SetXYWH(0,0,this.root.w+t,this.root.h)).vertical=this.root,r.horizontal=new Dt(0,0,0,0).SetXYWH(this.root.w,0,t,this.root.h)),this.root=r;var i=this.Find(this.root,t,e);return i?this.Partition(i,t,e):null}},{key:"UseProp",value:function(t,e){return this.propW=t,this.propH=e,this}},{key:"SetSize",value:function(t,e){return this.w=t,this.h=e,this.dynamic=!0,this}},{key:"SetPadding",value:function(t,e){return this.padding.Set(t,e),this}}])&&Oe(e.prototype,n),r&&Oe(e,r),t}(),Pe="Size error!",_e=n(2),Re=n(5);function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Me=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=0}var e,n,r;return e=t,(n=[{key:"Add",value:function(t){return this.value|=t,this}},{key:"Remove",value:function(t){return this.value=this.value&~t,this}},{key:"Holds",value:function(t){return(this.value&t)===t}},{key:"Toggle",value:function(t){return this.value^=t,this}}])&&Ne(e.prototype,n),r&&Ne(e,r),t}();function Ve(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ge=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.NONE=0,this.next=1}var e,n,r;return e=t,(n=[{key:"Add",value:function(t){return void 0===this[t=t.toUpperCase()]&&(this[t]=this.next,this.next=this.next<<1),this}}])&&Ve(e.prototype,n),r&&Ve(e,r),t}();function De(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Fe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.items=[]}var e,n,r;return e=t,(n=[{key:"Store",value:function(t){var e=!1;return null==t?(console.warn("Item is null."),!1):(null!=t.id&&""!==t.id?e=!this.Contains(t,t.id):t.data&&null!=t.data.id&&""!==t.data.id&&(e=!this.Contains(t,t.data.id)),!1===e?(console.warn("Invalid item. Check the item id. The item has not been stored"),!1):(this.items.push(t),!0))}},{key:"StoreSafe",value:function(t){return null!=this.type&&Object(_e.a)(t,_e.a.IS_INSTANCE_OF,this.type),Object(_e.a)(t,_e.a.IS_SAME_TYPE,Be),t.id?(Object(_e.a)(t.id,_e.a.IS_SAME_TYPE,Le),Object(_e.a)(t.id,_e.a.IS_NOT,"")):(Object(_e.a)(t.data,_e.a.IS_SAME_TYPE,Be),Object(_e.a)(t.data.id,_e.a.IS_SAME_TYPE,Le),Object(_e.a)(t.data.id,_e.a.IS_NOT,"")),this.Store(t)}},{key:"GetById",value:function(t){if(!t)throw new Error("ID Null or Undefined");for(var e=this.items,n=De(e,1)[0],r=0;r<e.length;n=e[++r])if(null!=n&&(n.id===t||null!=n.data&&n.data.id===t))return n;return null}},{key:"Contains",value:function(t,e){if(!e)throw new Error("ID Null or Undefined");for(var n=this.items,r=De(n,1)[0],i=0;i<n.length;r=n[++i])if(null!=r){if(r===t)return!0;if(r.id===e)return!0;if(null!=r.data&&r.data.id===e)return!0}return!1}}])&&je(e.prototype,n),r&&je(e,r),t}(),Be=Object.create(null),Le="string",He=n(10);function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.object=e}var e,n,r;return e=t,r=[{key:"Get",value:function(t){return Ye[t]}},{key:"GetAll",value:function(){return Ye}},{key:"Set",value:function(e,n){return Ye[e]=n,t}}],(n=[{key:"In",value:function(t){return-1===Ye[t].indexOf(this.object)&&Ye[t].push(this.object),this}},{key:"InAll",value:function(){var t=0;for(var e in Ye)-1===(t=Ye[e].indexOf(this.object))&&Ye[e].push(t);return this}},{key:"Out",value:function(t){var e=Ye[t].indexOf(this.object);return-1!==e&&Ye[t].fickleSplice(e),this}},{key:"OutAll",value:function(){var t=0;for(var e in Ye)-1!==(t=Ye[e].indexOf(this.object))&&Ye[e].fickleSplice(t);return this}}])&&Ue(e.prototype,n),r&&Ue(e,r),t}(),Ye={};function We(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qe=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.orders=[],this.classUsed=null,this.amount=1,this.locked=!1}var e,n,r;return e=t,(n=[{key:"Many",value:function(t){return this.amount=t,this}},{key:"Bind",value:function(t,e){return e&&(this.orders.length=0),this.orders.push(t),this}},{key:"Make",value:function(t){var e=this.amount,n=Object(S.CreateIteratorArgs)(arguments,"@","i");if(!0===this.locked)throw new Error('"Make" called twice before end!');this.locked=!0,this.orders.length=0,this.classUsed=t;for(var r=0;r<e;++r)Xe(arguments,n,r),this.orders.push(new(Function.prototype.bind.apply(t,arguments)));return this}},{key:"Call",value:function(t,e,n){var r,i,o,u=this.orders,s=Object(S.IsArray)(e),a="string"==typeof t,l=We(u,1)[0];!0===s&&(o=Object(S.CreateIteratorArgs)(e,"@","i"));for(var c=0;c<u.length;l=u[++c])!0===s&&(i=e.slice(),Object(S.ReplaceArgumentWithObjectValue)(l,i,"$"),Xe(i,o,c)),!1===a&&null!=n?("$"===n[0]&&(n=n.slice(1),console.warn("No need for '$' on property arguments")),Object(S.Nested)(l,n,!1,!0,t.apply(null,i))):!1===a?t.apply(null,i):(r=Object(S.Nested)(l,t,!0),Object(S.Nested)(l,t).apply(r,i));return this}},{key:"Cast",value:function(t,e){for(var n=this.orders,r="string"==typeof e,i=0;i<n.length;++i)!0===r&&"$"===e[0]&&(e=Object(S.Nested)(n[i],e)),Object(S.Nested)(n[i],t,!1,!0,e);return this}},{key:"Done",value:function(){return this.amount=1,this.locked=!1,this.orders[0]}},{key:"Mass",value:function(){return this.amount=1,this.locked=!1,this.orders}},{key:"Ship",value:function(t){this.amount=1,this.locked=!1;var e=!0===t?this.orders.slice():this.orders[0];return this.orders.length=0,e}}])&&ze(e.prototype,n),r&&ze(e,r),t}(),Xe=function(t,e,n){if(null!=e)for(var r=0,i=e[r];r<e.length;i=e[++r])if(-1!==i.iteratorIndex)if(i.mod&&i.val)switch(i.mod){case"+":t[i.iteratorIndex]=n+Number(i.val);break;case"*":t[i.iteratorIndex]=n*Number(i.val);break;case"-":t[i.iteratorIndex]=n-Number(i.val);break;case"/":t[i.iteratorIndex]=n/Number(i.val);break;case"%":t[i.iteratorIndex]=n%Number(i.val);break;default:throw new Error("Bad mod!")}else t[i.iteratorIndex]=n},Je=n(7);function $e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ke=Math.cos,Ze=Math.sin,tn=Math.atan2,en=Math.sqrt,nn=Math.abs,rn=Math.PI,on=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=new Float32Array(9),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}var e,n,r;return e=t,(n=[{key:"Identity",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"Copy",value:function(){var e=new t;return e.Set(this.a,this.b,this.c,this.d,this.e,this.f),e}},{key:"Set",value:function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this}},{key:"SetTransform",value:function(t,e,n,r,i,o,u,s,a){t=null==t?0:t,e=null==e?0:e,n=null==n?1:n,r=null==r?1:r,o=null==o?0:o,u=null==u?0:u,s=null==s?0:s,a=null==a?0:a;var l=Ze(i=null==i?0:i),c=Ke(i),h=-Ze(o),f=Ke(o),d=Ze(u),y=Ke(u),v=c*n,p=l*n,b=-l*r,m=c*r;return this.a=y*v+d*b,this.b=y*p+d*m,this.c=h*v+f*b,this.d=h*p+f*m,this.e=t+s*v+a*b,this.f=e+s*p+a*m,this}},{key:"Multiply",value:function(t,e){return this.a=t.a*e.a+t.b*e.c,this.b=t.a*e.b+t.b*e.d,this.c=t.c*e.a+t.d*e.c,this.d=t.c*e.b+t.d*e.d,this.e=t.e*e.a+t.f*e.c+e.e,this.f=t.e*e.b+t.f*e.d+e.f,this}},{key:"Translate",value:function(t,e){return this.e+=t,this.f+=e,this}},{key:"TranslateTo",value:function(t,e){return this.e=t,this.f=e,this}},{key:"ApplyTranslation",value:function(t,e){return this.e=t*this.a+e*this.c+this.e,this.f=t*this.b+e*this.d+this.f,this}},{key:"ApplyScale",value:function(t,e){return this.a*=t,this.b*=e,this.c*=t,this.d*=e,this}},{key:"Scale",value:function(t,e){return this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e,this}},{key:"Rotate",value:function(t){var e=Ze(t),n=Ke(t),r=this.a,i=this.c,o=this.e;return this.a=r*n-this.b*e,this.b=r*e+this.b*n,this.c=i*n-this.d*e,this.d=i*e+this.d*n,this.e=o*n-this.f*e,this.f=o*e+this.f*n,this}},{key:"Decompose",value:function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-tn(-r,i),u=tn(n,e);return nn(o+u)<un?(t.rotation=u,e<0&&i>=0&&(t.rotation+=rn),t.skew.SetSame(0)):t.skew.Set(o,u),t.scale.Set(en(e*e+n*n),en(r*r+i*i)),t.position.Set(this.e,this.f),this}},{key:"ApplyToContext",value:function(t){return t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f),this}},{key:"AsArray",value:function(t){var e=this.array;return!0===t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.e,e[7]=this.f,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.e,e[3]=this.b,e[4]=this.d,e[5]=this.f,e[6]=0,e[7]=0,e[8]=1),e}}])&&$e(e.prototype,n),r&&$e(e,r),t}(),un=.01;function sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var an=Math.cos,ln=Math.sin,cn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=new D.a(e,n),this.scale=new D.a(1,1),this.skew=new D.a(0,0),this.pivot=new D.a(0,0),this.localTransform=new on,this.globalTransform=new on,this.rotation=0,this.skewCX=1,this.skewSX=0,this.skewCY=0,this.skewSY=1}var e,n,r;return e=t,(n=[{key:"SetMatrix",value:function(t){return t.Decompose(this),this.UpdateSkew(),this}},{key:"UpdateLocal",value:function(){var t=this.localTransform,e=this.position,n=this.scale,r=this.pivot;return t.a=this.skewCX*n.x,t.b=this.skewSX*n.x,t.c=this.skewCY*n.y,t.d=this.skewSY*n.y,t.e=e.x-r.x*t.a+r.y*t.c,t.f=e.y-r.y*t.b+r.y*t.d,this}},{key:"UpdateGlobal",value:function(t){var e=this.localTransform,n=this.globalTransform,r=this.position,i=this.scale,o=this.pivot;return e.a=this.skewCX*i.x,e.b=this.skewSX*i.x,e.c=this.skewCY*i.y,e.d=this.skewSY*i.y,e.e=r.x-o.x*e.a+o.y*e.c,e.f=r.y-o.y*e.b+o.y*e.d,n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.e=e.e*t.a+e.f*t.c+t.e,n.f=e.e*t.b+e.f*t.d+t.f,this}},{key:"UpdateSkew",value:function(){var t=this.skew,e=this.rotation;return this.skewCX=an(e+t.y),this.skewSX=ln(e+t.y),this.skewCY=-ln(e-t.x),this.skewSY=an(e-t.x),this}},{key:"ApplyGlobal",value:function(t){return this.globalTransform.ApplyToContext(t),this}}])&&sn(e.prototype,n),r&&sn(e,r),t}();function hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fn=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.local=null,this.localDirty=!0,this.global=null,this.globalDirty=!0}var e,n,r;return e=t,(n=[{key:"ComputeLocal",value:function(t,e,n,r,i,o){return null!=i&&(t-=n*i.x,e-=r*i.y),null===this.local?(this.local=new Dt(t,e,t+n,e+r),this.local.belongsTo=o):this.local.Set(t,e,t+n,e+r),this.localDirty=!1,this.local}},{key:"ComputeGlobal",value:function(t,e,n,r,i,o){return null!=i&&(t-=n*i.x,e-=r*i.y),null===this.global?(this.global=new Dt(t,e,t+n,e+r),this.global.belongsTo=o):this.global.Set(t,e,t+n,e+r),this.globalDirty=!1,this.global}}])&&hn(e.prototype,n),r&&hn(e,r),t}();function dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yn=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes={},this.objects=[],this.convergence=[],this.objectCap=0,this.levelCap=0,this.level=0,this.aabb=null,this.hasSplit=!1,this.Set(e,n,r,i)}var e,n,r;return e=t,r=[{key:"pool",get:function(){return Sn}},{key:"USE_POOL",get:function(){return wn},set:function(t){wn=!!t}}],(n=[{key:"Set",value:function(t,e,n,r){return this.aabb=t,this.level=e,this.objectCap=n,this.levelCap=r,this}},{key:"FromPool",value:function(e,n,r,i){return!0===wn?Sn.Retrieve(e,n,r,i):new t(e,n,r,i)}},{key:"Store",value:function(){Sn.Store(this)}},{key:"Add",value:function(t){var e="",n=this.objects,r=this.nodes;if(!0!==this.hasSplit||null===(e=this.Marking(t))){if(n.push(t),!1===this.hasSplit&&this.level<this.levelCap&&n.length>this.objectCap){this.Split();for(var i=0;i<n.length;++i)null!==(e=this.Marking(n[i]))&&r[e].Add(n[i]);n.length=0}}else r[e].Add(t)}},{key:"Converge",value:function(t){var e="",n=this.nodes,r=this.convergence;return r.length=0,r.push.apply(r,this.objects),!0===this.hasSplit&&(null!==(e=this.Marking(t))?r.push.apply(r,n[e].Converge(t)):(r.push.apply(r,n[vn].Converge(t)),r.push.apply(r,n[pn].Converge(t)),r.push.apply(r,n[bn].Converge(t)),r.push.apply(r,n[mn].Converge(t)))),r}},{key:"Split",value:function(){var t=this.level+1,e=this.objectCap,n=this.levelCap,r=this.nodes,i=this.aabb;r[vn]=this.FromPool(i.GetQuadrant(vn),t,e,n),r[pn]=this.FromPool(i.GetQuadrant(pn),t,e,n),r[bn]=this.FromPool(i.GetQuadrant(bn),t,e,n),r[mn]=this.FromPool(i.GetQuadrant(mn),t,e,n),this.hasSplit=!0}},{key:"Dump",value:function(){var t=this.nodes;this.objects.length=0,!0===this.hasSplit&&(t[vn].Dump(),t[pn].Dump(),t[bn].Dump(),t[mn].Dump(),!0===wn&&(t[vn].Store(),t[pn].Store(),t[bn].Store(),t[mn].Store())),this.nodes={},this.hasSplit=!1}},{key:"Marking",value:function(t){var e=this.nodes;return!0===e[vn].aabb.IntersectsAABB2D(t)?vn:!0===e[pn].aabb.IntersectsAABB2D(t)?pn:!0===e[bn].aabb.IntersectsAABB2D(t)?bn:!0===e[mn].aabb.IntersectsAABB2D(t)?mn:null}},{key:"ConcatNodes",value:function(t){var e=this.nodes;return null==t&&(t=[]),t.push(this),!1===this.hasSplit?t:(e[vn].ConcatNodes(t),e[pn].ConcatNodes(t),e[bn].ConcatNodes(t),e[mn].ConcatNodes(t),t)}}])&&dn(e.prototype,n),r&&dn(e,r),t}(),vn="TL",pn="TR",bn="BL",mn="BR",Sn=new Re.a,wn=!0;function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Sn.Retrieve=function(t,e,n,r){return this.PreRetrieve(),this.objects.pop().Set(t,e,n,r)},Sn.Flood(function(){return new yn(null,0,0,0)},500);var kn=Math.abs,xn=Math.cos,An=Math.sin,Cn=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transform=new cn(e,n),this.data={},this.w=0,this.h=0,this.bounds=new fn,this.globalPosition=null,this.transformShouldUpdate=!0,this.transformAutomaticUpdate=!0,this.render=!0,this.motionManager=null,this.arrayHandler=null,this.__inside__=null}var e,n,r;return e=t,(n=[{key:"UpdateTransform",value:function(t){null!=t?this.transform.UpdateGlobal(t.transform.globalTransform):this.transform.UpdateGlobal(In.globalTransform)}},{key:"ProcessTransform",value:function(t){!0===this.transformShouldUpdate&&(this.UpdateTransform(t),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1))}},{key:"RequestTransformUpdate",value:function(){return this.transformShouldUpdate=!0,this}},{key:"ComputeGlobalPosition",value:function(){var t=this.transform.globalTransform;return null===this.globalPosition?this.globalPosition=new D.a(t.e,t.f):this.globalPosition.Set(t.e,t.f),this.globalPosition}},{key:"GlobalToLocalPoint",value:function(t,e){return e?(On.Multiply(this.transform.globalTransform,e),On.Decompose(Tn)):this.transform.globalTransform.Decompose(Tn),t.SubtractV(Tn.position).DivideV(Tn.scale).Rotate(-Tn.rotation),t}},{key:"ComputeLocalBounds",value:function(t){return this.bounds.ComputeLocal(this.x,this.y,kn(this.width),kn(this.height),t,this)}},{key:"ComputeGlobalBounds",value:function(t,e){e?(On.Multiply(this.transform.globalTransform,e),On.Decompose(Tn)):this.transform.globalTransform.Decompose(Tn);var n=Tn.rotation,r=Tn.position,i=Tn.scale;return this.bounds.ComputeGlobal(r.x,r.y,kn(this.w*i.x*xn(n))+kn(this.h*i.y*An(n)),kn(this.w*i.x*An(n))+kn(this.h*i.y*xn(n)),t,this)}},{key:"AHCreate",value:function(){return this.arrayHandler=new qe(this),this}},{key:"AHIn",value:function(t){return this.arrayHandler.In(t),this}},{key:"AHOut",value:function(t){return this.arrayHandler.Out(t),this}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t,this.transform.UpdateSkew()}},{key:"scale",get:function(){return this.transform.scale}},{key:"position",get:function(){return this.transform.position}},{key:"pivot",get:function(){return this.transform.pivot}},{key:"x",get:function(){return this.transform.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.transform.position.y},set:function(t){this.transform.position.y=t}},{key:"width",get:function(){return this.w*this.scale.x},set:function(t){this.scale.x=t/this.w}},{key:"height",get:function(){return this.h*this.scale.y},set:function(t){this.scale.y=t/this.h}}])&&gn(e.prototype,n),r&&gn(e,r),t}(),In=new cn,Tn=new cn,On=new on;function En(t){return(En="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Pn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function _n(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Rn(t,e){return!e||"object"!==En(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Nn(t){return(Nn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Mn(t,e){return(Mn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Vn=Math.abs,Gn=Math.min,Dn=Math.max,jn=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Rn(this,Nn(e).call(this,t,n))).parent=null,r.children=[],r}var n,r,i;return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Mn(t,e)}(e,Cn),n=e,(r=[{key:"Render",value:function(){!0===this.render&&(this.ProcessTransform(this.parent),this.children.length>0&&this.RenderChildren())}},{key:"RenderChildren",value:function(){for(var t=this.children,e=0;e<t.length;++e)t[e].Render()}},{key:"AddChild",value:function(t){var e=t.parent;return null!=e&&e.RemoveChild(t),this.children.push(t),t.parent=this,t}},{key:"AddChildren",value:function(){var t=arguments;Object(S.IsArray)(t[0])&&(t=Pn(t,1)[0]);for(var e=0;e<t.length;++e)this.AddChild(t[e]);return this}},{key:"AddSibling",value:function(t){var e=this.parent;return null!=e&&e.AddChild(t),t}},{key:"RemoveChild",value:function(t){var e=this.children,n=e.indexOf(t);if(-1!==n)return t.parent=null,e.fickleSplice(n)}},{key:"RemoveChildren",value:function(){var t,e,n=arguments;Object(S.IsArray)(r[0])&&(r=Pn((function(t){throw new Error('"'+t+'" is read-only')}("children"),r),1)[0]);for(var r=this.children,i=[],o=0;o<n.length;++o)t=n[o],-1!==(e=r.indexOf(t))&&(i.push(r.fickleSplice(e)),t.parent=null);return i}},{key:"Swap",value:function(t){if(null!=this.parent){var e=this.parent.children,n=e.indexOf(this);if(-1!==n){-1===t&&(t=e.length-1);var r=e[t];e[t]=this,e[n]=r}}return this}},{key:"SendToFront",value:function(){return this.Swap(-1),this}},{key:"SendToBack",value:function(){return this.Swap(0),this}},{key:"Dump",value:function(){for(var t=this.children,e=0;e<t.length;++e)t[e].parent=null;return t.length=0,this}},{key:"Destroy",value:function(){return this.Dump(),null!=this.parent&&this.parent.RemoveChild(this),this}},{key:"AttachTo",value:function(t){return t.AddChild(this),this}},{key:"Detach",value:function(){return null!=this.parent?this.parent.RemoveChild(this):null}},{key:"GetChildClosestTo",value:function(t,e){var n,r,i,o=1/0,u=this.children;if(0!==u.length){for(var s=0;s<u.length;++s)n=u[s],void 0!==e&&!1===e(n)||(r=Vn(n.position.GetDistanceSquared(t.x,t.y)))<o&&(o=r,i=n);return i}return null}},{key:"GetChildFurthestFrom",value:function(t,e){var n,r,i,o=0,u=this.children;if(0!==u.length){for(var s=0;s<u.length;++s)n=u[s],e&&e(n)||(r=Vn(n.position.GetDistanceSquared(t.x,t.y)))>o&&(o=r,i=n);return i}return null}},{key:"ClusterBind",value:function(){var t,e=this.children,n=Pn(e,1)[0];Fn.Set(0,0,0,0);for(var r=Fn.tl,i=Fn.br,o=0;o<e.length;n=e[++o])t=n.ComputeLocalBounds(n.anchor),r.x=Gn(r.x,t.tl.x),r.y=Gn(r.y,t.tl.y),i.x=Dn(i.x,t.br.x),i.y=Dn(i.y,t.br.y);return Fn.ComputeWH(),this.w=Fn.w,this.h=Fn.h,this.bounds.ComputeLocal(r.x,r.y,this.width,this.height,null,this),this}}])&&_n(n.prototype,r),i&&_n(n,i),e}();jn.prototype.Mount=jn.prototype.AddChildren,jn.prototype.Unmount=jn.prototype.RemoveChildren;var Fn=new Dt(0,0,0,0);function Bn(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,s=t[Symbol.iterator]();!(r=(u=s.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{r||null==s.return||s.return()}finally{if(i)throw o}}return n}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hn=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.bounds=new Dt(e,n,r,i),this.container=null,this.entities=null,this.conversionMatrix=null,this.onOut=new ue,this.onIn=new ue}var e,n,r;return e=t,(n=[{key:"BindContainer",value:function(t){return this.container=t,this.entities=t.children,this}},{key:"SetConversionMatrix",value:function(t){return this.conversionMatrix=t,this}},{key:"Process",value:function(){for(var t=this.entities,e=Bn(t,1)[0],n=this.bounds,r=this.conversionMatrix,i=0;i<t.length;e=t[++i])!1===n.IntersectsAABB2D(e.ComputeGlobalBounds(e.anchor,r))?!1!==e.__inside__&&(e.__inside__=!1,this.onOut.Dispatch(e)):!0!==e.__inside__&&(e.__inside__=!0,this.onIn.Dispatch(e))}}])&&Ln(e.prototype,n),r&&Ln(e,r),t}();n.d(e,"Math",function(){return w}),n.d(e,"Assert",function(){return _e.a}),n.d(e,"Pool",function(){return Re.a}),n.d(e,"FlagList",function(){return Me}),n.d(e,"FlagEnum",function(){return Ge}),n.d(e,"Cache",function(){return Fe}),n.d(e,"Glob",function(){return He.a}),n.d(e,"ArrayHandler",function(){return qe}),n.d(e,"Maker",function(){return Qe}),n.d(e,"Utility",function(){return S}),n.d(e,"Cipher",function(){return r}),n.d(e,"Time",function(){return y}),n.d(e,"CharacterSets",function(){return Je.a}),n.d(e,"Vector2D",function(){return D.a}),n.d(e,"Matrix2D",function(){return on}),n.d(e,"Transform2D",function(){return cn}),n.d(e,"Bounds2D",function(){return fn}),n.d(e,"QuadtreeNode",function(){return yn}),n.d(e,"Ease",function(){return i}),n.d(e,"Collision",function(){return h}),n.d(e,"Geom",function(){return d}),n.d(e,"Packing",function(){return b}),n.d(e,"CoreEntity2D",function(){return Cn}),n.d(e,"Container2D",function(){return jn}),n.d(e,"Culler2D",function(){return Hn}),n.d(e,"CP",function(){return v}),n.d(e,"Motion",function(){return p}),n.d(e,"Event",function(){return m}),n(12)}])});