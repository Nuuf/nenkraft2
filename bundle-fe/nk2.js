/**
* @package     Nenkraft2
* @author      Gustav 'Nuuf' Åberg <gustavrein@gmail.com>
* @version     0.2.0
* @copyright   (C) 2018 Gustav 'Nuuf' Åberg
* @license     {@link https://github.com/Nuuf/nenkraft2/blob/master/LICENSE}
*/
!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.nk2=e():t.nk2=e()}("undefined"!=typeof self?self:this,function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=12)}([function(t,e,n){"use strict";n.r(e),n.d(e,"RandomInteger",function(){return u}),n.d(e,"RandomFloat",function(){return l}),n.d(e,"IsInteger",function(){return c}),n.d(e,"IsFloat",function(){return h}),n.d(e,"IsArray",function(){return f}),n.d(e,"Sign",function(){return y}),n.d(e,"Clamp",function(){return p}),n.d(e,"InverseClamp",function(){return d}),n.d(e,"FlipACoin",function(){return v}),n.d(e,"GenerateSequence",function(){return b}),n.d(e,"RandomInArray",function(){return m}),n.d(e,"MinMaxOrValue",function(){return g}),n.d(e,"UUID",function(){return w}),n.d(e,"ApplyProperties",function(){return S}),n.d(e,"Nested",function(){return A}),n.d(e,"ArrayGetRandom",function(){return O}),n.d(e,"ArrayShuffle",function(){return T}),n.d(e,"Base16ToBase10",function(){return x}),n.d(e,"Base2ToBase10",function(){return k}),n.d(e,"IsObjectEmpty",function(){return _}),n.d(e,"DeepClone",function(){return C}),n.d(e,"CreateIteratorArgs",function(){return P}),n.d(e,"ReplaceArgumentWithObjectValue",function(){return E}),n.d(e,"PRINT_VERSION",function(){return R});var r=n(1),i=n(3);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(14).version,s=Math.random;function u(t,e){return s()*(e-t+1)+t|0}function l(t,e){return s()*(e-t)+t}function c(t){return Number(t)===t&&t%1==0}function h(t){return Number(t)===t&&t%1!=0}function f(t){return"[object Array]"===Object.prototype.toString.call(t)}function y(t,e){return 0===t?!0===e?1:0:t>0?1:-1}function p(t,e,n){return t<e?e:t>n?n:t}function d(t,e,n){return t<e?n:t>n?e:t}function v(t,e){return 1===u(1,2)?t:e}function b(t,e,n,i){for(var o=[],a=0;a<e;a+=n)o.push(Object(r.PrecisionRound)(a,i));return o}function m(t){return t[u(0,t.length-1)]}function g(t,e){return null!=t.min&&null!=t.max?l(t.min,t.max):null!=t.values&&t.values.length>0?m(t.values):null!=e&&t[e].length>0?m(t[e]):t}function w(t,e,n,r){var o,a,s="",l=t/e,h=i.a[n];t=null==t?32:t,e=null==e?4:e,n=null==n?0:n,r=null==r?"-":r;for(var f=0;f<t;++f)0!==(a=f/l)&&c(a)?s+=r:(o=u(1,h.length-1),s+=h.charAt(o));return s}function S(t,e){var n;if(void 0!==e)for(n in e)void 0!==t[n]&&(t[n]=e[n])}function A(t,e,n,r,i,o){var a;if("string"==typeof e&&(o=null==o?".":o,e=e.split(o)),e.length>1){if(void 0!==t[a=e.shift()])return A(t[a],e,n,r,i,o)}else{if(void 0!==t[a=e.shift()])return!0===r?void(t[a]=i):!0===n?t:t[a];if(!0===r)return void(t[a]=i)}}function O(t,e){for(var n=[],r={},i=t.length,o=0;o<e;++o){var a=s()*i|0;void 0===r[a]?(r[a]=null,n.push(t[a])):o--}return n}function T(t){for(var e,n,r=t.length-1;r-- >=0;)n=s()*r|0,e=t[r],t[r]=t[n],t[n]=e}function x(t){return parseInt(t,16)}function k(t){return parseInt(t,2)}function _(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}function C(t){var e,n=null,r=!1;if("function"==typeof t)throw new TypeError("Object was of type: function. Not acceptable.");if(f(t))n=[],r=!0;else{if("object"!==o(t))return t;n={}}if(r)for(var i=0;i<t.length;++i)n[i]=C(t[i]);else for(e in t)t.hasOwnProperty(e)&&(n[e]=C(t[e]));return n}function P(t,e,n){for(var r,i,o,a,s=[],u=0;u<t.length;++u)"string"==typeof(r=t[u])&&0===r.indexOf(e)&&r.indexOf(n)===e.length&&(-1!==(a=r.indexOf("|"))?(i=r.slice(r.indexOf("(")+1,a),o=r.slice(a+1,r.indexOf(")")),s.push({mod:i,val:o,iteratorIndex:u})):s.push({iteratorIndex:u}));return s}function E(t,e,n){for(var r,i=0;i<e.length;++i)"string"==typeof(r=e[i])&&0===r.indexOf(n)&&(e[i]=A(t,r.slice(n.length)))}function R(t){t?console.log("nenkraft2 server version "+a):console.log("%cnenkraft2 %cversion %c"+a,"color:#f0f7da;background-color:#234d20;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#f0f7da;background-color:#36802d;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#f0f7da;background-color:#77ab59;font-family:Arial;font-size:18px;font-weight:900;padding:5px;")}},function(t,e,n){"use strict";n.r(e),n.d(e,"PII",function(){return l}),n.d(e,"PI5",function(){return c}),n.d(e,"DEGREES_TO_RADIANS",function(){return h}),n.d(e,"RADIANS_TO_DEGRESS",function(){return f}),n.d(e,"RADIAN",function(){return y}),n.d(e,"DegreesToRadians",function(){return p}),n.d(e,"RadiansToDegress",function(){return d}),n.d(e,"PrecisionRound",function(){return v}),n.d(e,"Spread",function(){return b}),n.d(e,"AttractRepel",function(){return m}),n.d(e,"Oscillate",function(){return g}),n.d(e,"LineLineIntersection",function(){return w}),n.d(e,"ClosestPointOnLine",function(){return S}),n.d(e,"LikeASquareGrid",function(){return A}),n.d(e,"TriRectArray",function(){return O}),n.d(e,"GreatestCommonDivisor",function(){return T}),n.d(e,"SimplifyAspectRatio",function(){return x}),n.d(e,"IntegerNotation",function(){return k});var r=Math.PI,i=Math.sin,o=Math.cos,a=Math.pow,s=Math.round,u=Math.ceil,l=2*r,c=.5*r,h=r/180,f=180/r,y=h;function p(t){return t*h}function d(t){return t*f}function v(t,e){if(null==e)return t;var n=a(10,e);return s(n*t)/n}function b(t,e,n,r){return t-n*(e-1)*.5+r*n}function m(t,e,n,r,a){var s=e.SubtractVC(t);if(s.GetMagnitudeSquared()<r*r){var u=s.GetAngle();n.Add(o(u)*a,i(u)*a)}}function g(t,e,n,r){var o=.5*(n-e);return e+o+i(p(t*r))*o}function w(t,e,n,r){var i=e.SubtractVC(t),o=r.SubtractVC(n),a=-o.x*i.y+i.x*o.y,s=t.x-n.x,u=t.y-n.y,l=(-i.y*s+i.x*u)/a,c=(o.x*u-o.y*s)/a;return l>=0&&l<=1&&c>=0&&c<=1&&(i.Set(t.x+c*i.x,t.y+c*i.y),i)}function S(t,e,n){var r=e.SubtractVC(t),i=((n.x-t.x)*r.x+(n.y-t.y)*r.y)/r.GetMagnitudeSquared();return i<0?t:i>1?e:(r.Set(t.x+i*r.x,t.y+i*r.y),r)}function A(t,e,n,r){for(var i=e/n|0,o=0;o<t.length;++o)t[o].Set(o%i*n,(o/i|0)*r)}function O(t,e,n,r,i){return null!=i?(i[0]=t,i[1]=e,i[2]=t+n,i[3]=e,i[4]=t,i[5]=e+r,i[6]=t,i[7]=e+r,i[8]=t+n,i[9]=e,i[10]=t+n,i[11]=e+r,i):[t,e,t+n,e,t,e+r,t,e+r,t+n,e,t+n,e+r]}function T(t,e){return 0===e?t:T(e,t%e)}function x(t,e,n){var r=T(t,e),i=null==n?[]:n;return i[0]=t/r,i[1]=e/r,i}function k(t,e,n){var r=t%e,i=t/e;return u(0===r?i+1:i)+n+(1+r)}},function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n,a){if(void 0==a||"function"!=typeof t.Assert)switch(e){case i.IS:return void function(t,e,n){var r=!1;t!==e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_NOT:return void function(t,e,n){var r=!1;t===e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_SAME_TYPE:return void function(t,e,n){var i=!1;Array.isArray(t)||Array.isArray(e)?!Array.isArray(t)!=!Array.isArray(e)&&(i=!0):null===t||null===e?t!==e&&(i=!0):r(t)!==r(e)?i=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&t!==e&&(i=!0);o(i,t,e,n)}(t,n,e);case i.IS_NOT_SAME_TYPE:return void function(t,e,n){var i=!1;Array.isArray(t)||Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)&&(i=!0):null===t||null===e?e===t&&(i=!0):r(t)===r(e)?i=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&isNaN(t)&&isNaN(e)&&(i=!0);o(i,t,e,n)}(t,n,e);case i.IS_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e||(r=!0);o(r,t,e.name,n)}(t,n,e);case i.IS_NOT_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e&&(r=!0);o(r,t,e.name,n)}(t,n,e);case i.IS_LESS_THAN:return void function(t,e,n){var r=!1;t>=e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_GREATER_THAN:return void function(t,e,n){var r=!1;t<=e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_LESS_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t>e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_GREATER_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t<e&&(r=!0);o(r,t,e,n)}(t,n,e);default:throw new Error("No comparison: "+e)}else t.Assert(e,n)}function o(t,e,n,r){if(t)throw function(t,e,n){switch(n){case i.IS:n=i.IS_NOT;break;case i.IS_NOT:n=i.IS;break;case i.IS_SAME_TYPE:n=i.IS_NOT_SAME_TYPE;break;case i.IS_NOT_SAME_TYPE:n=i.IS_SAME_TYPE;break;case i.IS_INSTANCE_OF:n=i.IS_NOT_INSTANCE_OF;break;case i.IS_NOT_INSTANCE_OF:n=i.IS_INSTANCE_OF;break;case i.IS_LESS_THAN:n=i.IS_GREATER_THAN_OR_EQUAL;break;case i.IS_GREATER_THAN:n=i.IS_LESS_THAN_OR_EQUAL;break;case i.IS_LESS_THAN_OR_EQUAL:n=i.IS_GREATER_THAN;break;case i.IS_GREATER_THAN_OR_EQUAL:n=i.IS_LESS_THAN;break;default:throw new Error("Unexpected error")}console.error(t,n,e)}(e,n,r),new Error("Assertion failed: "+r);i.LOG&&window&&function(t,e,n){console.log("%c<<||-?START?-||>>","background-color: black; color: #0FF; padding: 0px 25px;"),console.log("%cAssertion success: ","background-color: #333; color: #0F0; padding: 0px 25px;"),console.log(t),console.log(n),console.log(e),console.log("%c>>||-?END?-||<<","background-color: black; color: #FF0; padding: 0px 25px;")}(e,n,r)}n.d(e,"a",function(){return i}),i.IS="I",i.IS_NOT="IN",i.IS_SAME_TYPE="IST",i.IS_NOT_SAME_TYPE="INST",i.IS_INSTANCE_OF="IIO",i.IS_NOT_INSTANCE_OF="INIO",i.IS_LESS_THAN="ILT",i.IS_GREATER_THAN="IGT",i.IS_LESS_THAN_OR_EQUAL="ILTOE",i.IS_GREATER_THAN_OR_EQUAL="IGTOE",i.Assign=function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.IS=i.IS,e.IS_NOT=i.IS_NOT,e.IS_SAME_TYPE=i.IS_SAME_TYPE,e.IS_NOT_SAME_TYPE=i.IS_NOT_SAME_TYPE,e.IS_INSTANCE_OF=i.IS_INSTANCE_OF,e.IS_NOT_INSTANCE_OF=i.IS_NOT_INSTANCE_OF,e.IS_LESS_THAN=i.IS_LESS_THAN,e.IS_GREATER_THAN=i.IS_GREATER_THAN,e.IS_LESS_THAN_OR_EQUAL=i.IS_LESS_THAN_OR_EQUAL,e.IS_GREATER_THAN_OR_EQUAL=i.IS_GREATER_THAN_OR_EQUAL},i.LOG=!1}).call(this,n(4))},function(t,e,n){"use strict";e.a=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@&","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz","0123456789abcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZ"]},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return a});var r=n(0);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.functions={},this.values={},this.constants={},this.components={},this.objects={},this.lists={}}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"Define",value:function(t,e,n){this.Mark(t,e),this.Set(t,e,n)}},{key:"Mark",value:function(t,e){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if((t===l||t===c)&&void 0!==this[t][e])throw new Error("Constants cannot be reassigned!");this[t][e]=null}},{key:"Get",value:function(t,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof n)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if(!1===e.AllowGetNullUndefined&&null==this[t][n])throw new Error("Null or undefined!");return this[t][n]}},{key:"Set",value:function(t,e,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");switch(t){case s:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.functions[e])throw new Error("No mark!");this.functions[e]=n;break;case u:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.values[e])throw new Error("No mark!");this.values[e]=n;break;case l:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.constants[e])throw new Error("No mark!");Object.defineProperty(this.constants,e,{writable:!1,configurable:!1,value:n});break;case c:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.components[e])throw new Error("No mark!");Object.defineProperty(this.components,e,{writable:!1,configurable:!1,value:n});break;case h:if("object"!==i(n))throw new Error("Needs to be an object");if(!0===Object(r.IsArray)(n))throw new Error("Arrays are not allowed!");if(null!==this.objects[e])throw new Error("No mark!");this.objects[e]=n;break;case f:if(!1===Object(r.IsArray)(n))throw new Error("Needs to be an array!");if(null!==this.lists[e])throw new Error("No mark!");this.lists[e]=n;break;default:throw new Error("Unrecognized type!")}}}],[{key:"Assign",value:function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.FUNC=s,e.VAL=u,e.CONST=l,e.COMP=c,e.OBJ=h,e.LIST=f}},{key:"Create",value:function(n){var r=r||null;if(null==r){if(null==t)throw new Error("Neither window nor global exists!");if(void 0!==t[n])throw new Error("global."+n+" already exists!");t[n]=new e}else{if(void 0!==r[n])throw new Error("window."+n+" already exists!");r[n]=new e}}},{key:"FUNCTION",get:function(){return s}},{key:"VALUE",get:function(){return u}},{key:"CONSTANT",get:function(){return l}},{key:"COMPONENT",get:function(){return c}},{key:"OBJECT",get:function(){return h}},{key:"LIST",get:function(){return f}},{key:"AllowGetNullUndefined",get:function(){return y},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_AllowGetNullUndefined"),y=!!t}}]),e}(),s="functions",u="values",l="constants",c="components",h="objects",f="lists",y=!1}).call(this,n(4))},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nprecision mediump float;\r\n\r\nattribute vec2 aPosition0;\r\nattribute vec2 aTexCoord0;\r\n\r\nattribute vec2 aPosition1;\r\nattribute vec2 aTexCoord1;\r\n\r\nattribute vec2 aPosition2;\r\nattribute vec2 aTexCoord2;\r\n\r\nattribute vec2 aPosition3;\r\nattribute vec2 aTexCoord3;\r\n\r\nuniform mat3 uProjection;\r\nuniform mat3 uTranslation;\r\nuniform mat3 uTransformation;\r\n\r\nuniform float uUnitId;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  if ( uUnitId == 0.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition0, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord0, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 1.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition1, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord1, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 2.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition2, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord2, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 3.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition3, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord3, 1.0 ) ).xy;\r\n  }\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nuniform sampler2D uImage;\r\nuniform vec4 uTint;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D( uImage, vTexCoord ) * uTint;\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\nattribute vec2 aTexCoord;\r\n\r\nattribute vec3 aProjection1;\r\nattribute vec3 aProjection2;\r\nattribute vec3 aProjection3;\r\n\r\nattribute vec3 aTranslation1;\r\nattribute vec3 aTranslation2;\r\nattribute vec3 aTranslation3;\r\n\r\nattribute vec3 aTransformation1;\r\nattribute vec3 aTransformation2;\r\nattribute vec3 aTransformation3;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  mat3 projection = mat3( aProjection1, aProjection2, aProjection3 );\r\n  mat3 translation = mat3( aTranslation1, aTranslation2, aTranslation3 );\r\n  mat3 transformation = mat3( aTransformation1, aTransformation2, aTransformation3 );\r\n  gl_Position = vec4( ( projection * translation * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vTexCoord = ( transformation * vec3( aTexCoord, 1.0 ) ).xy;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nuniform sampler2D uImage;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D( uImage, vTexCoord );\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec3 aProjection1;\r\nattribute vec3 aProjection2;\r\nattribute vec3 aProjection3;\r\nattribute vec2 aPosition;\r\nattribute vec4 aColor;\r\nattribute float aPointSize;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  mat3 projection = mat3( aProjection1, aProjection2, aProjection3 );\r\n  gl_Position = vec4( ( projection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  gl_PointSize = aPointSize;\r\n  vColor = aColor;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = vColor;\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uFillColor;\r\nuniform lowp vec4 uOutlineColor;\r\nuniform vec2 uSize;\r\nuniform float uOutline;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vBorderX;\r\nvarying float vNegBorderX;\r\nvarying float vBorderY;\r\nvarying float vNegBorderY;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vFillColor = uFillColor;\r\n  vOutlineColor = uOutlineColor;\r\n  vPosition = aPosition;\r\n  vBorderX = -uSize.x * 0.5 + uOutline;\r\n  vNegBorderX = uSize.x * 0.5 - uOutline;\r\n  vBorderY = -uSize.y * 0.5 + uOutline;\r\n  vNegBorderY = uSize.y * 0.5 - uOutline;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vBorderX;\r\nvarying float vNegBorderX;\r\nvarying float vBorderY;\r\nvarying float vNegBorderY;\r\n\r\nvoid main() {\r\n  if (\r\n    vPosition.x > vBorderX &&\r\n    vPosition.x < vNegBorderX && \r\n    vPosition.y > vBorderY && \r\n    vPosition.y < vNegBorderY\r\n  ) {\r\n    gl_FragColor = vFillColor;\r\n  } else {\r\n    gl_FragColor = vOutlineColor;\r\n  }\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uFillColor;\r\nuniform lowp vec4 uOutlineColor;\r\nuniform float uRadius;\r\nuniform float uOutline;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vRadius;\r\nvarying float vOutline;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vFillColor = uFillColor;\r\n  vOutlineColor = uOutlineColor;\r\n  vPosition = aPosition;\r\n  vRadius = uRadius;\r\n  vOutline = uOutline;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vRadius;\r\nvarying float vOutline;\r\n\r\nvoid main() {\r\n  float d = dot( vPosition, vPosition );\r\n  float rs = vRadius * vRadius;\r\n  float ors = vRadius - vOutline;\r\n  ors = ors * ors;\r\n  if ( d < rs && d > ors ) {\r\n    gl_FragColor = vOutlineColor;\r\n  } else if ( d < rs ) {\r\n    gl_FragColor = vFillColor;\r\n  }\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uColor;\r\n\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vColor = uColor;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = vColor;\r\n}\r\n@fragment-end@"},function(t,e,n){t.exports=n(15)},function(t,e){Array.prototype.indexPop=function(t){var e=this.length-1;if(e>1&&t<=e&&t>=0){var n=this[e];return this[e]=this[t],this[t]=n,this.pop()}return this.pop()},Array.prototype.indexShift=function(t){if(this.length>1&&t<=this.length-1&&t>=0){var e=this[0];return this[0]=this[t],this[t]=e,this.shift()}return this.shift()},Array.prototype.popSplice=function(t){var e=this.length-1;if(!(e<1)){for(var n=this[t];t<e;)this[t]=this[t+1],t++;return this.pop(),n}},Array.prototype.shiftSplice=function(t){if(!(this.length<1)){for(var e=this[t];t>0;)this[t]=this[t-1],t--;return this.shift(),e}},Array.prototype.fickleSplice=function(t){return t>.5*this.length|0?this.popSplice(t):this.shiftSplice(t)}},function(t){t.exports={name:"nenkraft2",version:"0.2.0",description:"A small rendering tool",main:"./dist/nenkraft2.js",devDependencies:{"@babel/core":"^7.0.0","@babel/preset-env":"^7.0.0","babel-loader":"^8.0.2","copy-webpack-plugin":"^4.5.2","css-loader":"^1.0.0",eslint:"^5.5.0","file-loader":"^2.0.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0","mini-css-extract-plugin":"^0.4.2","raw-loader":"^0.5.1",rimraf:"^2.6.2",webpack:"^4.17.2","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.8"},dependencies:{},scripts:{"build-prod":"webpack --env production --mode production","build-bundle-fe":"webpack --env bundle-fe --mode production","build-bundle-be":"webpack --env bundle-be --mode production",start:"webpack-dev-server --env development --mode development","clear-bundle-fe":"rimraf bundle-fe","clear-bundle-be":"rimraf bundle-be","clear-dist":"rimraf dist",ce:"rimraf dist bundle-fe bundle-be",be:"npm run ce && npm run build-prod && npm run build-bundle-be && npm run build-bundle-fe","lint-f":"eslint src tests --fix",lint:"eslint src tests"},keywords:["2d","rendering","command","vector","game","graphic","tween","animation","collision","canvas","web","webgl","utilities"],author:"nuuf",license:"MIT"}},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"CCH1",function(){return D}),n.d(r,"CCH1Decipher",function(){return j});var i={};n.r(i),n.d(i,"GenerateSimpleBase64PNG",function(){return F}),n.d(i,"ImageFromDataURL",function(){return U}),n.d(i,"ParsedXMLToJSON",function(){return M}),n.d(i,"XMLToJSON",function(){return V}),n.d(i,"DownloadAsJSON",function(){return X});var o={};n.r(o),n.d(o,"Linear",function(){return z}),n.d(o,"QuadIn",function(){return K}),n.d(o,"QuadOut",function(){return Q}),n.d(o,"QuadInOut",function(){return J}),n.d(o,"SineIn",function(){return Z}),n.d(o,"SineOut",function(){return $}),n.d(o,"SineInOut",function(){return tt}),n.d(o,"CircIn",function(){return et}),n.d(o,"CircOut",function(){return nt}),n.d(o,"CircInOut",function(){return rt});var a={};n.r(a),n.d(a,"Result",function(){return mt}),n.d(a,"CollideRel",function(){return gt});var s={};n.r(s),n.d(s,"Result",function(){return xt}),n.d(s,"CollideRel",function(){return kt}),n.d(s,"ElasticResponse",function(){return _t});var u={};n.r(u),n.d(u,"Result",function(){return Bt}),n.d(u,"CollideRel",function(){return Ft}),n.d(u,"ReflectingResponse",function(){return Ut});var l={};n.r(l),n.d(l,"Result",function(){return Wt}),n.d(l,"CollideRel",function(){return qt}),n.d(l,"AxisSeparates",function(){return zt});var c={};n.r(c),n.d(c,"AABB2DvsAABB2D",function(){return a}),n.d(c,"CirclevsCircle",function(){return s}),n.d(c,"CirclevsLine",function(){return u}),n.d(c,"PolygonvsPolygon",function(){return l});var h={};n.r(h),n.d(h,"Rectangular",function(){return ee}),n.d(h,"Isosceles",function(){return ne}),n.d(h,"Cyclic",function(){return re}),n.d(h,"Equilateral",function(){return ie}),n.d(h,"Star",function(){return oe}),n.d(h,"Butterfly",function(){return ae}),n.d(h,"Supershape",function(){return se});var f={};n.r(f),n.d(f,"AABB2D",function(){return le}),n.d(f,"Circle",function(){return ge}),n.d(f,"Line2D",function(){return Ae}),n.d(f,"Ray2D",function(){return Ae}),n.d(f,"Polygon2D",function(){return xe}),n.d(f,"PolygonConstruction",function(){return h});var y={};n.r(y),n.d(y,"DEFAULT",function(){return _e}),n.d(y,"SOURCE_OVER",function(){return Ce}),n.d(y,"SOURCE_IN",function(){return Pe}),n.d(y,"SOURCE_OUT",function(){return Ee}),n.d(y,"SOURCE_ATOP",function(){return Re}),n.d(y,"DESTINATION_OVER",function(){return Ie}),n.d(y,"DESTINATION_IN",function(){return De}),n.d(y,"DESTINATION_OUT",function(){return je}),n.d(y,"DESTINATION_ATOP",function(){return Le}),n.d(y,"LIGHTER",function(){return Ne}),n.d(y,"COPY",function(){return Ge}),n.d(y,"XOR",function(){return Be}),n.d(y,"MULTIPLY",function(){return Fe}),n.d(y,"OVERLAY",function(){return Ue}),n.d(y,"DARKEN",function(){return Me}),n.d(y,"LIGHTEN",function(){return Ve}),n.d(y,"COLOR_DODGE",function(){return Xe}),n.d(y,"COLOR_BURN",function(){return Ye}),n.d(y,"HARD_LIGHT",function(){return He}),n.d(y,"SOFT_LIGHT",function(){return We}),n.d(y,"DIFFERENCE",function(){return qe}),n.d(y,"EXCLUSION",function(){return ze}),n.d(y,"HUE",function(){return Ke}),n.d(y,"SATURATION",function(){return Qe}),n.d(y,"COLOR",function(){return Je}),n.d(y,"LUMINOSITY",function(){return Ze});var p={};n.r(p),n.d(p,"CAP_ROUND",function(){return $e}),n.d(p,"CAP_BUTT",function(){return tn}),n.d(p,"CAP_SQUARE",function(){return en}),n.d(p,"JOIN_BEVEL",function(){return nn}),n.d(p,"JOIN_ROUND",function(){return rn}),n.d(p,"JOIN_MITER",function(){return on});var d={};n.r(d),n.d(d,"ALIGN_START",function(){return an}),n.d(d,"ALIGN_END",function(){return sn}),n.d(d,"ALIGN_CENTER",function(){return un}),n.d(d,"ALIGN_LEFT",function(){return ln}),n.d(d,"ALIGN_RIGHT",function(){return cn}),n.d(d,"BASELINE_ALPHABETIC",function(){return hn}),n.d(d,"BASELINE_TOP",function(){return fn}),n.d(d,"BASELINE_HANGING",function(){return yn}),n.d(d,"BASELINE_MIDDLE",function(){return pn}),n.d(d,"BASELINE_IDEOGRAPHIC",function(){return dn}),n.d(d,"BASELINE_BOTTOM",function(){return vn});var v={};n.r(v),n.d(v,"Fill",function(){return mn}),n.d(v,"Stroke",function(){return wn}),n.d(v,"Shadow",function(){return An}),n.d(v,"Text",function(){return Tn}),n.d(v,"Pixel",function(){return xn}),n.d(v,"GCO",function(){return y}),n.d(v,"LineConf",function(){return p}),n.d(v,"TextConf",function(){return d}),n.d(v,"All",function(){return kn}),n.d(v,"FFSa",function(){return _n}),n.d(v,"SSa",function(){return Cn}),n.d(v,"FSa",function(){return Pn}),n.d(v,"SaT",function(){return En}),n.d(v,"P",function(){return Rn});var b={};n.r(b),n.d(b,"AABB2D",function(){return Gn}),n.d(b,"Circle",function(){return Xn}),n.d(b,"Line2D",function(){return Kn}),n.d(b,"Ray2D",function(){return Kn}),n.d(b,"Polygon2D",function(){return er});var m={};n.r(m),n.d(m,"Timer",function(){return ur}),n.d(m,"Ticker",function(){return cr});var g={};n.r(g),n.d(g,"TEXTURE_2D",function(){return _r}),n.d(g,"TEXTURE_2D_BATCH",function(){return Cr}),n.d(g,"PIXEL_BATCH",function(){return Pr}),n.d(g,"RECTANGLE",function(){return Er}),n.d(g,"CIRCLE",function(){return Rr}),n.d(g,"LINE2D",function(){return Ir});var w={};n.r(w),n.d(w,"ImageLoader",function(){return Ur}),n.d(w,"SpritesheetLoader",function(){return zr}),n.d(w,"XHRLoader",function(){return Vr});var S={};n.r(S),n.d(S,"GLProgramController",function(){return Qr}),n.d(S,"GLCircleProgramController",function(){return pi}),n.d(S,"GLLine2DProgramController",function(){return Oi}),n.d(S,"GLPixelBatchProgramController",function(){return Ii}),n.d(S,"GLRectangleProgramController",function(){return Mi}),n.d(S,"GLTexture2DBatchProgramController",function(){return Qi}),n.d(S,"GLTexture2DProgramController",function(){return oo});var A={};n.r(A),n.d(A,"ProgramController",function(){return S});var O={};n.r(O),n.d(O,"Option",function(){return so}),n.d(O,"Command",function(){return lo}),n.d(O,"Registry",function(){return yo});var T={};n.r(T),n.d(T,"Motion",function(){return vo}),n.d(T,"Manager",function(){return go});var x={};n.r(x),n.d(x,"Particle2D",function(){return fa}),n.d(x,"Oscillation",function(){return So}),n.d(x,"System",function(){return wa});var k={};n.r(k),n.d(k,"Particle2D",function(){return x});var _={};n.r(_),n.d(_,"BasicTexture2D",function(){return Br}),n.d(_,"Spritesheet",function(){return Wr});var C={};n.r(C),n.d(C,"Animation",function(){return qo}),n.d(C,"Controller",function(){return Ko}),n.d(C,"Frame",function(){return Yr});var P={};n.r(P),n.d(P,"AABB2D",function(){return Sa});var E={};n.r(E),n.d(E,"Draw",function(){return P});var R=n(0),I=n(1);function D(t,e){var n,r,i=t.split(""),o=[];e=void 0===e?1:e;for(var a=0;a<i.length;++a)n=((n=i[a]).charCodeAt(0)+e).toString(2),r=Object(R.RandomInteger)(1,9),o.push(r+"x"+n.replace(/1/g,r));return o.join(" ")}function j(t,e){var n,r=t.split(" "),i=[];e=void 0===e?1:e;for(var o=0;o<r.length;++o)n=(n=r[o]).slice(2-n.length),i.push(String.fromCharCode(parseInt(n.replace(/[2-9]/g,"1"),2)-e));return i.join("")}var L,N,G,B=Math.ceil;function F(t,e,n,r){var i=t();return null==L&&(L=document.createElement("canvas"),N=L.getContext("2d")),L.width=B(i.w),L.height=B(i.h),null!=e&&(L.width=e),null!=n&&(L.height=n),null!=r?(N.fillStyle=r,N.fillRect(0,0,L.width,L.height)):N.clearRect(0,0,L.width,L.height),N.setTransform(1,0,0,1,0,0),i.Draw(N),L.toDataURL("image/png")}function U(t,e,n,r){var i=new Image;return i.width=e,i.height=n,i.onload=r,i.src=t,i}function M(t,e){var n,r,i,o,a,s,u={},l=t.childNodes,c=l.length;if(1===t.nodeType){if((c=(r=t.attributes).length)>0)for(u.attributes={},n=0,i=r.item(n);n<c;i=r.item(++n))u.attributes[i.nodeName]=i.nodeValue}else 3===t.nodeType&&(/^\s*$/g.exec(t.nodeValue)||(u=t.nodeValue,!0===e&&(u=u.replace(/^\s+|\s+&|\n/gim,""))));if(null!=l)for(c=l.length,n=0,o=l.item(n);n<c;o=l.item(++n))void 0===u[o.nodeName]?u[o.nodeName]=M(o,e):(void 0===u[o.nodeName].push&&(s=u[o.nodeName],u[o.nodeName]=[],Object(R.IsObjectEmpty)(s)||u[o.nodeName].push(s)),a=M(o,e),Object(R.IsObjectEmpty)(a)||u[o.nodeName].push(a));return u["#text"]&&0===u["#text"].length&&delete u["#text"],u}function V(t,e){return null==G&&(G=new DOMParser),M(G.parseFromString(t,"text/xml"),e)}function X(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",e+".json"),r.click()}var Y=Math.sin,H=Math.cos,W=Math.sqrt,q=Math.PI,z=function(t,e,n,r){return n*t/r+e},K=function(t,e,n,r){return n*(t/=r)*t+e},Q=function(t,e,n,r){return-n*(t/=r)*(t-2)+e},J=function(t,e,n,r){return(t/=.5*r)<1?.5*n*t*t+e:.5*-n*(--t*(t-2)-1)+e},Z=function(t,e,n,r){return-n*H(t/r*(.5*q))+n+e},$=function(t,e,n,r){return n*Y(t/r*(.5*q))+e},tt=function(t,e,n,r){return.5*-n*(H(q*t/r)-1)+e},et=function(t,e,n,r){return-n*(W(1-(t/=r)*t)-1)+e},nt=function(t,e,n,r){return t/=r,n*W(1- --t*t)+e},rt=function(t,e,n,r){return(t/=.5*r)<1?.5*-n*(W(1-t*t)-1)+e:.5*n*(W(1-(t-=2)*t)+1)+e};function it(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ot=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.class=e,this.objects=[],this.floodFunction=null,this.floodAmount=null,this.context=null}return function(t,e,n){e&&it(t.prototype,e),n&&it(t,n)}(t,[{key:"Store",value:function(t){this.objects.push(t)}},{key:"PreRetrieve",value:function(){0===this.objects.length&&this.Flood()}},{key:"Retrieve",value:function(){return this.PreRetrieve(),this.objects.pop()}},{key:"Flood",value:function(t,e,n){t&&(this.floodFunction=t),e&&(this.floodAmount=e),n&&(this.context=n);for(var r=0;r<this.floodAmount;++r)if(null!=this.class){var i=new this.class;this.Store(i),this.floodFunction.call(this.context,i)}else this.Store(this.floodFunction.call(this.context))}},{key:"Flush",value:function(){this.objects.length=0}},{key:"Clean",value:function(){var t=this.objects.length;this.Flush(),this.Flood(void 0,t)}}]),t}();function at(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var st=Math.ceil,ut=Math.round,lt=Math.abs,ct=Math.sqrt,ht=Math.atan2,ft=Math.cos,yt=Math.sin,pt=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return function(t,e,n){e&&at(t.prototype,e),n&&at(t,n)}(t,[{key:"Copy",value:function(){return!0===vt?dt.Retrieve(this.x,this.y):new t(this.x,this.y)}},{key:"FromPool",value:function(e,n){return!0===vt?dt.Retrieve(e,n):new t(e,n)}},{key:"AbsoluteCopy",value:function(){var t=this.Copy();return t.Positive(),t}},{key:"SetV",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"Set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"SetSame",value:function(t){return this.x=t,this.y=t,this}},{key:"Is0",value:function(){return 0===this.x&&0===this.y}},{key:"AddVC",value:function(t){return this.Copy().AddV(t)}},{key:"AddV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"Add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"SubtractVC",value:function(t){return this.Copy().SubtractV(t)}},{key:"SubtractV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"Subtract",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"MultiplyVC",value:function(t){return this.Copy().MultiplyV(t)}},{key:"MultiplyV",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"Multiply",value:function(t,e){return this.x*=t,this.y*=e,this}},{key:"DivideVC",value:function(t){return this.Copy().DivideV(t)}},{key:"DivideV",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"Divide",value:function(t,e){return this.x/=t,this.y/=e,this}},{key:"Normalize",value:function(){var t=this.GetMagnitude();return this.Divide(t,t)}},{key:"Positive",value:function(){return this.x=lt(this.x),this.y=lt(this.y),this}},{key:"Negative",value:function(){return this.x=-lt(this.x),this.y=-lt(this.y),this}},{key:"Invert",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"Rotate",value:function(t){var e=yt(t),n=ft(t),r=this.x,i=this.y;return this.x=r*n-i*e,this.y=r*e+i*n,this}},{key:"RotateAroundV",value:function(t,e){return this.SubtractV(t).Rotate(e).AddV(t)}},{key:"RotateAround",value:function(t,e,n){return this.SubtractV(t,e).Rotate(n).AddV(t,e)}},{key:"RotateAbsolute",value:function(t){return this.Rotate(t-this.GetAngle())}},{key:"RotateAbsoluteAroundV",value:function(t,e){return this.SubtractV(t).RotateAbsolute(e).AddV(t)}},{key:"RotateAbsoluteAround",value:function(t,e,n){return this.SubtractV(t,e).RotateAbsolute(n).AddV(t,e)}},{key:"PushFromV",value:function(t,e){var n=this.Copy();return n.SubtractV(t).Normalize().Multiply(e,e),this.AddV(n)}},{key:"PushFrom",value:function(t,e,n){var r=this.Copy();return r.SubtractV(t,e).Normalize().Multiply(n,n),this.AddV(r)}},{key:"GetWeightedAverageV",value:function(t,e){return this.FromPool(this.x*(1-e)+t.x*e,this.y*(1-e)+t.y*e)}},{key:"GetWeightedAverage",value:function(t,e,n){return this.FromPool(this.x*(1-n)+t*n,this.y*(1-n)+e*n)}},{key:"GetAngle",value:function(){return ht(this.y,this.x)}},{key:"GetAngleBetweenV",value:function(t){return ht(this.y-t.y,this.x-t.x)}},{key:"GetAngleBetween",value:function(t,e){return ht(this.y-e,this.x-t)}},{key:"GetDotV",value:function(t){return this.x*t.x+this.y*t.y}},{key:"GetDot",value:function(t,e){return this.x*t+this.y*e}},{key:"GetCrossV",value:function(t){return this.x*t.y+this.y*t.x}},{key:"GetCross",value:function(t,e){return this.x*e+this.y*t}},{key:"GetMagnitudeSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"GetMagnitude",value:function(){return ct(this.x*this.x+this.y*this.y)}},{key:"GetDistanceSquaredV",value:function(t){return this.Copy().SubtractV(t).GetMagnitudeSquared()}},{key:"GetDistanceSquared",value:function(t,e){return this.Copy().Subtract(t,e).GetMagnitudeSquared()}},{key:"GetDistanceV",value:function(t){return this.Copy().SubtractV(t).GetMagnitude()}},{key:"GetDistance",value:function(t,e){return this.Copy().Subtract(t,e).GetMagnitude()}},{key:"GetPerpendicularCCWV",value:function(t){return this.FromPool(-(t.y-this.y),t.x-this.x)}},{key:"GetPerpendicularCCW",value:function(t,e){return this.FromPool(-(e-this.y),t-this.x)}},{key:"GetPerpendicularCWV",value:function(t){return this.FromPool(t.y-this.y,-(t.x-this.x))}},{key:"GetPerpendicularCW",value:function(t,e){return this.FromPool(e-this.y,-(t-this.x))}},{key:"GetNormalAV",value:function(t){return this.GetPerpendicularCCWV(t).Normalize()}},{key:"GetNormalA",value:function(t,e){return this.GetPerpendicularCCW(t,e).Normalize()}},{key:"GetNormalBV",value:function(t){return this.GetPerpendicularCWV(t).Normalize()}},{key:"GetNormalB",value:function(t,e){return this.GetPerpendicularCW(t,e).Normalize()}},{key:"GetMidpointV",value:function(t){return this.Copy().AddV(t).Divide(2,2)}},{key:"GetMidpoint",value:function(t,e){return this.Copy().Add(t,e).Multiply(.5,.5)}},{key:"IsEqualToV",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"IsEqualTo",value:function(t,e){return this.x===t&&this.y===e}},{key:"GetProjectionOntoV",value:function(t){var e=this.GetDotV(t);if(0===e)return this.FromPool(0,0);var n=t.GetMagnitude(),r=e/(n*n),i=t.Copy();return i.Multiply(r,r),i}},{key:"GetProjectionOnto",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);if(0===r)return this.FromPool(0,0);var i=n.GetMagnitude(),o=r/(i*i);return n.Multiply(o,o),n}},{key:"GetReflectionV",value:function(t){var e=t.Copy(),n=this.GetDotV(e);return e.Multiply(2,2).Multiply(n,n),this.SubtractVC(e)}},{key:"GetReflection",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);return n.Multiply(2,2).Multiply(r,r),this.SubtractVC(n)}},{key:"Store",value:function(){return dt.Store(this),this}},{key:"AddTo",value:function(t){for(var e=0;e<t.length;++e)t[e].AddV(this);return this}},{key:"Floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"Ceil",value:function(){return this.x=st(this.x),this.y=st(this.y),this}},{key:"Round",value:function(){return this.x=ut(this.x),this.y=ut(this.y),this}},{key:"GetMinMaxDot",value:function(t){for(var e=1/0,n=-e,r=0,i=this.Copy(),o=0;o<t.length;++o)(r=t[o].GetDotV(this))>n&&(n=r),r<e&&(e=r);return i.Set(e,n),i}}],[{key:"SortMinMag",value:function(t,e){return t.GetMagnitudeSquared()-e.GetMagnitudeSquared()}},{key:"pool",get:function(){return dt}},{key:"USE_POOL",get:function(){return vt},set:function(t){vt=t}}]),t}(),dt=new ot(pt),vt=!0;function bt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}dt.Retrieve=function(t,e){this.PreRetrieve();var n=this.objects.pop();return n.Set(t,e),n},dt.Flood(function(t){t.Set(0,0)},1e3);var mt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new pt(0,0),this.occured=!1}return function(t,e,n){e&&bt(t.prototype,e),n&&bt(t,n)}(t,[{key:"Reset",value:function(){this.mtv.SetSame(0),this.occured=!1}}]),t}(),gt=function(t,e,n){var r=t.shape,i=r.w,o=r.h,a=t.anchor,s=e.shape,u=s.w,l=s.h,c=e.anchor;wt.SetV(r.tl).SubtractV(t.relative),St.SetV(s.tl).SubtractV(e.relative);var h=St.x+i,f=wt.x+u,y=St.y+o,p=wt.y+l;return void 0!=a&&(wt.x+=a.x*i,wt.y+=a.y*o),void 0!=c&&(St.x+=c.x*u,St.y+=c.y*l),wt.x<h&&St.x<f&&wt.y<y&&St.y<p&&(void 0!=n&&(At[0].Set(wt.x-h,0),At[1].Set(f-St.x,0),At[2].Set(0,wt.y-y),At[3].Set(0,p-St.y),At.sort(pt.SortMinMag),n.mtv.SetV(At[0]),n.occured=!0),!0)},wt=new pt(0,0),St=new pt(0,0),At=[new pt(0,0),new pt(0,0),new pt(0,0),new pt(0,0)];function Ot(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tt=Math.sqrt,xt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new pt(0,0),this.poc={a:new pt(0,0),b:new pt(0,0),c:new pt(0,0)},this.mtd=0,this.delta=new pt(0,0),this.occured=!1}return function(t,e,n){e&&Ot(t.prototype,e),n&&Ot(t,n)}(t,[{key:"Reset",value:function(){this.poc.a.SetSame(0),this.poc.b.SetSame(0),this.poc.c.SetSame(0),this.mtv.SetSame(0),this.mtd=0,this.delta.SetSame(0),this.occured=!1}}]),t}(),kt=function(t,e,n){var r=t.shape,i=e.shape,o=r.radius,a=i.radius,s=o+a,u=t.anchor,l=e.anchor;Et.SetV(t.relative),Rt.SetV(e.relative),Lt.SetV(Rt).SubtractV(Et);var c=Lt.GetMagnitudeSquared();if(void 0!=u&&(Et.x+=u.x*r.diameter,Et.y+=u.y*r.diameter),void 0!=l&&(Rt.x+=l.x*i.diameter,Rt.y+=l.y*i.diameter),s*s>c){if(void 0!=n){var h=Tt(c),f=(r.radiusSquared-i.radiusSquared+c)/(h+h),y=Tt(r.radiusSquared-f*f)/h,p=-Lt.y*y,d=Lt.x*y;It.Set(Et.x+Lt.x*f/h,Et.y+Lt.y*f/h),Dt.Set(It.x+p,It.y+d),jt.Set(It.x-p,It.y-d),Et.SubtractV(Rt).Divide(s,s);var v=h-o-a;n.poc.a.SetV(It),n.poc.b.SetV(Dt),n.poc.c.SetV(jt),n.mtv.SetV(Et),n.mtd=v,n.delta.SetV(Lt),n.occured=!0}return!0}return!1},_t=function(t,e,n){Ct.SetV(n.delta).Normalize(),Pt.SetV(n.mtv);var r=t.mass,i=e.mass,o=t.velocity,a=e.velocity,s=2*(o.GetDotV(Ct)-a.GetDotV(Ct))/(r+i);o.Set(o.x-s*i*Ct.x,o.y-s*i*Ct.y),a.Set(a.x+s*r*Ct.x,a.y+s*r*Ct.y),Pt.Multiply(n.mtd,n.mtd).Divide(2,2),t.relative.SubtractV(Pt),e.relative.AddV(Pt)},Ct=new pt(0,0),Pt=new pt(0,0),Et=new pt(0,0),Rt=new pt(0,0),It=new pt(0,0),Dt=new pt(0,0),jt=new pt(0,0),Lt=new pt(0,0);function Nt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Gt=Math.sqrt,Bt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new pt(0,0),this.cp=new pt(0,0),this.sOrE=0,this.occured=!1}return function(t,e,n){e&&Nt(t.prototype,e),n&&Nt(t,n)}(t,[{key:"Reset",value:function(){this.mtv.SetSame(0),this.cp.SetSame(0),this.sOrE=0,this.occured=!1}}]),t}(),Ft=function(t,e,n){var r=e.shape,i=t.shape,o=e.relative,a=t.relative;Mt.Set(r.s.x+o.x,r.s.y+o.y),Vt.Set(r.e.x+o.x,r.e.y+o.y);var s=Object(I.ClosestPointOnLine)(Mt,Vt,a);Xt.Set(a.x-s.x,a.y-s.y);var u=Xt.GetMagnitudeSquared();if(u<i.radiusSquared){if(n){var l=i.radius-Gt(u);Xt.Normalize().Multiply(l,l),n.mtv.SetV(Xt),n.cp.SetV(s),n.occured=!0,s===Mt?n.sOrE=1:s===Vt&&(n.sOrE=-1)}return!0}return!1},Ut=function(t,e,n){var r,i,o=e.shape,a=t.velocity,s=t.relative,u=n.cp;0!==n.sOrE?(r=u.SubtractVC(s)).Normalize():r=o.GetNormalA(),i=a.GetReflectionV(r),a.SetV(i),s.AddV(n.mtv)},Mt=new pt(0,0),Vt=new pt(0,0),Xt=new pt(0,0);function Yt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ht=Math.abs,Wt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new pt(0,0),this.olAxis=new pt(0,0),this.mtd=1/0,this.occured=!1}return function(t,e,n){e&&Yt(t.prototype,e),n&&Yt(t,n)}(t,[{key:"Reset",value:function(){this.occured=!1,this.mtv.Set(0,0),this.mtd=1/0,this.olAxis.Set(0,0)}}]),t}(),qt=function(t,e,n){for(var r=0,i=t.shape,o=e.shape,a=i.normals,s=o.normals,u=a.length,l=s.length;r<u;++r)if(!0===zt(t,e,a[r],n))return!1;for(r=0;r<l;++r)if(!0===zt(t,e,s[r],n))return!1;return void 0!=n&&(n.mtv.SetV(n.olAxis),n.mtv.Multiply(n.mtd,n.mtd),n.occured=!0),!0},zt=function(t,e,n,r){var i=n.GetMinMaxDot(t.shape.vertices),o=n.GetMinMaxDot(e.shape.vertices),a=e.relative.SubtractVC(t.relative).GetDotV(n);if(o.Add(a,a),i.x>o.y||o.x>i.y)return!0;if(void 0!=r){var s=0,u=0,l=0,c=i.x,h=i.y,f=o.x,y=o.y;s=c<f?h<y?h-f:(u=h-f)<(l=y-c)?u:-l:h>y?c-y:(u=h-f)<(l=y-c)?u:-l;var p=Ht(s);p<r.mtd&&(r.mtd=p,r.olAxis.SetV(n),s<0&&r.olAxis.Invert())}return!1},Kt=Math.PI,Qt=Math.cos,Jt=Math.sin,Zt=Math.abs,$t=Math.pow,te=Math.exp,ee=function(t,e,n,r,i){var o=new pt(e,n),a=new pt(e+r,n),s=new pt(e+r,n+i),u=new pt(e,n+i);return t.Recreate([o,a,s,u]),t.ComputeBounds(),t.GetNormalsA(),t},ne=function(t,e,n,r,i){var o=new pt(e,n),a=new pt(e+.5*r,n+i),s=new pt(e-.5*r,n+i);return t.Recreate([o,a,s]),t.ComputeBounds(),t.GetNormalsA(),t},re=function(t,e,n,r,i){var o,a,s,u=0,l=i,c=2*Kt/l;for(t.Recreate([]);u<l;++u)o=Qt(s=c*u)*r,a=Jt(s)*r,t.AddVertex(new pt(e+o,n+a));return t.ComputeBounds(),t.GetNormalsA(),t},ie=function(t,e,n,r){var i,o,a=2.0943951023931953;return t.Recreate([]),i=Qt(0)*r,o=Jt(0)*r,t.AddVertex(new pt(e+i,n+o)),i=Qt(a)*r,o=Jt(a)*r,t.AddVertex(new pt(e+i,n+o)),i=Qt(2*a)*r,o=Jt(2*a)*r,t.AddVertex(new pt(e+i,n+o)),t.Rotate(-90*new Math.RADIAN),t.ComputeBounds(),t.GetNormalsA(),t},oe=function(t,e,n,r,i,o){var a,s,u,l,c=0,h=2*o,f=2*Math.PI/h;for(t.Recreate([]);c<h;++c)l=0==(1&c)?r:i,u=f*c,a=Math.cos(u)*l,s=Math.sin(u)*l,t.AddVertex(new pt(e+a,n+s));return t.ComputeBounds(),t.GetNormalsA(),t},ae=function t(e,n,r,i,o){var a,s,u,l=0,c=t.C;for(e.Recreate([]);l<i;++l)u=l*c._1*Kt/i,a=Qt(u)*(te(Qt(u))-c._2*Qt(c._3*u)-$t(Jt(u/c._4),c._5))*o,s=Jt(u)*(te(Qt(u))-c._2*Qt(c._3*u)-$t(Jt(u/c._4),c._5))*o,e.AddVertex(new pt(n+a,r+s));return e.ComputeBounds(),e.GetNormalsA(),e};ae.C={_1:24,_2:2,_3:4,_4:12,_5:5};var se=function t(e,n,r,i,o,a,s,u,l){var c,h,f,y,p,d,v=0,b=o,m=t.C;for(s=void 0===s?1:s,u=void 0===u?1:u,l=void 0===l?1:l,e.Recreate([]);v<b;++v)p=Qt(a*(f=v*Kt*2/o)/4)/m._A,p=Zt(p),p=$t(p,u),d=Jt(a*f/4)/m._B,d=Zt(d),d=$t(d,l),y=$t(p+d,1/s),0===Zt(y)?(c=0,h=0):(y=1/y,c=Qt(f)*y*i,h=Jt(f)*y*i),e.AddVertex(new pt(n+c,r+h));return e.ComputeBounds(),e.GetNormalsA(),e};function ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}se.C={_A:1,_B:1};var le=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tl=new pt(e,n),this.br=new pt(r,i),this.w=0,this.h=0,this.hw=0,this.hh=0,this.area=0,this.belongsTo=null,this.TYPE=pe,this.ComputeWH()}return function(t,e,n){e&&ue(t.prototype,e),n&&ue(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.tl.Set(t,e),this.br.Set(n,r),this.ComputeWH()}},{key:"SetC",value:function(t){this.Set(t.tl.x,t.tl.y,t.br.x,t.br.y)}},{key:"Scale",value:function(t,e){this.tl.Multiply(t,e),this.br.Multiply(t,e),this.ComputeWH()}},{key:"ScaleV",value:function(t){this.tl.MultiplyV(t),this.br.MultiplyV(t),this.ComputeWH()}},{key:"ComputeWH",value:function(){this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y,this.hw=.5*this.w,this.hh=.5*this.h,this.area=this.w*this.h}},{key:"IntersectsPoint",value:function(t){return!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)}},{key:"ContainsPoint",value:function(t){return t.x>this.tl.x&&t.x<this.br.x&&t.y>this.tl.y&&t.y<this.br.y}},{key:"IntersectsAABB2D",value:function(t){var e=this.tl,n=this.br,r=t.tl,i=t.br;return!(r.x>=n.x||r.y>=n.y||i.x<=e.x||i.y<=e.y)}},{key:"ContainsAABB2D",value:function(t){if(t.area>this.area)return!1;var e=this.tl,n=this.br,r=t.tl,i=t.br;return r.x>=e.x&&r.y>=e.y&&i.x<=n.x&&i.y<=n.y}},{key:"GetQuadrant",value:function(e){var n=this.tl,r=this.br;switch(e){case ce:return new t(n.x,n.y,n.x+this.hw,n.y+this.hh);case he:return new t(n.x+this.hw,n.y,r.x,n.y+this.hh);case fe:return new t(n.x,n.y+this.hh,n.x+this.hw,r.y);case ye:return new t(n.x+this.hw,n.y+this.hh,r.x,r.y);default:return null}}}],[{key:"TYPE",get:function(){return pe}}]),t}(),ce="TL",he="TR",fe="BL",ye="BR",pe=1;function de(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ve=Math.PI,be=Math.sin,me=Math.cos,ge=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=new pt(e,n),this.diameter=0,this.w=0,this.h=0,this.radiusSquared=0,this.radiusUnsquared=0,this.area=0,this.radius=r,this.belongsTo=null,this.TYPE=we}return function(t,e,n){e&&de(t.prototype,e),n&&de(t,n)}(t,[{key:"Set",value:function(t,e,n){this.center.Set(t,e),this.radius=n}},{key:"SetC",value:function(t){this.center.SetV(t),this.radius=t.radius}},{key:"Scale",value:function(t){this.radius*=t}},{key:"IntersectsCircle",value:function(t){var e=this.radius+t.radius;return e*e>=this.center.GetDistanceSquaredV(t.center)}},{key:"IntersectsPoint",value:function(t){return this.radiusSquared>=this.center.GetDistanceSquaredV(t)}},{key:"GenerateRandomPoints",value:function(t,e,n){var r=R.RandomFloat,i=new pt(this.x-this.radius,this.y-this.radius),o=new pt(this.x+this.radius,this.y+this.radius),a=[];n=!!n,!0===e&&(r=R.RandomInteger);for(var s=0;s<t;++s){for(var u=Nenkraft.Vector2D(r(i.x,o.x),r(i.y,o.y));this.IntersectsPoint(u)===n;)u.Set(r(i.x,o.x),r(i.y,o.y));a.push(u)}return a}},{key:"GeneratePerimeterPoints",value:function(t,e){var n=[];t*=e;for(var r=0;r<t;r+=e)n.push(Nenkraft.Vector2D(this.x+me(Object(I.DegreesToRadians)(r))*this.radius,this.y+be(Object(I.DegreesToRadians)(r))*this.radius));return n}},{key:"x",get:function(){return this.center.x},set:function(t){this.center.x=t}},{key:"y",get:function(){return this.center.y},set:function(t){this.center.y=t}},{key:"radius",get:function(){return this.radiusUnsquared},set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=this.w=this.h=2*t,this.area=ve*t*t}}],[{key:"TYPE",get:function(){return we}}]),t}(),we=2;function Se(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ae=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.s=new pt(e,n),this.e=new pt(r,i),this.epsilon=1e3,this.belongsTo=null,this.TYPE=Oe}return function(t,e,n){e&&Se(t.prototype,e),n&&Se(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.s.Set(t,e),this.e.Set(n,r)}},{key:"SetC",value:function(t){this.s.SetV(t.s),this.e.SetV(t.e)}},{key:"Stretch",value:function(t){var e=.5*t;this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e)}},{key:"Rotate",value:function(t,e,n){e=void 0==e?.5:e;var r=this.s.Copy();r.AddV(this.e),r.Multiply(e,void 0==n?e:n),this.s.RotateAroundV(r,t),this.e.RotateAroundV(r,t)}},{key:"Cut",value:function(t,e){null==e&&(e=[]);for(var n=0;n<t.length;++n)e.push(this.s.GetWeightedAverageV(this.e,t[n]));return e}},{key:"GetLength",value:function(){return this.s.GetDistanceV(this.e)}},{key:"GetLengthSquared",value:function(){return this.s.GetDistanceSquaredV(this.e)}},{key:"IntersectsPoint",value:function(t){var e=this.s,n=this.e,r=(t.y-e.y)*(n.x-e.x)-(t.x-e.x)*(n.y-e.y);if(Math.abs(r)>this.epsilon)return!1;var i=(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y);return!(i<0)&&!(i>this.GetLengthSquared())}},{key:"IntersectsLine",value:function(t){return Object(I.LineLineIntersection)(this.s,this.e,t.s,t.e)}},{key:"GetClosestPointTo",value:function(t){return Object(I.ClosestPointOnLine)(this.s,this.e,t)}},{key:"GetNormalA",value:function(){return this.s.GetNormalAV(this.e)}},{key:"GetNormalB",value:function(){return this.s.GetNormalBV(this.e)}}]),t}(),Oe=0;function Te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xe=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=[],this.normals=[],this.perimeterMidPoints=[],this.centroid=new pt(0,0),this.aabb=null,this.dirtyBounds=!0,this.belongsTo=null,this.TYPE=ke,null!=e&&this.AddVertices(e)}return function(t,e,n){e&&Te(t.prototype,e),n&&Te(t,n)}(t,[{key:"Copy",value:function(){for(var e=new t,n=this.vertices,r=0;r<n.length;++r)e.AddVertex(n[r].Copy());return e}},{key:"ExtractSegments",value:function(t){var e=this.vertices,n=e.length-1;null==t&&(t=[]);for(var r=0;r<n;++r)t.push(new Ae(e[r],e[r+1]));return t.push(new Ae(e[n],e[0])),t}},{key:"GenerateRandomPoints",value:function(t,e,n){this.ComputeBounds(),n=!!n;var r=R.RandomFloat,i=this.aabb.tl,o=this.aabb.br,a=[];!0===e&&(r=R.RandomInteger);for(var s=0;s<t;++s){for(var u=new pt(r(i.x,o.x),r(i.y,o.y));this.IntersectsPoint(u)===n;)u.Set(r(i.x,o.x),r(i.y,o.y));a.push(u)}return a}},{key:"AddVertex",value:function(t){this.vertices.push(t)}},{key:"AddVertices",value:function(t){if(t[0]instanceof pt)this.vertices.push.apply(this.vertices,t);else if("number"==typeof t[0])for(var e=0;e<t.length;e+=2)this.AddVertex(new pt(t[e],t[e+1]));else if(null!=t[0].x)for(e=0;e<t.length;++e)this.AddVertex(new pt(t[e].x,t[e].y))}},{key:"Recreate",value:function(t){this.vertices.length=0,void 0!=t&&this.vertices.push.apply(this.vertices,t)}},{key:"ComputeBounds",value:function(){var t,e=1/0,n=-e,r=e,i=-e,o=this.vertices;null===this.aabb&&(this.aabb=new le(0,0,0,0));for(var a=0;a<o.length;++a)(t=o[a]).x<e&&(e=t.x),t.x>n&&(n=t.x),t.y<r&&(r=t.y),t.y>i&&(i=t.y);this.aabb.Set(e,r,n,i),this.dirtyBounds=!1}},{key:"Rotate",value:function(t,e,n,r){var i=0,o=this.aabb,a=o.tl.Copy(),s=this.vertices,u=s.length;for(!0===this.dirtyBounds&&!0===r?this.ComputeBounds():null===this.aabb&&this.ComputeBounds(),e=void 0===e?.5:e,a.AddV(o.br),a.Multiply(e,void 0===n?e:n);i<u;++i)s[i].RotateAroundV(a,t);this.dirtyBounds=!0}},{key:"GetControid",value:function(){var t=this.vertices,e=this.centroid;e.Set(0,0);for(var n=0;n<t.length;++n)e.AddV(t[n]);return e.Divide(t.length,t.length),e}},{key:"GetNormalsA",value:function(){var t=this.vertices,e=t.length-1,n=this.normals;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetNormalAV(t[r+1]));return n.push(t[e].GetNormalAV(t[0])),n}},{key:"GetNormalsA",value:function(){var t=this.vertices,e=t.length-1,n=this.normals;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetNormalBV(t[r+1]));return n.push(t[e].GetNormalBV(t[0])),n}},{key:"GetPerimeterMidPoints",value:function(){var t=this.vertices,e=t.length-1,n=this.perimeterMidPoints;n.length=0;for(var r=0;r<e;++r)n.push(t[r].GetMidPointV(t[r+1]));return n.push(t[e].GetMidPointV(t[0])),n}},{key:"IntersectsPoint",value:function(t){if(!0===this.dirtyBounds&&this.ComputeBounds(),!1===this.aabb.IntersectsPoint(t))return!1;for(var e,n,r=!1,i=this.vertices,o=t.x,a=t.y,s=0,u=i.length-1;s<i.length;u=s++)e=i[s],n=i[u],e.y>a!=n.y>a&&o<(n.x-e.x)*(a-e.y)/(n.y-e.y)+e.x&&(r=!r);return r}}]),t}(),ke=3,_e="source-over",Ce="source-over",Pe="source-in",Ee="source-out",Re="source-atop",Ie="destination-over",De="destination-in",je="destination-out",Le="destination-atop",Ne="lighter",Ge="copy",Be="xor",Fe="multiply",Ue="overlay",Me="darken",Ve="lighten",Xe="color-dodge",Ye="color-burn",He="hard-light",We="soft-light",qe="difference",ze="exclusion",Ke="hue",Qe="saturation",Je="color",Ze="luminosity",$e="round",tn="butt",en="square",nn="bevel",rn="round",on="miter",an="start",sn="end",un="center",ln="left",cn="right",hn="alphabetic",fn="top",yn="hanging",pn="middle",dn="ideographic",vn="bottom";function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#36802d",this.applied=!0,Object(R.ApplyProperties)(this,e)}return function(t,e,n){e&&bn(t.prototype,e),n&&bn(t,n)}(t,[{key:"Apply",value:function(t){t.fillStyle=this.color}}]),t}();function gn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var wn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#c9df8a",this.lineCap=$e,this.lineJoin=rn,this.lineWidth=2,this.miterLimit=10,this.applied=!0,Object(R.ApplyProperties)(this,e)}return function(t,e,n){e&&gn(t.prototype,e),n&&gn(t,n)}(t,[{key:"Apply",value:function(t){t.strokeStyle=this.color,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.lineWidth=this.lineWidth,t.miterLimit=this.miterLimit}}]),t}();function Sn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var An=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#234d20",this.blur=5,this.offsetX=0,this.offsetY=0,this.applied=!1,Object(R.ApplyProperties)(this,e)}return function(t,e,n){e&&Sn(t.prototype,e),n&&Sn(t,n)}(t,[{key:"Apply",value:function(t){t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY}}]),t}();function On(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tn=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillColor="#36802d",this.strokeColor="#36802d",this.fontSize=45,this.font=null,this.fontFamily="Arial",this.align=ln,this.baseline=fn,this.lineWidth=.5,this.applied=!0,Object(R.ApplyProperties)(this,e),this.ConcatFont()}return function(t,e,n){e&&On(t.prototype,e),n&&On(t,n)}(t,[{key:"Apply",value:function(t){t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.font=this.font,t.textAlign=this.align,t.textBaseline=this.baseline,t.lineWidth=this.lineWidth}},{key:"ConcatFont",value:function(){this.font=this.fontSize+"px "+this.fontFamily}}]),t}();var xn=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#c9df8a",this.size=1,Object(R.ApplyProperties)(this,e)},kn=function(t){return{fill:new mn(t?t.fill:null),stroke:new wn(t?t.stroke:null),shadow:new An(t?t.shadow:null),text:new Tn(t?t.text:null),pixel:new xn(t?t.pixel:null)}},_n=function(t){return{fill:new mn(t?t.fill:null),stroke:new wn(t?t.stroke:null),shadow:new An(t?t.shadow:null)}},Cn=function(t){return{stroke:new wn(t?t.stroke:null),shadow:new An(t?t.shadow:null)}},Pn=function(t){return{fill:new mn(t?t.fill:null),shadow:new An(t?t.shadow:null)}},En=function(t){return{shadow:new An(t?t.shadow:null),text:new Tn(t?t.text:null)}},Rn=function(t){return{pixel:new xn(t?t.pixel:null)}};function In(t){return(In="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Dn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function jn(t,e){return!e||"object"!==In(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ln(t){return(Ln=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Nn(t,e){return(Nn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Gn=function(t){function e(t,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=jn(this,Ln(e).call(this,t,n,r,i))).programController=null,a.style=_n(o),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Nn(t,e)}(e,le),function(t,e,n){e&&Dn(t.prototype,e),n&&Dn(t,n)}(e,[{key:"Draw",value:function(t){var e=this.tl,n=this.br,r=this.style;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,e.y),t.lineTo(n.x,n.y),t.lineTo(e.x,n.y),t.closePath(),!0===r.shadow.applied&&r.shadow.Apply(t),!0===r.fill.applied&&(r.fill.Apply(t),t.fill()),!0===r.stroke.applied&&(r.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.tl.x,this.tl.y,this.w,this.h)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.fillColor&&null!==t.outlineColor&&null!==t.outline&&(t.fillColor.SetHex(this.style.fill.color),t.fillColor.Normalize(),t.outlineColor.SetHex(this.style.stroke.color),t.outlineColor.Normalize(),t.outline=this.style.stroke.lineWidth+.2),this}}]),e}();function Bn(t){return(Bn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Un(t,e){return!e||"object"!==Bn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mn(t){return(Mn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xn=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Un(this,Mn(e).call(this,t,n,r))).programController=null,o.style=_n(i),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(e,ge),function(t,e,n){e&&Fn(t.prototype,e),n&&Fn(t,n)}(e,[{key:"Draw",value:function(t){var e=this.center,n=this.style;t.beginPath(),t.arc(e.x,e.y,this.radius,0,I.PII,!1),t.closePath(),!0===n.shadow.applied&&n.shadow.Apply(t),!0===n.fill.applied&&(n.fill.Apply(t),t.fill()),!0===n.stroke.applied&&(n.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.center.x,this.center.y,this.radius)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.fillColor&&null!==t.outlineColor&&null!==t.outline&&(t.fillColor.SetHex(this.style.fill.color),t.fillColor.Normalize(),t.outlineColor.SetHex(this.style.stroke.color),t.outlineColor.Normalize(),t.outline=this.style.stroke.lineWidth+.2),this}}]),e}();function Yn(t){return(Yn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wn(t,e){return!e||"object"!==Yn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qn(t){return(qn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zn(t,e){return(zn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kn=function(t){function e(t,n,r,i,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=Wn(this,qn(e).call(this,t,n,r,i))).programController=null,a.style=Cn(o),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zn(t,e)}(e,Ae),function(t,e,n){e&&Hn(t.prototype,e),n&&Hn(t,n)}(e,[{key:"Draw",value:function(t){var e=this.s,n=this.e,r=this.style;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath(),!0===r.shadow.applied&&r.shadow.Apply(t),!0===r.stroke.applied&&(r.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.s,this.e)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.color&&(t.color.SetHex(this.style.stroke.color),t.color.Normalize()),this}}]),e}();function Qn(t){return(Qn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zn(t,e){return!e||"object"!==Qn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $n(t){return($n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function tr(t,e){return(tr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var er=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Zn(this,$n(e).call(this,t))).programController=null,r.style=_n(n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&tr(t,e)}(e,xe),function(t,e,n){e&&Jn(t.prototype,e),n&&Jn(t,n)}(e,[{key:"Draw",value:function(t){var e=this.vertices,n=this.style;t.beginPath(),t.moveTo(e[0].x,e[0].y);for(var r=1;r<e.length;++r)t.lineTo(e[r].x,e[r].y);t.closePath(),!0===n.shadow.applied&&n.shadow.Apply(t),!0===n.fill.applied&&(n.fill.Apply(t),t.fill()),!0===n.stroke.applied&&(n.stroke.Apply(t),t.stroke())}}]),e}();function nr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var rr=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=n,this.holderContext=e,this.handle=r,this.removeOnNextCall=i}return function(t,e,n){e&&nr(t.prototype,e),n&&nr(t,n)}(t,[{key:"Execute",value:function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()}},{key:"Remove",value:function(){this.holderContext.Remove(this.handle,this.context)}}]),t}();function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var or=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[],this.stopPropagation=!1,this.target=null,this.data=null}return function(t,e,n){e&&ir(t.prototype,e),n&&ir(t,n)}(t,[{key:"GetListenerIndex",value:function(t,e){var n,r=this.listeners;if(0===r.length)return-1;for(var i=0;i<r.length;++i)if((n=r[i]).context===e&&n.handle===t)return i;return-1}},{key:"Add",value:function(t,e,n){var r=new rr(this,e,t,n);this.listeners.push(r)}},{key:"Remove",value:function(t,e){var n=this.GetListenerIndex(t,e);-1!==n&&this.listeners.fickleSplice(n)}},{key:"Dump",value:function(t){var e=this.listeners;if(0!==e.length)if(void 0!==t)for(var n=0;n<e.length;++n)e[n].context===t&&this.listeners.fickleSplice(n);else this.listeners.length=0}},{key:"Dispatch",value:function(t,e){var n=this.listeners.slice();if(0!==n.length){this.stopPropagation=!1,this.target=t,this.data=e;for(var r=0;r<n.length&&(n[r].Execute(this),!0!==this.stopPropagation);++r);this.target=null,this.data=null}}}]),t}();function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sr=Math.round,ur=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopTime=sr(null==e?0:e),this.time=0,this.isRunning=!1,this.canResume=!1,this.count=0,this.onStop=new or,this.onFinish=new or,this.onStart=new or,this.onReset=new or,this.onPause=new or,this.onResume=new or}return function(t,e,n){e&&ar(t.prototype,e),n&&ar(t,n)}(t,[{key:"Reset",value:function(){this.onReset.Dispatch(this,null),this.count=0,this.time=0,this.isRunning=!1,this.canResume=!1}},{key:"Start",value:function(t){this.stopTime=sr(null==t?this.stopTime:t),this.stopTime>0&&(this.time=0,this.isRunning=!0,this.canResume=!1,this.onStart.Dispatch(this,{stopTime:this.stopTime}))}},{key:"Stop",value:function(){!0===this.isRunning&&(this.isRunning=!1,this.onStop.Dispatch(this,null))}},{key:"Pause",value:function(){!0===this.isRunning&&!1===this.canResume&&(this.isRunning=!1,this.canResume=!0,this.onPause.Dispatch(this,null))}},{key:"Resume",value:function(){!0===this.canResume&&(this.isRunning=!0,this.canResume=!1,this.onResume.Dispatch(this,null))}},{key:"Process",value:function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onFinish.Dispatch(this,null))}}]),t}();function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cr=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.SetDesiredRate(n),this.onProcess=e,this.intervalId=null,this.afId=null,this.delta=0,this.then=0,this.now=0,this.desiredRate=0,this.supplyDelta=!0,r||this.StartAF()}return function(t,e,n){e&&lr(t.prototype,e),n&&lr(t,n)}(t,[{key:"Process",value:function(){this.onProcess(this.ComputeDelta())}},{key:"ProcessAF",value:function(){this.onProcess(this.ComputeDelta()),null!==this.afId&&(this.afId=requestAnimationFrame(this.ProcessAF))}},{key:"ComputeDelta",value:function(){return this.now=Date.now(),this.delta=this.now-this.then,this.then=this.now,this.delta}},{key:"GetTPS",value:function(){return Object(I.PrecisionRound)(1/this.delta*1e3,2)}},{key:"SetDesiredRate",value:function(t){this.desiredRate=void 0===t?16.66:1e3/t}},{key:"Start",value:function(t){if(null!==this.afId)return yr("%cTicker: RAF is running!","color:red;".concat(fr)),null;null!==this.intervalId?!0===t?(this.Stop(),this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),yr("%cTicker: Starting interval!","color:#0F0;".concat(fr))):yr("%cTicker: Interval already running!","color:#F00;".concat(fr)):(this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),yr("%cTicker: Starting interval!","color:#0F0;".concat(fr)))}},{key:"StartAF",value:function(t){if(null!==this.intervalId)return yr("%cTicker: Interval is running!","color:#F00;".concat(fr)),null;null!==this.afId?!0===t?(this.Stop(),this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),yr("%cTicker: Starting RAF!","color:#0F0;".concat(fr))):yr("%cTicker: RAF already running!","color:#F00;".concat(fr)):(this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),yr("%cTicker: Starting RAF!","color:#0F0;".concat(fr)))}},{key:"Stop",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,yr("%cTicker: Stopping interval!","color:cyan;".concat(fr))),null!==this.afId&&(cancelAnimationFrame(this.afId),this.afId=null,yr("%cTicker: Stopping RAF!","color:cyan;".concat(fr)))}}],[{key:"LOG",get:function(){return hr},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_LOG"),hr=!!t}}]),t}(),hr=!0,fr="background-color:black;font-family:Arial;font-size:16px;padding:5px;",yr=function(){!1!==hr&&console.log.apply(null,arguments)},pr=n(6),dr=n.n(pr),vr=n(7),br=n.n(vr),mr=n(8),gr=n.n(mr),wr=n(9),Sr=n.n(wr),Ar=n(10),Or=n.n(Ar),Tr=n(11),xr=n.n(Tr),kr=function(t){var e,n,r="@vertex@",i="@fragment@";e=t.indexOf(r)+r.length,n=t.indexOf("@vertex-end@");var o=t.substring(e,n);return e=t.indexOf(i)+i.length,n=t.indexOf("@fragment-end@"),{vertex:o,fragment:t.substring(e,n)}},_r=kr(dr.a),Cr=kr(br.a),Pr=kr(gr.a),Er=kr(Sr.a),Rr=kr(Or.a),Ir=kr(xr.a),Dr=n(2);function jr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Lr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.items=[]}return function(t,e,n){e&&jr(t.prototype,e),n&&jr(t,n)}(t,[{key:"Store",value:function(t){var e=!1;return null==t?(console.warn("Item is null."),null):(null!=t.id&&""!==t.id?e=!this.Contains(t,t.id):t.data&&null!=t.data.id&&""!==t.data.id&&(e=!this.Contains(t,t.data.id)),!1===e?(console.warn("Invalid item. Check the item id. The item has not been stored"),!1):(this.items.push(t),!0))}},{key:"StoreSafe",value:function(t){return null!=this.type&&Object(Dr.a)(t,Dr.a.IS_INSTANCE_OF,this.type),Object(Dr.a)(t,Dr.a.IS_SAME_TYPE,Nr),t.id?(Object(Dr.a)(t.id,Dr.a.IS_SAME_TYPE,Gr),Object(Dr.a)(t.id,Dr.a.IS_NOT,"")):(Object(Dr.a)(t.data,Dr.a.IS_SAME_TYPE,Nr),Object(Dr.a)(t.data.id,Dr.a.IS_SAME_TYPE,Gr),Object(Dr.a)(t.data.id,Dr.a.IS_NOT,"")),this.Store(t)}},{key:"GetById",value:function(t){for(var e=this.items,n=e[0],r=0;r<e.length;n=e[++r])if(null!=n&&(n.id===t||null!=n.data&&n.data.id===t))return n;return null}},{key:"Contains",value:function(t,e){for(var n=this.items,r=n[i],i=0;i<n.length;r=n[++i])if(null!=r){if(r===t)return!0;if(r.id===e)return!0;if(null!=r.data&&r.data.id===e)return!0}return!1}}]),t}(),Nr=Object.create(null),Gr="string";var Br=function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.id=null,this.w=0,this.h=0,this.fw=0,this.fh=0,this.uniformId=0,this.id=null!=n?n:e.id,this.w=null!=r?r:e.naturalWidth,this.h=null!=i?i:e.naturalHeight,this.fw=null!=o?o:e.naturalWidth,this.fh=null!=a?a:e.naturalHeight};function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ur=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageCache=new Lr(Image),this.basicTextureCache=new Lr(Br),this.onImageLoaded=new or,this.onComplete=new or,this.count=0,this.loading=!1,this.toLoad=null,this.createTexture=!1,null!=r&&this.onComplete.Add(r,this),null!=e&&this.Load(e,n)}return function(t,e,n){e&&Fr(t.prototype,e),n&&Fr(t,n)}(t,[{key:"Load",value:function(t,e){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),null!=e&&(this.createTextures=e),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];if(null!=e){var n=new Image;n.onload=this.OnLoad.bind(this),n.onerror=this.OnError.bind(this),n.src=e.src,n.id=e.id,n.data=Object.create(null),n.data.w=e.w,n.data.h=e.h,n.data.fw=e.fw,n.data.fh=e.fh}else this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{imageCache:this.imageCache,basicTextureCache:this.basicTextureCache})}},{key:"OnLoad",value:function(t){var e=t.currentTarget;e.onload=null,e.onerror=null,this.imageCache.StoreSafe(e),!0===this.createTextures&&this.basicTextureCache.StoreSafe(new Br(e,null,e.data.w,e.data.h,e.data.fw,e.data.fh)),this.onImageLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)}},{key:"OnError",value:function(){throw new Error("Request failed")}},{key:"GetImageById",value:function(t){return this.imageCache.GetById(t)}},{key:"GetBasicTextureById",value:function(t){return this.basicTextureCache.GetById(t)}}]),t}();function Mr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Vr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.XHRcache=new Lr(XMLHttpRequest),this.dataCache=new Lr,this.onXHRLoaded=new or,this.onComplete=new or,this.count=0,this.loading=!1,this.toLoad=null,null!=n&&this.onComplete.Add(n,this),null!=e&&this.Load(e)}return function(t,e,n){e&&Mr(t.prototype,e),n&&Mr(t,n)}(t,[{key:"Load",value:function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];if(null!=e){var n=new XMLHttpRequest;switch(n.open("GET",e.src),e.type){case"json":n.onreadystatechange=this.OnLoadJSON.bind(this);break;default:n.onreadystatechange=this.OnLoadXML.bind(this)}n.onerror=this.OnError.bind(this),null!=n.data?n.data.id=e.id:n.data={id:e.id},n.send()}else this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{XHRcache:this.XHRcache,dataCache:this.dataCache})}},{key:"OnLoadXML",value:function(t){var e=t.currentTarget;200!==e.status&&null==e.responseText||4!==e.readyState||(e.onload=null,e.onerror=null,this.XHRcache.StoreSafe(e),this.dataCache.Store({id:e.data.id,data:V(e.responseText,!0)}),this.onXHRLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count),e.abort())}},{key:"OnLoadJSON",value:function(t){var e=t.currentTarget;200!==e.status&&null==e.responseText||4!==e.readyState||(e.onload=null,e.onerror=null,this.XHRcache.StoreSafe(e),this.dataCache.Store({id:e.data.id,data:JSON.parse(e.responseText)}),this.onXHRLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count),e.abort())}},{key:"OnError",value:function(t){throw console.error(t),new Error("Request failed")}},{key:"GetXHRById",value:function(t){return this.XHRcache.GetById(t)}},{key:"GetDataById",value:function(t){return this.dataCache.GetById(t).data}},{key:"GetClonedDataById",value:function(t){return Object(R.DeepClone)(this.GetDataById(t))}}]),t}();function Xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Yr=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rate=o,this.timer=o,this.x=e,this.y=n,this.w=r,this.h=i,this.nextFrameIndex=null,this.id=null,null!=a&&(this.id=a)}return function(t,e,n){e&&Xr(t.prototype,e),n&&Xr(t,n)}(t,[{key:"Process",value:function(){return this.timer--<=0&&(this.Reset(),!0)}},{key:"Apply",value:function(t){t.ClipReconfigure(this.x,this.y,this.w,this.h)}},{key:"Reset",value:function(){this.timer=this.rate}}]),t}();function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Wr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.basicTexture=e,this.data=n,this.frameCache=new Lr(Yr)}return function(t,e,n){e&&Hr(t.prototype,e),n&&Hr(t,n)}(t,[{key:"GenerateFrames",value:function(){for(var t,e,n,r=this.data,i=r.frames,o=r.meta.frameTags,a=0;a<i.length;++a)e=(t=i[a]).frame,n=o[a],this.frameCache.Store(new Yr(e.x,e.y,e.w,e.h,t.duration,n?n.name:null))}},{key:"GetFrameById",value:function(t){return this.frameCache.GetById(t)}}]),t}();function qr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.spritesheetCache=new Lr(Wr),this.xhrLoader=new Vr,this.imageLoader=new Ur,this.onComplete=new or,this.onSpritesheetLoaded=new or,this.count=0,this.loading=!1,this.toLoad=null,this.pairCount=0,this.tempBasicTexture=null,this.tempData=null,this.xhrLoader.onXHRLoaded.Add(this.OnPartXHRLoaded,this),this.imageLoader.onImageLoaded.Add(this.OnPartImageLoaded,this),null!=n&&this.onComplete.Add(n,this),null!=e&&this.Load(e)}return function(t,e,n){e&&qr(t.prototype,e),n&&qr(t,n)}(t,[{key:"Load",value:function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];null!=e?(e.data.id=e.image.id=e.id,this.xhrLoader.Load([e.data]),this.imageLoader.Load([e.image],!0)):(this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{spritesheetCache:this.spritesheetCache}))}},{key:"OnPartLoaded",value:function(){if(2==++this.pairCount){var t=this.tempData.meta.size;this.tempBasicTexture.fw=t.w,this.tempBasicTexture.fh=t.h;var e=new Wr(this.tempBasicTexture,this.tempData);this.spritesheetCache.StoreSafe(e),this.pairCount=0,this.onSpritesheetLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)}}},{key:"OnPartXHRLoaded",value:function(t){this.tempData=this.xhrLoader.GetDataById(t.target.data.id),this.OnPartLoaded()}},{key:"OnPartImageLoaded",value:function(t){this.tempBasicTexture=this.imageLoader.GetBasicTextureById(t.target.id),this.OnPartLoaded()}},{key:"GetSpritesheetById",value:function(t){return this.spritesheetCache.GetById(t)}}]),t}();function Kr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.data={},this.program=null,this.attributes=null,this.uniforms=null,null!=e&&null!=n&&this.Init(n.v,n.f)}return function(t,e,n){e&&Kr(t.prototype,e),n&&Kr(t,n)}(t,[{key:"Init",value:function(t,e){var n=this.gl,r=this.CreateShader(t,n.VERTEX_SHADER),i=this.CreateShader(e,n.FRAGMENT_SHADER),o=this.program=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS)){var a=n.getProgramInfoLog(o);throw new Error("Program link failed:"+a)}n.detachShader(o,r),n.detachShader(o,i),n.deleteShader(r),n.deleteShader(i),this.attributes={},this.uniforms={}}},{key:"CreateShader",value:function(t,e){var n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw new Error("Shader compilation failed:"+i)}return r}},{key:"AssignAttribute",value:function(t){this.attributes[t]=this.gl.getAttribLocation(this.program,t)}},{key:"AssignUniform",value:function(t){this.uniforms[t]=this.gl.getUniformLocation(this.program,t)}},{key:"Execute",value:function(){}}],[{key:"LAST_USED_CONTROLLER",get:function(){return Jr},set:function(t){Jr=t}}]),t}(),Jr=null;function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $r=Math.max,ti=Math.min,ei=Math.round,ni=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.channel=new Float32Array([null==e?0:e,null==n?0:n,null==r?0:r,null==i?1:i]),this.value="",this.currentConversion="",this.ComputeValueRGBA()}return function(t,e,n){e&&Zr(t.prototype,e),n&&Zr(t,n)}(t,[{key:"Copy",value:function(){var e=new t(this.channel[0],this.channel[1],this.channel[2],this.channel[3]);return e.value=this.value,e.currentConversion=this.currentConversion,e}},{key:"ComputeValueRGBA",value:function(){return this.value="rgba(".concat(this.channel.join(",").concat(")")),this.value}},{key:"ComputeValueHSLA",value:function(){return this.value="hsla("+this.channel[0]+","+this.channel[1]+"%,"+this.channel[2]+"%,"+this.channel[3]+")",this.value}},{key:"ComputeValueHex",value:function(){return this.value="#"+this.channel[0].toString(16)+this.channel[1].toString(16)+this.channel[2].toString(16),this.value}},{key:"ConvertToHSLA",value:function(t){var e=0,n=0,r=this.channel[0]/ri,i=this.channel[1]/ri,o=this.channel[2]/ri,a=$r(r,i,o),s=ti(r,i,o),u=a-s,l=.5*(a+s);a!==s&&(n=l>.5?u/(2-a-s):u/(a+s),e=a===r?(i-o)/u+(i<o?6:0):a===i?(o-r)/u+2:(r-i)/u+4,e/=6),this.channel[0]=360*e,this.channel[1]=100*n,this.channel[2]=100*l,!0===t&&(this.channel[0]=ei(this.channel[0]),this.channel[1]=ei(this.channel[1]),this.channel[2]=ei(this.channel[2])),this.currentConversion="hsl",this.ComputeValueHSLA()}},{key:"SetRGB",value:function(t,e,n,r){this.channel[0]=Object(R.Clamp)(t,ii,ri),this.channel[1]=Object(R.Clamp)(e,ii,ri),this.channel[2]=Object(R.Clamp)(n,ii,ri),this.currentConversion="rgb",r||this.ComputeValueRGBA()}},{key:"SetRGBA",value:function(t,e,n,r){this.SetRGB(t,e,n,!0),this.channel[3]=Object(R.Clamp)(r,0,1),this.ComputeValueRGBA()}},{key:"SetHex",value:function(t){var e=(t=t.replace(/#/g,"")).match(/.{2}/g);null==(e=e.map(R.Base16ToBase10))[3]&&(e[3]=1),this.SetRGBA(e[0],e[1],e[2],e[3])}},{key:"IncreaseChannel",value:function(t,e){this.channel[t]+=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()}},{key:"SetChannel",value:function(t,e){this.channel[t]=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()}},{key:"Normalize",value:function(){this.channel[0]=oi*this.channel[0],this.channel[1]=oi*this.channel[1],this.channel[2]=oi*this.channel[2]}},{key:"r",get:function(){return this.channel[0]},set:function(t){this.channel[0]=t}},{key:"g",get:function(){return this.channel[1]},set:function(t){this.channel[1]=t}},{key:"b",get:function(){return this.channel[2]},set:function(t){this.channel[2]=t}},{key:"a",get:function(){return this.channel[3]},set:function(t){this.channel[3]=t}}]),t}(),ri=255,ii=0,oi=1/ri;function ai(t){return(ai="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function si(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ui(t,e){return!e||"object"!==ai(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function li(t,e,n,r){return(li="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=hi(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function ci(t,e,n){return(ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=hi(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function hi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=fi(t)););return t}function fi(t){return(fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function yi(t,e){return(yi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var pi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ui(this,fi(e).call(this,t,Rr))).essenceBuffer=null,n.vertices=null,n.fillColor=null,n.outlineColor=null,n.outline=5,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&yi(t,e)}(e,Qr),function(t,e,n){e&&si(t.prototype,e),n&&si(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array(Object(I.TriRectArray)(0,0,1,1)),this.fillColor=new ni,this.outlineColor=new ni,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uFillColor"),this.AssignUniform("uOutlineColor"),this.AssignUniform("uRadius"),this.AssignUniform("uOutline")}},{key:"Execute",value:function(t,n,r,i){var o=this.gl,a=this.attributes,s=this.uniforms,u=this.vertices,l=this.fillColor.channel,c=this.outlineColor.channel;Object(I.TriRectArray)(n-i,r-i,2*i,2*i,u),this!==ci(fi(e.prototype),"LAST_USED_CONTROLLER",this)&&(o.useProgram(this.program),function(t,e,n,r,i){if(!li(t,e,n,r||t)&&i)throw new Error("failed to set property")}(fi(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),o.bindBuffer(o.ARRAY_BUFFER,this.essenceBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,u),o.enableVertexAttribArray(a.aPosition),o.vertexAttribPointer(a.aPosition,2,o.FLOAT,!1,0,0),o.uniformMatrix3fv(s.uProjection,!1,t),o.uniform4f(s.uFillColor,l[0],l[1],l[2],l[3]),o.uniform4f(s.uOutlineColor,c[0],c[1],c[2],c[3]),o.uniform1f(s.uOutline,this.outline),o.uniform1f(s.uRadius,i),o.drawArrays(o.TRIANGLE_STRIP,0,6)}}]),e}();function di(t){return(di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bi(t,e){return!e||"object"!==di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mi(t,e,n,r){return(mi="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=wi(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function gi(t,e,n){return(gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=wi(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function wi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Si(t)););return t}function Si(t){return(Si=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ai(t,e){return(Ai=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Oi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=bi(this,Si(e).call(this,t,Ir))).essenceBuffer=null,n.vertices=null,n.color=null,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ai(t,e)}(e,Qr),function(t,e,n){e&&vi(t.prototype,e),n&&vi(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array([-1,0,1,0]),this.color=new ni,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uColor")}},{key:"Execute",value:function(t,n,r){var i=this.gl,o=this.attributes,a=this.uniforms,s=this.vertices,u=this.color.channel;s[0]=n.x,s[1]=n.y,s[2]=r.x,s[3]=r.y,this!==gi(Si(e.prototype),"LAST_USED_CONTROLLER",this)&&(i.useProgram(this.program),function(t,e,n,r,i){if(!mi(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Si(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),i.bindBuffer(i.ARRAY_BUFFER,this.essenceBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,s),i.enableVertexAttribArray(o.aPosition),i.vertexAttribPointer(o.aPosition,2,i.FLOAT,!1,0,0),i.uniformMatrix3fv(a.uProjection,!1,t),i.uniform4f(a.uColor,u[0],u[1],u[2],u[3]),i.drawArrays(i.LINES,0,2)}}]),e}();function Ti(t){return(Ti="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ki(t,e){return!e||"object"!==Ti(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function _i(t,e,n,r){return(_i="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=Pi(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Ci(t,e,n){return(Ci="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Pi(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Pi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Ei(t)););return t}function Ei(t){return(Ei=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ri(t,e){return(Ri=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ii=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ki(this,Ei(e).call(this,t,Pr))).dataBuffer=null,n.previousNumberOfElements=0,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ri(t,e)}(e,Qr),function(t,e,n){e&&xi(t.prototype,e),n&&xi(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.dataBuffer=t.createBuffer(),this.AssignAttribute("aProjection1"),this.AssignAttribute("aProjection2"),this.AssignAttribute("aProjection3"),this.AssignAttribute("aPosition"),this.AssignAttribute("aColor"),this.AssignAttribute("aPointSize")}},{key:"Execute",value:function(t,n){var r=this.gl,i=this.attributes;Ci(Ei(e.prototype),"LAST_USED_CONTROLLER",this)!==this&&r.useProgram(this.program),r.bindBuffer(r.ARRAY_BUFFER,this.dataBuffer),n!==this.previousNumberOfElements?r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW):r.bufferSubData(r.ARRAY_BUFFER,0,t),r.enableVertexAttribArray(i.aProjection1),r.vertexAttribPointer(i.aProjection1,3,r.FLOAT,!1,64,0),r.enableVertexAttribArray(i.aProjection2),r.vertexAttribPointer(i.aProjection2,3,r.FLOAT,!1,64,12),r.enableVertexAttribArray(i.aProjection3),r.vertexAttribPointer(i.aProjection3,3,r.FLOAT,!1,64,24),r.enableVertexAttribArray(i.aPosition),r.vertexAttribPointer(i.aPosition,2,r.FLOAT,!1,64,36),r.enableVertexAttribArray(i.aColor),r.vertexAttribPointer(i.aColor,4,r.FLOAT,!1,64,44),r.enableVertexAttribArray(i.aPointSize),r.vertexAttribPointer(i.aPointSize,1,r.FLOAT,!1,64,60),r.drawArrays(r.POINTS,0,n),this.previousNumberOfElements=n,function(t,e,n,r,i){if(!_i(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Ei(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)}}]),e}();function Di(t){return(Di="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ji(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Li(t,e){return!e||"object"!==Di(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ni(t,e,n,r){return(Ni="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=Bi(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Gi(t,e,n){return(Gi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Bi(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Bi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Fi(t)););return t}function Fi(t){return(Fi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ui(t,e){return(Ui=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Li(this,Fi(e).call(this,t,Er))).essenceBuffer=null,n.vertices=null,n.fillColor=null,n.outlineColor=null,n.outline=5,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ui(t,e)}(e,Qr),function(t,e,n){e&&ji(t.prototype,e),n&&ji(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array(Object(I.TriRectArray)(0,0,1,1)),this.fillColor=new ni,this.outlineColor=new ni,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uFillColor"),this.AssignUniform("uOutlineColor"),this.AssignUniform("uSize"),this.AssignUniform("uOutline")}},{key:"Execute",value:function(t,n,r,i,o){var a=this.gl,s=this.attributes,u=this.uniforms,l=this.vertices,c=this.fillColor.channel,h=this.outlineColor.channel;Object(I.TriRectArray)(n,r,i,o,l),this!==Gi(Fi(e.prototype),"LAST_USED_CONTROLLER",this)&&(a.useProgram(this.program),function(t,e,n,r,i){if(!Ni(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Fi(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),a.bindBuffer(a.ARRAY_BUFFER,this.essenceBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,l),a.enableVertexAttribArray(s.aPosition),a.vertexAttribPointer(s.aPosition,2,a.FLOAT,!1,0,0),a.uniformMatrix3fv(u.uProjection,!1,t),a.uniform4f(u.uFillColor,c[0],c[1],c[2],c[3]),a.uniform4f(u.uOutlineColor,h[0],h[1],h[2],h[3]),a.uniform1f(u.uOutline,this.outline),a.uniform2f(u.uSize,i,o),a.drawArrays(a.TRIANGLE_STRIP,0,6)}}]),e}();function Vi(t){return(Vi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Xi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Yi(t,e){return!e||"object"!==Vi(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Hi(t,e,n,r){return(Hi="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=qi(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Wi(t,e,n){return(Wi="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=qi(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function qi(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=zi(t)););return t}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Qi=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Yi(this,zi(e).call(this,t,Cr))).originalTexture=null,n.boundTexture=null,n.essenceBuffer=null,n.dataBuffer=null,n.indexBuffer=null,n.previousNumberOfElements=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}(e,Qr),function(t,e,n){e&&Xi(t.prototype,e),n&&Xi(t,n)}(e,[{key:"BindBasicTexture",value:function(t){var e=this.gl,n=Object(I.TriRectArray)(0,0,t.w,t.h);this.aia=e.getExtension("ANGLE_instanced_arrays"),this.originalTexture=t,this.boundTexture=e.createTexture(),this.essenceBuffer=e.createBuffer(),this.dataBuffer=e.createBuffer(),n.push.apply(n,Object(I.TriRectArray)(0,0,1,1)),e.bindTexture(e.TEXTURE_2D,this.boundTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.image),e.bindBuffer(e.ARRAY_BUFFER,this.essenceBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),this.AssignAttribute("aPosition"),this.AssignAttribute("aTexCoord"),this.AssignAttribute("aProjection1"),this.AssignAttribute("aProjection2"),this.AssignAttribute("aProjection3"),this.AssignAttribute("aTranslation1"),this.AssignAttribute("aTranslation2"),this.AssignAttribute("aTranslation3"),this.AssignAttribute("aTransformation1"),this.AssignAttribute("aTransformation2"),this.AssignAttribute("aTransformation3"),this.AssignUniform("uImage")}},{key:"Execute",value:function(t,n){var r=this.gl,i=this.aia,o=this.attributes,a=this.uniforms;this!==Wi(zi(e.prototype),"LAST_USED_CONTROLLER",this)&&(r.useProgram(this.program),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.boundTexture),r.uniform1i(a.uImage,0),r.bindBuffer(r.ARRAY_BUFFER,this.essenceBuffer),r.enableVertexAttribArray(o.aPosition),r.vertexAttribPointer(o.aPosition,2,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.aPosition,0),r.enableVertexAttribArray(o.aTexCoord),r.vertexAttribPointer(o.aTexCoord,2,r.FLOAT,!1,0,48),i.vertexAttribDivisorANGLE(o.aTexCoord,0),function(t,e,n,r,i){if(!Hi(t,e,n,r||t)&&i)throw new Error("failed to set property")}(zi(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),r.bindBuffer(r.ARRAY_BUFFER,this.dataBuffer),n!==this.previousNumberOfElements?r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW):r.bufferSubData(r.ARRAY_BUFFER,0,t),r.enableVertexAttribArray(o.aProjection1),r.vertexAttribPointer(o.aProjection1,3,r.FLOAT,!1,108,0),i.vertexAttribDivisorANGLE(o.aProjection1,1),r.enableVertexAttribArray(o.aProjection2),r.vertexAttribPointer(o.aProjection2,3,r.FLOAT,!1,108,12),i.vertexAttribDivisorANGLE(o.aProjection2,1),r.enableVertexAttribArray(o.aProjection3),r.vertexAttribPointer(o.aProjection3,3,r.FLOAT,!1,108,24),i.vertexAttribDivisorANGLE(o.aProjection3,1),r.enableVertexAttribArray(o.aTranslation1),r.vertexAttribPointer(o.aTranslation1,3,r.FLOAT,!1,108,36),i.vertexAttribDivisorANGLE(o.aTranslation1,1),r.enableVertexAttribArray(o.aTranslation2),r.vertexAttribPointer(o.aTranslation2,3,r.FLOAT,!1,108,48),i.vertexAttribDivisorANGLE(o.aTranslation2,1),r.enableVertexAttribArray(o.aTranslation3),r.vertexAttribPointer(o.aTranslation3,3,r.FLOAT,!1,108,60),i.vertexAttribDivisorANGLE(o.aTranslation3,1),r.enableVertexAttribArray(o.aTransformation1),r.vertexAttribPointer(o.aTransformation1,3,r.FLOAT,!1,108,72),i.vertexAttribDivisorANGLE(o.aTransformation1,1),r.enableVertexAttribArray(o.aTransformation2),r.vertexAttribPointer(o.aTransformation2,3,r.FLOAT,!1,108,84),i.vertexAttribDivisorANGLE(o.aTransformation2,1),r.enableVertexAttribArray(o.aTransformation3),r.vertexAttribPointer(o.aTransformation3,3,r.FLOAT,!1,108,96),i.vertexAttribDivisorANGLE(o.aTransformation3,1),i.drawArraysInstancedANGLE(r.TRIANGLE_STRIP,0,6,n)}}]),e}();function Ji(t){return(Ji="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $i(t,e){return!e||"object"!==Ji(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function to(t,e,n,r){return(to="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=no(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function eo(t,e,n){return(eo="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=no(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function no(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=ro(t)););return t}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oo=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$i(this,ro(e).call(this,t,_r))).originalTexture0=null,n.boundTexture0=null,n.essenceBuffer0=null,n.originalTexture1=null,n.boundTexture1=null,n.essenceBuffer1=null,n.originalTexture2=null,n.boundTexture2=null,n.essenceBuffer2=null,n.originalTexture3=null,n.boundTexture3=null,n.essenceBuffer3=null,n.lastUsedUnit=0,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,Qr),function(t,e,n){e&&Zi(t.prototype,e),n&&Zi(t,n)}(e,[{key:"Initialise",value:function(){this.AssignAttribute("aPosition0"),this.AssignAttribute("aTexCoord0"),this.AssignAttribute("aPosition1"),this.AssignAttribute("aTexCoord1"),this.AssignAttribute("aPosition2"),this.AssignAttribute("aTexCoord2"),this.AssignAttribute("aPosition3"),this.AssignAttribute("aTexCoord3"),this.AssignUniform("uImage"),this.AssignUniform("uUnitId"),this.AssignUniform("uProjection"),this.AssignUniform("uTranslation"),this.AssignUniform("uTransformation"),this.AssignUniform("uTint")}},{key:"BindBasicTexture",value:function(t,e){var n=this.gl,r=Object(I.TriRectArray)(0,0,t.w,t.h);(null==e||e<0||e>3)&&(e=0),t.uniformId=e,this["originalTexture"+e]=t,this["boundTexture"+e]=n.createTexture(),this["essenceBuffer"+e]=n.createBuffer(),r.push.apply(r,Object(I.TriRectArray)(0,0,1,1)),n.bindTexture(n.TEXTURE_2D,this["boundTexture"+e]),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindBuffer(n.ARRAY_BUFFER,this["essenceBuffer"+e]),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindTexture(n.TEXTURE_2D,null)}},{key:"BindUnit",value:function(t,e,n,r){null!=this["boundTexture"+r]&&(t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this["boundTexture"+r]),t.bindBuffer(t.ARRAY_BUFFER,this["essenceBuffer"+r]),t.enableVertexAttribArray(n["aPosition"+r]),t.vertexAttribPointer(n["aPosition"+r],2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n["aTexCoord"+r]),t.vertexAttribPointer(n["aTexCoord"+r],2,t.FLOAT,!1,0,48))}},{key:"Execute",value:function(t,n,r,i,o){var a=this.gl,s=this.attributes,u=this.uniforms;this!==eo(ro(e.prototype),"LAST_USED_CONTROLLER",this)?(a.useProgram(this.program),this.BindUnit(a,u,s,0),this.BindUnit(a,u,s,1),this.BindUnit(a,u,s,2),this.BindUnit(a,u,s,3),a.uniform1f(u.uUnitId,o),a.uniform1i(u.uImage,o),function(t,e,n,r,i){if(!to(t,e,n,r||t)&&i)throw new Error("failed to set property")}(ro(e.prototype),"LAST_USED_CONTROLLER",this,this,!0),this.lastUsedUnit=o):o!==this.lastUsedUnit&&(a.uniform1f(u.uUnitId,o),a.uniform1i(u.uImage,o),this.lastUsedUnit=o),a.uniform4fv(u.uTint,i),a.uniformMatrix3fv(u.uProjection,!1,t),a.uniformMatrix3fv(u.uTranslation,!1,n),a.uniformMatrix3fv(u.uTransformation,!1,r),a.drawArrays(a.TRIANGLE_STRIP,0,6)}}]),e}();function ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var so=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.priority=i,this.breakIfExecuted=!!o,this.data={},this.command=null}return function(t,e,n){e&&ao(t.prototype,e),n&&ao(t,n)}(t,[{key:"Execute",value:function(t,e,n){return this.handle(t,e,n),this.breakIfExecuted}}]),t}();function uo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var lo=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.data={},this.options=null,this.registry=null,this.optionPrefix=null==o?co:o,this.dsCopy=[],this.dataSeparator="=",this.allOptionIds=null,this.fullInfo=null,this.continueToPrime=!!i,this.filterNull=!1}return function(t,e,n){e&&uo(t.prototype,e),n&&uo(t,n)}(t,[{key:"Execute",value:function(t,e,n){this.HandleData(t,e),!0===this.filterNull&&(t=t.filter(ho)),!0===this.HandleOptions(t,e,n)&&this.handle(t,e,n)}},{key:"AddOption",value:function(t,e,n,r,i,o){null!=(o=null==o?this.optionPrefix:o)&&(t=t.replace(/\S+/g,o+"$&")),null==this.options&&(this.options=[]),r=null==r?0:r;var a=this.options,s=a[l],u=new so(t,e,n,r,i);u.command=this;for(var l=0;l<a.length;s=a[++l])if(s.priority<=r)return a.splice(l,0,u),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(u),this.allOptionIds=this.GetAllOptionIds(),this}},{key:"HandleData",value:function(t,e){var n,r=this.dataSeparator,i=this.dsCopy;i.push.apply(i,t);for(var o=0;o<i.length;++o)2===(n=i[o].split(r)).length&&(t[o]=null,e[n[0]]=n[1]);i.length=0}},{key:"HandleOptions",value:function(t,e,n){if(0===t.length)return this.continueToPrime;var r=this.GetAndRemoveMatchingOptionIds(t);if(null==r)return this.continueToPrime;for(var i=0;i<r.length;++i)if(!0===this.GetOptionById(r[i]).Execute(t,e,n))return!1;return this.continueToPrime}},{key:"GetOptionById",value:function(t){for(var e=this.options,n=e[r],r=0;r<e.length;n=e[++r])if(-1!==(n=e[r]).id.indexOf(t))return n;return null}},{key:"GetAllOptionIds",value:function(){for(var t=this.options,e=[],n=0;n<t.length;++n)e.push.apply(e,t[n].id);return e}},{key:"GetAndRemoveMatchingOptionIds",value:function(t){var e,n=this.allOptionIds;if(null==n)return null;for(var r=[],i=0;i<n.length;++i)-1!==(e=t.indexOf(n[i]))&&r.push(t.fickleSplice(e));return r}},{key:"GenerateInfoString",value:function(){for(var t="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",e=this.options,n=e[r],r=0;r<e.length;n=e[++r])t+="OPTION: "+(n=e[r]).id.join(", ")+" -> "+n.info+"\n";return t}},{key:"OPTION_PREFIX",get:function(){return co},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_OPTION_PREFIX"),co=t}}]),t}(),co="",ho=function(t){return null!=t};function fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yo=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commands=[],this.splitter=" "}return function(t,e,n){e&&fo(t.prototype,e),n&&fo(t,n)}(t,[{key:"AddCommand",value:function(t){if(null==t.registry)return this.commands.push(t),t.registry=this,t}},{key:"RemoveCommand",value:function(t){var e=this.commands,n=e.indexOf(t);if(-1!==n)return t.registry=null,e.fickleSplice(n)}},{key:"GetCommandById",value:function(t){for(var e=this.commands,n=e[r],r=0;r<e.length;n=e[++r])if(n)for(var i=0;i<n.id.length;++i)if(n.id[i]===t)return n;return null}},{key:"Parse",value:function(t,e){var n=String(t).split(this.splitter),r=n.shift(),i=this.GetCommandById(r);return i?(i.Execute(n,{},e),null):r}}]),t}();function po(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vo=function(){function t(e,n,r,i,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.target=n,this.propertyString=r,this.value=i,this.duration=a,this.easing=o[null==s?bo:s],this.time=0,this.startValue=0,this.change=0,this.property=null,this.properyObject=null,this.running=!1,this.onStart=new or,this.onEnd=new or,this.onStop=new or,this.onReconfigure=new or,this.onReset=new or}return function(t,e,n){e&&po(t.prototype,e),n&&po(t,n)}(t,[{key:"Start",value:function(){var t=this.propertyString.split(".");this.property=t[t.length-1],this.propertyObject=Object(R.Nested)(this.target,this.propertyString,!0),this.startValue=this.propertyObject[this.property],this.change=this.value-this.startValue,this.time=0,this.running=!0,this.onStart.Dispatch(this,null)}},{key:"Stop",value:function(){this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onStop.Dispatch(this,null)}},{key:"Process",value:function(){!0===this.running&&(this.propertyObject[this.property]=this.easing(this.time,this.startValue,this.change,this.duration),++this.time>=this.duration&&(this.running=!1,this.propertyObject[this.property]=this.value,this.onEnd.Dispatch(this,null)))}},{key:"Reconfigure",value:function(t,e,n,r){null!=t&&(this.propertyString=t),this.value=e,this.duration=n,this.easing=o[null==r?bo:r],this.onReconfigure.Dispatch(this,null)}},{key:"NewValue",value:function(t){this.value=t,this.Start()}},{key:"Reset",value:function(){if(null==this.propertyObject||null==this.property)return!1;this.propertyObject[this.property]=this.startValue,this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onReset.Dispatch(this,null)}}]),t}(),bo="Linear";function mo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var go=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.motions=[],this.target=e}return function(t,e,n){e&&mo(t.prototype,e),n&&mo(t,n)}(t,[{key:"Create",value:function(t,e,n,r,i){if(null==this.GetMotionById(t)){var o=new vo(t,this.target,e,n,r,i);return this.motions.push(o),o}return null}},{key:"Add",value:function(t){null==this.GetMotionById(t.id)&&this.motions.push(t)}},{key:"Start",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Start(),e}},{key:"StartMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Start(t[e])}},{key:"Stop",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Stop(),e}},{key:"StopMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Stop(t[e])}},{key:"Reset",value:function(t){var e=this.GetMotionByid(t);return null!==e&&e.Reset(),e}},{key:"ResetMultiple",value:function(t){t=t.split(" ");for(var e=0;e<t.length;++e)this.Reset(t[e])}},{key:"Process",value:function(){for(var t=this.motions,e=0;e<t.length;++e)t[e].Process()}},{key:"GetMotionById",value:function(t){for(var e=this.motions,n=0;n<e.length;++n)if(e[n].id===t)return e[n];return null}}]),t}();function wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var So=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.velocityX=null,this.velocityY=null,this.torque=null,this.accelerationX=null,this.accelerationY=null,this.spin=null,this.growthX=null,this.growthY=null,this.gravityX=null,this.gravityY=null,this.active=!0}return function(t,e,n){e&&wo(t.prototype,e),n&&wo(t,n)}(t,[{key:"CreateOscillatingObject",value:function(t,e,n,r){if(null!==this[t])throw new Error("Invalid key");this[t]={from:e,to:n,amplitude:r,active:!0}}},{key:"SetOscillatingObject",value:function(t,e,n,r){var i=this[t];if(null==i)return this.CreateOscillatingObject(t,e,n,r);i.from=e,i.to=n,i.amplitude=r,i.active=!0}},{key:"Nullify",value:function(t){null!=this[t]&&(this[t].active=!1)}}]),t}();function Ao(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oo=Math.cos,To=Math.sin,xo=Math.atan2,ko=Math.sqrt,_o=Math.abs,Co=Math.PI,Po=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=new Float32Array(9),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}return function(t,e,n){e&&Ao(t.prototype,e),n&&Ao(t,n)}(t,[{key:"Identity",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"Copy",value:function(){var e=new t;return e.Set(this.a,this.b,this.c,this.d,this.e,this.f),e}},{key:"Set",value:function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this}},{key:"SetTransform",value:function(t,e,n,r,i,o,a,s,u){t=null==t?0:t,e=null==e?0:e,n=null==n?1:n,r=null==r?1:r,i=null==i?0:i,o=null==o?0:o,a=null==a?0:a,s=null==s?0:s,u=null==u?0:u;var l=To(i),c=Oo(i),h=-To(o),f=Oo(o),y=To(a),p=Oo(a),d=c*n,v=l*n,b=-l*r,m=c*r;return this.a=p*d+y*b,this.b=p*v+y*m,this.c=h*d+f*b,this.d=h*v+f*m,this.e=t+s*d+u*b,this.f=e+s*v+u*m,this}},{key:"Translate",value:function(t,e){this.e+=t,this.f+=e}},{key:"TranslateTo",value:function(t,e){this.e=t,this.f=e}},{key:"ApplyTranslation",value:function(t,e){this.e=t*this.a+e*this.c+this.e,this.f=t*this.b+e*this.d+this.f}},{key:"ApplyScale",value:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e}},{key:"Scale",value:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e}},{key:"Rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.a,i=this.c,o=this.e;this.a=r*n-this.b*e,this.b=r*e+this.b*n,this.c=i*n-this.d*e,this.d=i*e+this.d*n,this.e=o*n-this.f*e,this.f=o*e+this.f*n}},{key:"Decompose",value:function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-xo(-r,i),a=xo(n,e);_o(o+a)<Eo?(t.rotation=a,e<0&&i>=0&&(t.rotation+=Co),t.skew.SetSame(0)):t.skew.Set(o,a),t.scale.Set(ko(e*e+n*n),ko(r*r+i*i)),t.position.Set(this.e,this.f)}},{key:"ApplyToContext",value:function(t){t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}},{key:"AsArray",value:function(t){var e=this.array;return!0===t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.e,e[7]=this.f,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.e,e[3]=this.b,e[4]=this.d,e[5]=this.f,e[6]=0,e[7]=0,e[8]=1),e}}]),t}(),Eo=1e-5;function Ro(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Io=Math.cos,Do=Math.sin,jo=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=new pt(e,n),this.scale=new pt(1,1),this.skew=new pt(0,0),this.pivot=new pt(0,0),this.localTransform=new Po,this.globalTransform=new Po,this.rotation=0,this.skewCX=1,this.skewSX=0,this.skewCY=0,this.skewSY=1}return function(t,e,n){e&&Ro(t.prototype,e),n&&Ro(t,n)}(t,[{key:"Set",value:function(t){t.Decompose(this),this.UpdateSkew()}},{key:"UpdateLocal",value:function(){var t=this.localTransform,e=this.position,n=this.scale,r=this.pivot;t.a=this.skewCX*n.x,t.b=this.skewSX*n.x,t.c=this.skewCY*n.y,t.d=this.skewSY*n.y,t.e=e.x-r.x*t.a+r.y*t.c,t.f=e.y-r.y*t.b+r.y*t.d}},{key:"UpdateGlobal",value:function(t){var e=this.localTransform,n=this.globalTransform,r=this.position,i=this.scale,o=this.pivot;e.a=this.skewCX*i.x,e.b=this.skewSX*i.x,e.c=this.skewCY*i.y,e.d=this.skewSY*i.y,e.e=r.x-o.x*e.a+o.y*e.c,e.f=r.y-o.y*e.b+o.y*e.d,n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.e=e.e*t.a+e.f*t.c+t.e,n.f=e.e*t.b+e.f*t.d+t.f}},{key:"UpdateSkew",value:function(){var t=this.skew,e=this.rotation;this.skewCX=Io(e+t.y),this.skewSX=Do(e+t.y),this.skewCY=-Do(e-t.x),this.skewSY=Io(e-t.x)}},{key:"ApplyGlobal",value:function(t){this.globalTransform.ApplyToContext(t)}}]),t}();function Lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var No=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transform=new jo(e,n),this.data={},this.parent=null,this.w=0,this.h=0,this.bounds=null,this.boundsDirty=!0,this.globalPosition=null}return function(t,e,n){e&&Lo(t.prototype,e),n&&Lo(t,n)}(t,[{key:"UpdateTransform",value:function(){null!=this.parent?this.transform.UpdateGlobal(this.parent.transform.globalTransform):this.transform.UpdateGlobal(Go.globalTransform)}},{key:"GetGlobalPosition",value:function(){var t=this.transform.globalTransform;return null===this.globalPosition?this.globalPosition=new pt(t.e,t.f):this.globalPosition.Set(t.e,t.f),this.globalPosition}},{key:"ComputeBounds",value:function(t){var e=0,n=0;return null!=t&&(e=this.width*t.x,n=this.height*t.y),null===this.bounds?(this.bounds=new le(this.x-e,this.y-n,this.x+this.width-e,this.y+this.height-n),this.bounds.belongsTo=this):this.bounds.Set(this.x-e,this.y-n,this.x+this.width-e,this.y+this.height-n),this.boundsDirty=!1,this.bounds}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t,this.transform.UpdateSkew()}},{key:"scale",get:function(){return this.transform.scale}},{key:"position",get:function(){return this.transform.position}},{key:"pivot",get:function(){return this.transform.pivot}},{key:"x",get:function(){return this.transform.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.transform.position.y},set:function(t){this.transform.position.y=t}},{key:"width",get:function(){return this.w*this.scale.x},set:function(t){this.w=t}},{key:"height",get:function(){return this.h*this.scale.y},set:function(t){this.h=t}}]),t}(),Go=new jo;function Bo(t){return(Bo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Fo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Uo(t,e){return!e||"object"!==Bo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Mo(t){return(Mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vo(t,e){return(Vo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Xo=Math.abs,Yo=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Uo(this,Mo(e).call(this,t,n))).children=[],r.render=!0,r.display=!0,r.transformShouldUpdate=!0,r.transformAutomaticUpdate=!0,r.motionManager=null,r.isBatchParent=!1,r.childDataBuffer=null,r.bufferData=null,r.programController=null,r.bufferStartIndex=0,r.bufferEndIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vo(t,e)}(e,No),function(t,e,n){e&&Fo(t.prototype,e),n&&Fo(t,n)}(e,[{key:"PreDraw",value:function(){}},{key:"GLPreDraw",value:function(){}},{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&this.DrawChildren(t))}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren():this.GLDrawChildren(t)))}},{key:"RequestTransformUpdate",value:function(){this.transformShouldUpdate=!0}},{key:"DrawChildren",value:function(t){for(var e=this.children,n=0;n<e.length;++n)e[n].Draw(t)}},{key:"GLDrawChildren",value:function(t){for(var e=this.children,n=0;n<e.length;++n)e[n].GLDraw(t)}},{key:"GLBatchDrawChildren",value:function(){null!=this.childDataBuffer&&null!=this.programController&&this.programController.Execute(this.childDataBuffer,this.children.length)}},{key:"ComputeBatchBuffer",value:function(t){for(var e,n,r=this.children,i=[],o=0;o<r.length;++o)e=r[o],n=null!=t?t(e):e.GetBufferData(),e.bufferStartIndex=i.length,e.bufferEndIndex=i.length+n.length,i.push.apply(i,n);this.childDataBuffer=new Float32Array(i)}},{key:"UpdateInBuffer",value:function(){throw new Error(Ho)}},{key:"GetBufferData",value:function(){throw new Error(Ho)}},{key:"AddChild",value:function(t){var e=t.parent;return null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this,t}},{key:"AddChildren",value:function(){var t=arguments;Object(R.IsArray)(t[0])&&(t=t[0]);for(var e=0;e<t.length;++e)this.AddChild(t[e])}},{key:"AddSibling",value:function(t){var e=this.parent;return null!==e&&e.AddChild(t),t}},{key:"RemoveChild",value:function(t){var e=this.children,n=e.indexOf(t);if(-1!==n)return t.parent=null,e.fickleSplice(n)}},{key:"RemoveChildren",value:function(){var t,e,n=arguments;Object(R.IsArray)(r[0])&&(function(t){throw new Error('"'+t+'" is read-only')}("children"),r=r[0]);for(var r=this.children,i=[],o=0;o<n.length;++o)t=n[o],-1!==(e=r.indexOf(t))&&(i.push(r.fickleSplice(e)),t.parent=null);return i}},{key:"Swap",value:function(t){if(null!==this.parent){var e=this.parent.children,n=e.indexOf(this);if(-1!==n){-1===t&&(t=e.length-1);var r=e[t];e[t]=this,e[n]=r}}}},{key:"SendToFront",value:function(){this.Swap(-1)}},{key:"SendToBack",value:function(){this.Swap(0)}},{key:"Dump",value:function(){for(var t=this.children,e=0;e<t.length;++e)t[e].parent=null;t.length=0}},{key:"Destroy",value:function(){this.Dump(),null!==this.parent&&this.parent.RemoveChild(this)}},{key:"AttachTo",value:function(t){t.AddChild(this)}},{key:"Detach",value:function(){return null!==this.parent?this.parent.RemoveChild(this):null}},{key:"GetChildClosestTo",value:function(t,e){var n,r,i,o=1/0,a=this.children;if(0!==a.length){for(var s=0;s<a.length;++s)n=a[s],void 0!==e&&!1===e(n)||(r=Xo(n.position.GetDistanceSquared(t.x,t.y)))<o&&(o=r,i=n);return i}return null}},{key:"GetChildFurthestFrom",value:function(t,e){var n,r,i,o=0,a=this.children;if(0!==a.length){for(var s=0;s<a.length;++s)n=a[s],void 0!==e&&!1===e(n)||(r=Xo(n.position.GetDistanceSquared(t.x,t.y)))>o&&(o=r,i=n);return i}return null}},{key:"UseAsBatchParent",value:function(t){this.isBatchParent=!0,this.programController=t}}]),e}();Yo.prototype.Mount=Yo.prototype.AddChildren;var Ho="Cannot access buffer data directly on Container2D!";function Wo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var qo=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=[],this.controller=e,this.sprite=e.sprite,this.id=n,this.onEnd=new or,this.onStop=new or,this.onStart=new or,this.currentFrame=0,this.currentFrameIndex=0,this.playing=!1,this.rate=60,this.timer=0,this.reverse=!1,this.overrideFrameRate=!1,this.loop=!1,this.autoFrame=!0,null!=r&&(this.rate=r)}return function(t,e,n){e&&Wo(t.prototype,e),n&&Wo(t,n)}(t,[{key:"CreateFrame",value:function(t,e,n,r,i){i=null==i?this.rate:i,this.frames.push(new Yr(t,e,n,r,i))}},{key:"AddFrame",value:function(t){(null==t.rate||t.rate<=0)&&(t.rate=this.rate),this.frames.push(t)}},{key:"GenerateFrames",value:function(t,e,n,r,i,o){var a,s=n/r;o=null==o?{}:o;for(var u=0;u<i;++u)a=o[u],this.CreateFrame(u%s*t,(u/s|0)*e,t,e,a)}},{key:"SetFrame",value:function(t){t=null==t?0:t;var e=this.frames[t];void 0!==e&&(this.currentFrame=e,this.currentFrameIndex=t,this.currentFrame.Apply(this.sprite))}},{key:"GetFrameById",value:function(t,e){for(var n=this.frames,r=0;r<n.length;++r)if(n[r].id===t)return!0===e?r:n[r]}},{key:"SetFrameById",value:function(t){var e=this.GetFrameById(t,!0);this.SetFrame(e)}},{key:"Start",value:function(t){null==t&&this.autoFrame&&(t=this.reverse?this.frames.length-1:0),this.SetFrame(t),this.ResetAllFrames(),this.timer=this.rate,this.playing=!0,this.onStart.Dispatch()}},{key:"Stop",value:function(){this.playing=!1,this.onStop.Dispatch()}},{key:"Process",value:function(){!0===this.playing&&(!0===this.overrideFrameRate?--this.timer<=0&&(this.timer=this.rate,this.NextFrame()):!0===this.currentFrame.Process()&&this.NextFrame())}},{key:"NextFrame",value:function(){var t=!1,e=this.frames,n=e.length;!1===this.reverse?++this.currentFrameIndex:--this.currentFrameIndex,this.currentFrameIndex>=n?(!0===this.loop?this.currentFrameIndex=0:this.currentFrameIndex=n-1,t=!0):this.currentFrameIndex<0&&(!0===this.loop?this.currentFrameIndex=n-1:this.currentFrameIndex=0,t=!0),this.currentFrame=e[this.currentFrameIndex],this.currentFrame.Apply(this.sprite),!0===t&&(this.onEnd.Dispatch(),!1===this.loop&&this.Stop())}},{key:"Clear",value:function(){this.frames=[],this.currentFrame=null,this.playing=!1,this.currentFrameIndex=0,this.timer=this.rate}},{key:"Reset",value:function(){this.SetFrame(0),this.ResetAllFrames(),this.timer=this.rate,this.playing=!1}},{key:"ResetAllFrames",value:function(){for(var t=this.frames,e=0;e<t.length;++e)t[e].Reset()}}]),t}();function zo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ko=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animations=[],this.sprite=null,this.currentAnimation=null,null!=e&&(this.sprite=e)}return function(t,e,n){e&&zo(t.prototype,e),n&&zo(t,n)}(t,[{key:"CreateAnimation",value:function(t,e){var n=new qo(this,t,e);return this.animations.push(n),n}},{key:"AddAnimation",value:function(t){t.controller=this,this.animations.push(t)}},{key:"GetAnimationById",value:function(t){for(var e=this.animations,n=e[r],r=0;r<e.length;n=e[++r])if(n&&n.id===t)return n;return null}},{key:"PlayAnimation",value:function(t,e){var n=this.GetAnimationById(t);null!==n&&(this.currentAnimation=n,n.Start(e))}},{key:"StopCurrentAnimation",value:function(){null!==this.currentAnimation&&this.currentAnimation.Stop()}},{key:"Process",value:function(){null!==this.currentAnimation&&this.currentAnimation.Process()}}]),t}();function Qo(t){return(Qo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Jo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Zo(t,e){return!e||"object"!==Qo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function $o(t){return($o=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ta(t,e){return(ta=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ea=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Zo(this,$o(e).call(this,t,n))).anchor=new pt(0,0),i.SetPath(r),i.alpha=1,i.gco=_e,i.interactive=!0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ta(t,e)}(e,Yo),function(t,e,n){e&&Jo(t.prototype,e),n&&Jo(t,n)}(e,[{key:"Draw",value:function(t){if(this.PreDraw(t),!0===this.render){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t);var e=this.path;e&&e.Draw&&!0===this.display&&(t.globalAlpha=this.alpha,t.globalCompositeOperation=this.gco,e.Draw(t)),this.children.length>0&&this.DrawChildren(t)}}},{key:"GLDraw",value:function(t){if(this.GLPreDraw(t),!0===this.render){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1));var e=this.path;e&&e.GLDraw&&!0===this.display&&e.GLDraw(t,this.transform),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t))}}},{key:"GetBufferData",value:function(){this.UpdateTransform();var t=this.transform.globalTransform.AsArray(!0);null==this.bufferData&&(this.bufferData=[]);var e=this.bufferData;return e.length=0,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this.path&&this.path.GetBufferData&&e.push.apply(e,this.path.GetBufferData()),e}},{key:"UpdateInBuffer",value:function(){this.UpdateTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.parent.childDataBuffer,n=this.bufferStartIndex;e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],this.path&&this.path.UpdateInBuffer&&this.path.UpdateInBuffer(e,n+9)}},{key:"IntersectsPoint",value:function(t){return!1!==this.interactive&&(na.SetV(t),na.SubtractV(this.position),this.path.IntersectsPoint(na))}},{key:"SetPath",value:function(t){void 0!==t&&(void 0!==t.w&&void 0!==t.h?(this.w=t.w,this.h=t.h):void 0!==t.GetLength?this.w=this.h=t.GetLength():void 0!==t.diameter?this.w=this.h=t.diameter:void 0!==t.aabb&&(this.w=t.aabb.w,this.h=t.aabb.h),this.path=t)}}]),e}(),na=new pt(0,0);function ra(t){return(ra="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function oa(t,e){return!e||"object"!==ra(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function aa(t){return(aa=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function sa(t,e){return(sa=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ua=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=oa(this,aa(e).call(this,t,n))).anchor=new pt(0,0),o.clip=new le(0,0,0,0),o.shape=new le(0,0,0,0),o.textureTransformation=new Po,o.textureTranslation=new Po,o.originalShape=new le(0,0,0,0),o.tint=new ni(1,1,1,1),o.texture=null,o.gco=_e,o.interactive=!0,o.programController=null,o.animationController=null,r instanceof oo?(o.programController=r,null!=i?o.SetTexture(r["originalTexture"+i]):o.SetTexture(r.originalTexture0)):null==r?o.SetTexture(la):o.SetTexture(r),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&sa(t,e)}(e,Yo),function(t,e,n){e&&ia(t.prototype,e),n&&ia(t,n)}(e,[{key:"Draw",value:function(t){if(this.PreDraw(t),!0===this.render){if(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display){var e=this.clip,n=e.tl,r=e.br,i=this.anchor;t.globalAlpha=this.tint.channel[3],t.globalCompositeOperation=this.gco,t.drawImage(this.texture.image,n.x,n.y,r.x,r.y,-this.w*i.x,-this.h*i.y,this.w,this.h)}this.children.length>0&&this.DrawChildren(t)}}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),!0===this.display&&null!==this.programController&&this.programController.Execute(this.transform.globalTransform.AsArray(!0),this.textureTranslation.AsArray(!0),this.textureTransformation.AsArray(!0),this.tint.channel,this.texture.uniformId),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t)))}},{key:"GetBufferData",value:function(){this.UpdateTransform(),this.UpdateTextureTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.textureTranslation.AsArray(!0),n=this.textureTransformation.AsArray(!0);null==this.bufferData&&(this.bufferData=[]);var r=this.bufferData;return r.length=0,r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=e[0],r[10]=e[1],r[11]=e[2],r[12]=e[3],r[13]=e[4],r[14]=e[5],r[15]=e[6],r[16]=e[7],r[17]=e[8],r[18]=n[0],r[19]=n[1],r[20]=n[2],r[21]=n[3],r[22]=n[4],r[23]=n[5],r[24]=n[6],r[25]=n[7],r[26]=n[8],r}},{key:"UpdateInBuffer",value:function(){this.UpdateTransform(),this.UpdateTextureTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.textureTranslation.AsArray(!0),n=this.textureTransformation.AsArray(!0),r=this.parent.childDataBuffer,i=this.bufferStartIndex;r[i]=t[0],r[i+1]=t[1],r[i+2]=t[2],r[i+3]=t[3],r[i+4]=t[4],r[i+5]=t[5],r[i+6]=t[6],r[i+7]=t[7],r[i+8]=t[8],r[i+9]=e[0],r[i+10]=e[1],r[i+11]=e[2],r[i+12]=e[3],r[i+13]=e[4],r[i+14]=e[5],r[i+15]=e[6],r[i+16]=e[7],r[i+17]=e[8],r[i+18]=n[0],r[i+19]=n[1],r[i+20]=n[2],r[i+21]=n[3],r[i+22]=n[4],r[i+23]=n[5],r[i+24]=n[6],r[i+25]=n[7],r[i+26]=n[8]}},{key:"UpdateTextureTransform",value:function(){var t=this.w/this.texture.fw,e=this.h/this.texture.fh;this.textureTranslation.TranslateTo(-this.w*this.anchor.x,-this.h*this.anchor.y),this.textureTransformation.TranslateTo(t*this.clip.tl.x/this.w,e*this.clip.tl.y/this.h)}},{key:"UpdateShape",value:function(t){null!=t&&(this.originalShape=t),this.shape.SetC(this.originalShape),this.shape.Scale(this.scale.x,this.scale.y)}},{key:"SetTexture",value:function(t){this.texture=t,this.ClipReconfigure(0,0,t.w,t.h),this.shape.SetC(this.clip),this.originalShape.SetC(this.shape)}},{key:"ClipReconfigure",value:function(t,e,n,r){var i=n/this.texture.fw,o=r/this.texture.fh,a=this.width,s=this.height;this.clip.Set(t,e,n,r),this.w=n,this.h=r,0!==a&&0!==s&&(this.width=a,this.height=s),this.textureTranslation.SetTransform(-n*this.anchor.x,-r*this.anchor.y,i,o),this.textureTransformation.SetTransform(i*this.clip.tl.x/n,o*this.clip.tl.y/r,i,o)}},{key:"CreateAnimation",value:function(t){null===this.animationController&&(this.animationController=new Ko(this));var e=this.animationController.CreateAnimation(t.id,t.rate);if(null!=t.spritesheet)for(var n=0;n<t.frames.length;++n)e.AddFrame(t.spritesheet.GetFrameById(t.frames[n]));return e}},{key:"IntersectsPoint",value:function(t){if(!1===this.interactive)return!1;var e=t.SubtractVC(this.position);return e.Add(this.width*this.anchor.x,this.height*this.anchor.y),this.shape.IntersectsPoint(e)}},{key:"width",get:function(){return this.w*this.scale.x},set:function(t){this.scale.x=t/this.w}},{key:"height",get:function(){return this.h*this.scale.y},set:function(t){this.scale.y=t/this.h}},{key:"alpha",get:function(){return this.tint.channel[3]},set:function(t){this.tint.channel[3]=t}}],[{key:"BUILD_DEFAULT_TEXTURE",value:function(t){if(!0===ca)throw new Error("Function can only be called once!");la=new Br(U(F(function(){var t=new er([0,0,64,0,64,64,0,64,0,0,32,32,64,0,32,32,64,64,32,32,0,64]);return t.ComputeBounds(),t.style.stroke.lineWidth=3,new ea(0,0,t)}),64,64,t),"__DEFAULT_SPRITE_TEXTURE__",64,64,64,64),ca=!0}},{key:"DEFAULT_TEXTURE",get:function(){return la}}]),e}(),la=null,ca=!1;function ha(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var fa=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.velocity=new pt(0,0),this.torque=0,this.spin=0,this.growth=new pt(1,1),this.acceleration=new pt(1,1),this.initialScale=new pt(1,1),this.fade=!1,this.deflate=!1,this.gravity=new pt,this.lifespan=0,this.lifespanTotal=0,this.dead=!1,this.entity=null,this.system=null,this.oscillation=null,this.oscillationOffset=0,this.Renew(e,n)}return function(t,e,n){e&&ha(t.prototype,e),n&&ha(t,n)}(t,[{key:"Process",value:function(){if(!0!==this.dead)if(this.lifespan++<this.lifespanTotal){var t=this.entity,e=this.velocity,n=1-this.lifespan/this.lifespanTotal,r=this.oscillation;if(e.AddV(this.gravity).MultiplyV(this.acceleration),0!==this.torque&&e.Rotate(this.torque),t.position.AddV(e),!0===this.fade&&(t.alpha=n),!0===this.deflate?t.scale.Set(n*this.initialScale.x,n*this.initialScale.y):t.scale.MultiplyV(this.growth),t.rotation+=this.spin,null!==r&&!0===r.active){var i=this.lifespan+this.oscillationOffset;null!=r.torque&&!0===r.torque.active&&(this.torque=Object(I.Oscillate)(i,r.torque.from,r.torque.to,r.torque.amplitude)),null!=r.spin&&!0===r.spin.active&&(this.spin=Object(I.Oscillate)(i,r.spin.from,r.spin.to,r.spin.amplitude)),null!=r.velocityX&&!0===r.velocityX.active&&(this.velocity.x=Object(I.Oscillate)(i,r.velocityX.from,r.velocityX.to,r.velocityX.amplitude)),null!=r.velocityY&&!0===r.velocityY.active&&(this.velocity.y=Object(I.Oscillate)(i,r.velocityY.from,r.velocityY.to,r.velocityY.amplitude)),null!=r.gravityX&&!0===r.gravityX.active&&(this.gravity.x=Object(I.Oscillate)(i,r.gravityX.from,r.gravityX.to,r.gravityX.amplitude)),null!=r.gravityY&&!0===r.gravityY.active&&(this.gravity.y=Object(I.Oscillate)(i,r.gravityY.from,r.gravityY.to,r.gravityY.amplitude)),null!=r.accelerationX&&!0===r.accelerationX.active&&(this.acceleration.x=Object(I.Oscillate)(i,r.accelerationX.from,r.accelerationX.to,r.accelerationX.amplitude)),null!=r.accelerationY&&!0===r.accelerationY.active&&(this.acceleration.y=Object(I.Oscillate)(i,r.accelerationY.from,r.accelerationY.to,r.accelerationY.amplitude)),null!=r.growthX&&!0===r.growthX.active&&(this.growth.x=Object(I.Oscillate)(i,r.growthX.from,r.growthX.to,r.growthX.amplitude)),null!=r.growthY&&!0===r.growthY.active&&(this.growth.y=Object(I.Oscillate)(i,r.growthY.from,r.growthY.to,r.growthY.amplitude))}}else this.dead=!0,this.entity.display=!1}},{key:"Renew",value:function(t,e){if(null!=t){this.dead=!1;var n=this.entity;if(null==t.texture)throw new Error("No texture or controller provided!");if(null===n?(n=this.entity=new ua(0,0,t.texture,t.unitId),null!=t.anchor&&(n.anchor.SetV(t.anchor),n.UpdateTextureTransform())):this.ResetEntity(t.unitId),null!=t.frames&&(t.frames[Object(R.RandomInteger)(0,t.frames.length-1)].Apply(n),n.scale.SetSame(1),n.UpdateTextureTransform()),this.RenewVector(t.position,n.position,e,0,0),this.RenewVector(t.velocity,this.velocity,e,0,0),this.RenewVector(t.gravity,this.gravity,e,0,0),this.RenewVector(t.acceleration,this.acceleration,e,1,1),this.RenewVector(t.growth,this.growth,e,1,1),this.RenewVector(t.scale,n.scale,e,1,1),this.RenewVector(t.scale,this.initialScale,e,1,1),null!=t.rotation?n.rotation=Object(R.MinMaxOrValue)(t.rotation):n.rotation=0,null!=t.lifespan?this.SetLifespan(t.lifespan):this.SetLifespan(0),null!=t.torque?this.torque=Object(R.MinMaxOrValue)(t.torque):this.torque=0,null!=t.spin?this.spin=Object(R.MinMaxOrValue)(t.spin):this.spin=0,null!=t.fade?this.fade=t.fade:this.fade=!1,null!=t.deflate?this.deflate=t.deflate:this.deflate=!1,null!=t.oscillation){var r=t.oscillation,i=this.oscillation;null===i&&(i=this.oscillation=new So),i.active=!0,null!=r.offset?this.oscillationOffset=Object(R.MinMaxOrValue)(r.offset):this.oscillationOffset=0,null!=r.torque?i.SetOscillatingObject("torque",r.torque.from,r.torque.to,r.torque.amplitude):i.Nullify("torque"),null!=r.spin?i.SetOscillatingObject("spin",r.spin.from,r.spin.to,r.spin.amplitude):i.Nullify("spin"),null!=r.velocity&&(null!=r.velocity.x?i.SetOscillatingObject("velocityX",r.velocity.x.from,r.velocity.x.to,r.velocity.x.amplitude):i.Nullify("velocityX"),null!=r.velocity.y?i.SetOscillatingObject("velocityY",r.velocity.y.from,r.velocity.y.to,r.velocity.y.amplitude):i.Nullify("velocityY")),null!=r.gravity&&(null!=r.gravity.x?i.SetOscillatingObject("gravityX",r.gravity.x.from,r.gravity.x.to,r.gravity.x.amplitude):i.Nullify("gravityX"),null!=r.gravity.y?i.SetOscillatingObject("gravityY",r.gravity.y.from,r.gravity.y.to,r.gravity.y.amplitude):i.Nullify("gravityY")),null!=r.acceleration&&(null!=r.acceleration.x?i.SetOscillatingObject("accelerationX",r.acceleration.x.from,r.acceleration.x.to,r.acceleration.x.amplitude):i.Nullify("accelerationX"),null!=r.acceleration.y?i.SetOscillatingObject("accelerationY",r.acceleration.y.from,r.acceleration.y.to,r.acceleration.y.amplitude):i.Nullify("accelerationY")),null!=r.growth&&(null!=r.growth.x?i.SetOscillatingObject("growthX",r.growth.x.from,r.growth.x.to,r.growth.x.amplitude):i.Nullify("growthX"),null!=r.growth.y?i.SetOscillatingObject("growthY",r.growth.y.from,r.growth.y.to,r.growth.y.amplitude):i.Nullify("growthY"))}else null!==this.oscillation&&(this.oscillation.active=!1)}}},{key:"RenewVector",value:function(t,e,n,r,i){null!=t?null!=t.points?null!=t.moduloWrapper?(null!=t.indexGap&&(n+=t.indexGap),e.SetV(t.points[n%t.moduloWrapper])):e.SetV(Object(R.RandomInArray)(t.points)):null!=t.xy?e.SetSame(Object(R.MinMaxOrValue)(t.xy)):(null!=t.x?e.x=Object(R.MinMaxOrValue)(t.x):e.x=r,null!=t.y?e.y=Object(R.MinMaxOrValue)(t.y):e.y=i):e.Set(r,i)}},{key:"SetLifespan",value:function(t){this.lifespan=0,this.lifespanTotal=Object(R.MinMaxOrValue)(t)}},{key:"ResetEntity",value:function(t){var e=this.entity;null!=t&&e.SetTexture(e.programController["originalTexture"+t]),e.scale.SetSame(1),e.alpha=1,e.display=!0,e.rotation=0}},{key:"Destroy",value:function(t){return(!0!==t||!1!==this.dead)&&(null!==this.system&&this.system.RemoveParticle(this),pa&&ya.Store(this),!0)}}],[{key:"USE_POOl",get:function(){return pa},set:function(t){pa=!!t}},{key:"Pool",get:function(){return ya}}]),t}(),ya=new ot(pt),pa=!0;function da(t){return(da="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function va(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ba(t){return(ba=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ma(t,e){return(ma=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ga(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}ya.Retrieve=function(t,e){this.PreRetrieve();var n=this.objects.pop();return n.Renew(t,e),n},ya.Flood(function(){},1e3);var wa=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==da(e)&&"function"!=typeof e?ga(t):e}(this,ba(e).call(this,t,n))).particles=[],r.deletionTimer=new ur(60),r.deletionTimer.onFinish.Add(r.HandleParticleDeletion,ga(ga(r))),r.deletionTimer.Start(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ma(t,e)}(e,Yo),function(t,e,n){e&&va(t.prototype,e),n&&va(t,n)}(e,[{key:"Process",value:function(){this.HandleParticles(),this.deletionTimer.Process()}},{key:"HandleParticles",value:function(){for(var t=this.particles,e=0;e<t.length;++e)t[e].Process()}},{key:"HandleParticleDeletion",value:function(){for(var t=this.particles,e=t[n],n=0;n<t.length;e=t[++n])e&&e.Destroy(!0)&&n--;this.deletionTimer.Start()}},{key:"AddParticle",value:function(t){return t.system=this,this.AddChild(t.entity),this.particles.push(t),t}},{key:"RemoveParticle",value:function(t){var e=this.particles,n=e.indexOf(t);if(-1!==n)return t.system=null,this.RemoveChild(t.entity),e.fickleSplice(n)}},{key:"Emit",value:function(t){for(var e=0;e<t.amount;++e)!0===fa.USE_POOL?this.AddParticle(fa.Pool.Retrieve(t,e)):this.AddParticle(new fa(t,e))}}]),e}(),Sa=function(t,e,n){t.setTransform(1,0,0,1,0,0),t.globalAlpha=.25,t.strokeStyle="rgba(255, 0, 255, 1)",t.fillStyle="rgba(0, 255, 0, 1)",null!=n&&(null!=n.alpha&&(t.globalAlpha=n.alpha),null!=n.strokeStyle&&(t.strokeStyle=n.strokeStyle),null!=n.fillStyle&&(t.fillStyle=n.fillStyle)),t.lineWidth=2,t.beginPath(),t.moveTo(e.tl.x,e.tl.y),t.lineTo(e.br.x,e.tl.y),t.lineTo(e.br.x,e.br.y),t.lineTo(e.tl.x,e.br.y),t.closePath(),null!=n?(null==n.noStroke&&t.stroke(),null==n.noFill&&t.fill()):(t.stroke(),t.fill())};function Aa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Oa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=0}return function(t,e,n){e&&Aa(t.prototype,e),n&&Aa(t,n)}(t,[{key:"Add",value:function(t){this.value|=t}},{key:"Remove",value:function(t){this.value=this.value&~t}},{key:"Compare",value:function(t){return 0!=(this.value&t)}},{key:"Holds",value:function(t){return(this.value&t)===t}},{key:"Toggle",value:function(t){this.value^=t}}]),t}();function Ta(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var xa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.NONE=0,this.next=1}return function(t,e,n){e&&Ta(t.prototype,e),n&&Ta(t,n)}(t,[{key:"Add",value:function(t){void 0===this[t=t.toUpperCase()]&&(this[t]=this.next,this.next=this.next<<1)}}]),t}(),ka=n(5);function _a(t){throw new Error('"'+t+'" is read-only')}function Ca(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Pa=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.orders=[],this.classUsed=null,this.amount=1,this.locked=!1}return function(t,e,n){e&&Ca(t.prototype,e),n&&Ca(t,n)}(t,[{key:"Many",value:function(t){return this.amount=t,this}},{key:"Bind",value:function(t,e){return e&&(this.orders.length=0),this.orders.push(t),this}},{key:"Make",value:function(t){var e=this.amount,n=Object(R.CreateIteratorArgs)(arguments,"@","i");if(!0===this.locked)throw new Error('"Make" called twice before end!');this.locked=!0,this.orders.length=0,this.classUsed=t;for(var r=0;r<e;++r)Ea(arguments,n,r),this.orders.push(new(Function.prototype.bind.apply(t,arguments)));return this}},{key:"Call",value:function(t,e,n){var r,i,o,a=this.orders,s=Object(R.IsArray)(e),u="string"==typeof t,l=a[c];_a("isArray"),s=Array.isArray(e),_a("isString"),u="string"==typeof t,!0===s&&(o=Object(R.CreateIteratorArgs)(e,"@","i"));for(var c=0;c<a.length;l=a[++c])!0===s&&(i=e.slice(),Object(R.ReplaceArgumentWithObjectValue)(l,i,"$"),Ea(i,o,c)),!1===u?Object(R.Nested)(l,n,!1,!0,t.apply(null,i)):(r=Object(R.Nested)(l,t,!0),Object(R.Nested)(l,t).apply(r,i));return this}},{key:"Cast",value:function(t,e){for(var n=this.orders,r="string"==typeof e,i=0;i<n.length;++i)!0===r&&"$"===e[0]&&(e=Object(R.Nested)(n[i],e)),Object(R.Nested)(n[i],t,!1,!0,e);return this}},{key:"Done",value:function(){return this.amount=1,this.locked=!1,this.orders[0]}},{key:"Mass",value:function(){return this.amount=1,this.locked=!1,this.orders}}]),t}(),Ea=function(t,e,n){var r=e[i];if(null!=e)for(var i=0;i<e.length;r=e[++i])if(-1!==r.iteratorIndex)if(r.mod&&r.val)switch(r.mod){case"+":t[r.iteratorIndex]=n+parseInt(r.val);break;case"*":t[r.iteratorIndex]=n*parseInt(r.val);break;case"-":t[r.iteratorIndex]=n-parseInt(r.val);break;case"/":t[r.iteratorIndex]=n/parseInt(r.val);break;default:throw new Error("Bad mod!")}else t[r.iteratorIndex]=n},Ra=n(3);function Ia(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Da=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.w=n,this.h=r,this.aspectRatio=Object(I.SimplifyAspectRatio)(n,r),this.onChange=new or,this.mode=i,this.stage=null,this.rootContainer=null,this.currentWidth=0,this.currentHeight=0,e.setAttribute("width",n),e.setAttribute("height",r),this.___bound___OnWindowRsize=this.OnWindowResize.bind(this),window.addEventListener("resize",this.___bound___OnWindowRsize)}return function(t,e,n){e&&Ia(t.prototype,e),n&&Ia(t,n)}(t,[{key:"OnWindowResize",value:function(){this[this.mode]()}},{key:"Trigger",value:function(){return this.OnWindowResize(),this}},{key:"Reconfigure",value:function(t,e,n){return this.w=t,this.h=e,this.mode=n,this}},{key:"BindStage",value:function(t){return this.stage=t,this}},{key:"BindRootContainer",value:function(t){return this.rootContainer=t,this}},{key:"SetCurrent",value:function(t,e){this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",e),this.currentWidth=t,this.currentHeight=e,null!==this.stage&&(this.stage.w=t,this.stage.h=e,this.stage.mouse&&this.stage.mouse.scale.Set(t/this.w,e/this.h),this.stage.touch&&this.stage.touch.scale.Set(t/this.w,e/this.h),!0===this.stage.usingWebGL&&this.stage.GLConfig()),null!==this.rootContainer&&this.rootContainer.scale.Set(t/this.w,e/this.h)}},{key:"FillScreen",value:function(){this.SetCurrent(window.innerWidth,window.innerHeight)}},{key:"KeepAspectRatio",value:function(){var t=window.innerWidth,e=t/this.aspectRatio[0]*this.aspectRatio[1];this.SetCurrent(t,e)}},{key:"KeepAspectRatioMIN",value:function(){var t,e=window.innerWidth;e<=this.w&&(e=this.w),t=e/this.aspectRatio[0]*this.aspectRatio[1],this.SetCurrent(e,t)}},{key:"KeepAspectRatioMAX",value:function(){var t,e=window.innerWidth;e>=this.w&&(e=this.w),t=e/this.aspectRatio[0]*this.aspectRatio[1],this.SetCurrent(e,t)}},{key:"KeepAspectRatioFIT",value:function(){var t=window.innerWidth,e=t/this.aspectRatio[0]*this.aspectRatio[1];e>=window.innerHeight&&(t=(e=window.innerHeight)/this.aspectRatio[1]*this.aspectRatio[0]),this.SetCurrent(t,e)}},{key:"Destroy",value:function(){window.removeEventListener("resize",this.___bound___OnWindowRsize)}}],[{key:"FILL_SCREEN",get:function(){return ja}},{key:"KEEP_ASPECT_RATIO",get:function(){return La}},{key:"KEEP_ASPECT_RATIO_MIN",get:function(){return Na}},{key:"KEEP_ASPECT_RATIO_MAX",get:function(){return Ga}},{key:"KEEP_ASPECT_RATIO_FIT",get:function(){return Ba}}]),t}(),ja="FillScreen",La="KeepAspectRatio",Na="KeepAspectRatioMIN",Ga="KeepAspectRatioMAX",Ba="KeepAspectRatioFIT";function Fa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ua=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes={},this.objects=[],this.convergence=[],this.objectCap=0,this.levelCap=0,this.level=0,this.aabb=null,this.hasSplit=!1,this.Set(e,n,r,i)}return function(t,e,n){e&&Fa(t.prototype,e),n&&Fa(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.aabb=t,this.level=e,this.objectCap=n,this.levelCap=r}},{key:"FromPool",value:function(e,n,r,i){return!0===Wa?Ha.Retrieve(e,n,r,i):new t(e,n,r,i)}},{key:"Store",value:function(){Ha.Store(this)}},{key:"Add",value:function(t){var e=0,n="",r=this.objects,i=this.nodes;if(!0!==this.hasSplit||null===(n=this.Marking(t))){if(r.push(t),this.level<this.levelCap&&r.length>this.objectCap)for(!1===this.hasSplit&&this.Split();e<r.length;)null!==(n=this.Marking(r[e]))?i[n].Add(r.fickleSplice(e)):++e}else i[n].Add(t)}},{key:"Converge",value:function(t){var e="",n=this.nodes,r=this.convergence;return r.length=0,r.push.apply(r,this.objects),!0===this.hasSplit&&(null!==(e=this.Marking(t))?r.push.apply(r,n[e].Converge(t)):(r.push.apply(r,n[Ma].Converge(t)),r.push.apply(r,n[Va].Converge(t)),r.push.apply(r,n[Xa].Converge(t)),r.push.apply(r,n[Ya].Converge(t)))),r}},{key:"Split",value:function(){var t=this.level+1,e=this.objectCap,n=this.levelCap,r=this.nodes,i=this.aabb;r[Ma]=this.FromPool(i.GetQuadrant(Ma),t,e,n),r[Va]=this.FromPool(i.GetQuadrant(Va),t,e,n),r[Xa]=this.FromPool(i.GetQuadrant(Xa),t,e,n),r[Ya]=this.FromPool(i.GetQuadrant(Ya),t,e,n),this.hasSplit=!0}},{key:"Dump",value:function(){var t=this.nodes;this.objects.length=0,!0===this.hasSplit&&(t[Ma].Dump(),t[Va].Dump(),t[Xa].Dump(),t[Ya].Dump(),!0===Wa&&(t[Ma].Store(),t[Va].Store(),t[Xa].Store(),t[Ya].Store())),this.nodes={},this.hasSplit=!1}},{key:"Marking",value:function(t){var e=this.nodes;return!0===e[Ma].aabb.ContainsAABB2D(t)?Ma:!0===e[Va].aabb.ContainsAABB2D(t)?Va:!0===e[Xa].aabb.ContainsAABB2D(t)?Xa:!0===e[Ya].aabb.ContainsAABB2D(t)?Ya:null}},{key:"ConcatNodes",value:function(t){var e=this.nodes;return void 0===t&&(t=[]),t.push(this),!1===this.hasSplit?t:(e[Ma].ConcatNodes(t),e[Va].ConcatNodes(t),e[Xa].ConcatNodes(t),e[Ya].ConcatNodes(t),t)}}],[{key:"pool",get:function(){return Ha}},{key:"USE_POOL",get:function(){return Wa},set:function(t){Wa=t}}]),t}(),Ma="TL",Va="TR",Xa="BL",Ya="BR",Ha=new ot(Ua),Wa=!0;function qa(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Ha.Retrieve=function(t,e,n,r){this.PreRetrieve();var i=this.objects.pop();return i.Set(t,e,n,r),i},Ha.Flood(function(t){t.Set(null,0,0,0)},500);var za=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.element.setAttribute("tabindex","1"),this.element.focus(),this.___bound___OnKeyDown=this.OnKeyDown.bind(this),this.___bound___OnKeyUp=this.OnKeyUp.bind(this),this.element.addEventListener("keydown",this.___bound___OnKeyDown),this.element.addEventListener("keyup",this.___bound___OnKeyUp),this.onDown=new or,this.onUp=new or}return function(t,e,n){e&&qa(t.prototype,e),n&&qa(t,n)}(t,[{key:"OnKeyDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.onDown.Dispatch(this.element,t)}},{key:"OnKeyUp",value:function(t){t.preventDefault(),t.stopPropagation(),this.onUp.Dispatch(this.element,t)}},{key:"Destroy",value:function(){this.element.removeEventListener("keydown",this.___bound___OnKeyDown),this.element.removeEventListener("keyup",this.___bound___OnKeyUp)}}]),t}();function Ka(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qa=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.position=new pt,this.scale=new pt(1,1),this.offset=new pt(n,r),this.eventData={position:this.position,native:null},this.offsets=[],this.___bound___OnMove=this.OnMove.bind(this),this.___bound___OnDown=this.OnDown.bind(this),this.___bound___OnUp=this.OnUp.bind(this),this.___bound___OnLeave=this.OnLeave.bind(this),this.___bound___OnWheel=this.OnWheel.bind(this),this.element.addEventListener("mousemove",this.___bound___OnMove),this.element.addEventListener("mousedown",this.___bound___OnDown),this.element.addEventListener("mouseup",this.___bound___OnUp),this.element.addEventListener("mouseleave",this.___bound___OnLeave),this.element.addEventListener("wheel",this.___bound___OnWheel,{passive:!0}),this.onMove=new or,this.onDown=new or,this.onUp=new or,this.onLeave=new or,this.onWheel=new or}return function(t,e,n){e&&Ka(t.prototype,e),n&&Ka(t,n)}(t,[{key:"OnMove",value:function(t){return this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onMove.Dispatch(this.element,this.eventData),!1}},{key:"OnDown",value:function(t){t.stopPropagation(),t.preventDefault(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onDown.Dispatch(this.element,this.eventData)}},{key:"OnUp",value:function(t){t.stopPropagation(),t.preventDefault(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onUp.Dispatch(this.element,this.eventData)}},{key:"OnLeave",value:function(t){t.stopPropagation(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onLeave.Dispatch(this.element,this.eventData)}},{key:"OnWheel",value:function(t){t.stopPropagation(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onWheel.Dispatch(this.element,this.eventData)}},{key:"CalculatePosition",value:function(t,e){var n=this.offsets,r=this.position;r.Set(t,e).Subtract(this.element.offsetLeft,this.element.offsetTop).SubtractV(this.offset).DivideV(this.scale);for(var i=0;i<n.length;++i)r.SubtractV(n[i])}},{key:"AddOffset",value:function(t){return this.offsets.push(t),this}},{key:"Destroy",value:function(){this.element.removeEventListener("mousemove",this.___bound___OnMove),this.element.removeEventListener("mousedown",this.___bound___OnDown),this.element.removeEventListener("mouseup",this.___bound___OnUp),this.element.removeEventListener("mouseleave",this.___bound___OnLeave),this.element.removeEventListener("wheel",this.___bound___OnWheel)}}],[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}}]),t}();function Ja(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Za=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.position=new pt,this.scale=new pt(1,1),this.offset=new pt(n,r),this.eventData={position:this.position,native:null},this.___bound___OnMove=this.OnMove.bind(this),this.___bound___OnStart=this.OnStart.bind(this),this.___bound___OnEnd=this.OnEnd.bind(this),this.___bound___OnCancel=this.OnCancel.bind(this),this.element.addEventListener("touchmove",this.___bound___OnMove),this.element.addEventListener("touchstart",this.___bound___OnStart,{passive:!0}),this.element.addEventListener("touchend",this.___bound___OnEnd),this.element.addEventListener("touchcancel",this.___bound___OnCancel),this.onMove=new or,this.onStart=new or,this.onEnd=new or,this.onCancel=new or}return function(t,e,n){e&&Ja(t.prototype,e),n&&Ja(t,n)}(t,[{key:"OnMove",value:function(t){return t.preventDefault(),t.stopPropagation(),this.CalculatePosition(t.touches.item(0).pageX,t.touches.item(0).pageY),this.eventData.native=t,this.onMove.Dispatch(this.element,this.eventData),!1}},{key:"OnStart",value:function(t){t.stopPropagation(),this.CalculatePosition(t.touches.item(0).pageX,t.touches.item(0).pageY),this.eventData.native=t,this.onStart.Dispatch(this.element,this.eventData)}},{key:"OnEnd",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onEnd.Dispatch(this.element,this.eventData)}},{key:"OnCancel",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onCancel.Dispatch(this.element,this.eventData)}},{key:"CalculatePosition",value:function(t,e){var n=this.position;n.Set(t,e),n.Subtract(this.element.offsetLeft,this.element.offsetTop),n.SubtractV(this.offset),n.DivideV(this.scale)}},{key:"Destroy",value:function(){this.element.removeEventListener("touchmove",this.___bound___OnMove),this.element.removeEventListener("touchstart",this.___bound___OnStart),this.element.removeEventListener("touchend",this.___bound___OnEnd),this.element.removeEventListener("touchcancel",this.___bound___OnCancel)}}],[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}}]),t}();function $a(t){return($a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ts(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function es(t){return(es=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ns(t,e){return(ns=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function rs(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var is=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==$a(e)&&"function"!=typeof e?rs(t):e}(this,es(e).call(this,t.x,t.y)),"string"==typeof t.canvas&&(t.canvas=document.getElementById(t.canvas)),n.canvas=t.canvas,n.w=t.canvas.width,n.h=t.canvas.height,n.id=null,n.backgroundColor="rgba(10,20,30,1)",n.clear=!0,n.fill=!0,n.usingWebGL=!1,n.positionReconfiguration=new pt(t.x,t.y),n.canvasManager=null,n.mouse=null,n.touch=null,n.ticker=null,"WebGL"===t.mode){if(n.gl=t.canvas.getContext("webgl",{antialias:t.antialias,preserveDrawingBuffer:!0}),null==n.gl&&(n.gl=t.canvas.getContext("experimental-webgl")),null==n.gl)throw new Error("WebGL is not supported!");n.gl.clearColor(.0392156862745098,.0784313725490196,.11764705882352941,1),n.usingWebGL=!0,!0!==t.noTicker&&(n.ticker=new cr(n.GLProcess.bind(rs(rs(n))),60,t.halt)),n.GLConfig(n.gl)}else n.rc=t.canvas.getContext("2d"),!0!==t.noTicker&&(n.ticker=new cr(n.Process.bind(rs(rs(n))),60,t.halt));return null!=t.backgroundColor&&(n.backgroundColor=t.backgroundColor),!1===t.clear&&(n.clear=!1),!1===t.fill&&(n.fill=!1),null!=t.id&&(n.id=t.id),n.onProcess=new or,!0!==t.noMouse&&(n.mouse=new Qa(t.canvas,t.x,t.y)),!0!==t.noKeyboard&&(n.keyboard=new za(t.canvas)),!0!==t.noTouch&&(n.touch=new Za(t.canvas,t.x,t.y)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ns(t,e)}(e,Yo),function(t,e,n){e&&ts(t.prototype,e),n&&ts(t,n)}(e,[{key:"PreDraw",value:function(t){t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,t.globalCompositeOperation=_e,!0===this.fill?(t.fillStyle=this.backgroundColor,t.fillRect(0,0,this.w,this.h)):!0===this.clear&&t.clearRect(0,0,this.w,this.h)}},{key:"GLConfig",value:function(t){null==t&&(t=this.gl),this.position.SetSame(0),this.scale.Set(2/this.w,-2/this.h),this.position.Add(-1,1),this.position.Add(this.positionReconfiguration.x*this.scale.x,this.positionReconfiguration.y*this.scale.y),this.UpdateTransform(),t.viewport(0,0,this.w,this.h),t.enable(t.BLEND),t.disable(t.DEPTH_TEST),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}},{key:"GLPreDraw",value:function(t){!0===this.clear&&t.clear(t.COLOR_BUFFER_BIT)}},{key:"GLPostDraw",value:function(t){t.flush()}},{key:"Process",value:function(t){this.Draw(this.rc),this.onProcess.Dispatch(this,t)}},{key:"GLProcess",value:function(t){this.GLDraw(this.gl),this.GLPostDraw(this.gl),this.onProcess.Dispatch(this,t)}},{key:"MixedProcess",value:function(t){!0===this.usingWebGL?(this.GLDraw(this.gl),this.GLPostDraw(this.gl)):this.Draw(this.rc),this.onProcess.Dispatch(this,t)}},{key:"Destroy",value:function(){this.Dump(),this.keyboard.Destroy(),this.mouse.Destroy(),this.touch.Destroy(),null!=this.ticker&&this.ticker.Stop()}}]),e}();function os(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var as=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stages=[],this.currentStage=null,this.onlyCurrent=!1,this.options=null,this.ticker=new cr(this.Process.bind(this),60,e.halt),this.SetOptions(e)}return function(t,e,n){e&&os(t.prototype,e),n&&os(t,n)}(t,[{key:"SetOptions",value:function(t){null!=t&&(this.options=t)}},{key:"CreateStage2D",value:function(t){var e,n=document.createElement("canvas");"string"==typeof t&&(e=t,t=null),null==t&&(t=this.options),null==t&&(t={}),null!==e&&(t.id=e),null!=t.width&&(n.width=t.width),null!=t.height&&(n.height=t.height),null!=t.className&&(n.className=t.className),null==t.rootNode&&(t.rootNode=document.body),t.rootNode.appendChild(n),t.canvas=n,t.noTicker=!0,t.halt=!0;var r=new is(t);return t.id=null,t.canvas=null,this.stages.push(r),r}},{key:"GetStages",value:function(){for(var t=this.stages,e=[],n=0;n<t.length;++n)for(var r=0;r<arguments.length;++r)t[n].id===arguments[r]&&e.push(t[n]);return e}},{key:"Process",value:function(t){for(var e=this.stages,n=0;n<e.length;++n)e[n].MixedProcess(t)}},{key:"Destroy",value:function(){for(var t=this.stages,e=0;e<t.length;++e)t[e].Destroy();this.ticker.Stop()}}]),t}();function ss(t){return(ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function us(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ls(t,e){return!e||"object"!==ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cs(t){return(cs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function hs(t,e){return(hs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var fs=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=ls(this,cs(e).call(this,t,n,null==r?ys:r,i))).pattern=null,o.patternOffset=new pt(0,0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&hs(t,e)}(e,ua),function(t,e,n){e&&us(t.prototype,e),n&&us(t,n)}(e,[{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display&&null!==this.pattern&&(t.globalAlpha=this.tint.channel[3],t.globalCompositeOperation=this.gco,t.fillStyle=this.pattern,t.beginPath(),t.rect(0,0,this.w,this.h),t.closePath(),t.translate(this.patternOffset.x,this.patternOffset.y),t.fill()),this.children.length>0&&this.DrawChildren(t))}},{key:"GeneratePattern",value:function(t,e,n){null==this.programController?(this.pattern=t.createPattern(this.texture.image,null),this.w=e,this.h=n,this.scale.SetSame(1)):(this.width=e,this.height=n,this.textureTransformation.SetTransform(0,0,this.scale.x,this.scale.y))}},{key:"OffsetPattern",value:function(t,e){this.patternOffset.Add(t,e),this.textureTransformation.Translate(-t/this.w,-e/this.h)}},{key:"SetPatternOffset",value:function(t,e){this.patternOffset.Set(t,e),this.textureTransformation.TranslateTo(-t/this.w,-e/this.h)}},{key:"GetPatternOffset",value:function(){return this.patternOffset}}],[{key:"BUILD_DEFAULT_TEXTURE",value:function(t){if(!0===ps)throw new Error("Function can only be called once!");ys=new Br(U(F(function(){var t=new er([0,0,64,0,64,64,0,64,0,0,32,32,64,0,32,32,64,64,32,32,0,64]);return t.ComputeBounds(),t.style.fill.color="#234d20",t.style.stroke.lineWidth=3,new ea(0,0,t)}),64,64,t),"__DEFAULT_TILESPRITE_TEXTURE__",64,64,64,64),ps=!0}},{key:"DEFAULT_TEXTURE",get:function(){return ys}}]),e}(),ys=null,ps=!1;function ds(t){return(ds="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vs(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bs(t,e){return!e||"object"!==ds(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ms(t){return(ms=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function gs(t,e){return(gs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ws=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=bs(this,ms(e).call(this,t,n))).id=parseInt(r.id),i.cx=parseInt(r.x),i.cy=parseInt(r.y),i.w=parseInt(r.width),i.h=parseInt(r.height),i.xoffset=parseInt(r.xoffset),i.yoffset=parseInt(r.yoffset),i.xadvance=parseInt(r.xadvance),i.yadvance=0,i.kernings=[],i.translation=new Po,i.transformation=new Po,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&gs(t,e)}(e,No),function(t,e,n){e&&vs(t.prototype,e),n&&vs(t,n)}(e,[{key:"Draw",value:function(t,e){t.drawImage(e,this.cx,this.cy,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}},{key:"GLDrawAuto",value:function(t,e,n){this.UpdateMatrices(),t.Execute(this.transform.globalTransform.AsArray(!0),this.translation.AsArray(!0),this.transformation.AsArray(!0),e,n)}},{key:"GLDraw",value:function(t,e,n){t.Execute(this.transform.globalTransform.AsArray(!0),this.translation.AsArray(!0),this.transformation.AsArray(!0),e,n)}},{key:"ApplyKernings",value:function(t){for(var e,n=0;n<t.length;++n)e=t[n].attributes,parseInt(e.first)===this.id&&this.kernings.push(parseInt(e.first),parseInt(e.second),parseInt(e.amount))}},{key:"Crunch",value:function(t){if(this.position.SetSame(0),null!=t&&(this.x=t.x+t.xadvance,this.y=this.yadvance=t.yadvance,t.kernings&&t.kernings.length>0&&this.kernings.length>0))for(var e=this.kernings,n=0;n<e.length;n+=3)if(e[n+1]===t.id){this.x+=e[n+2];break}this.position.Add(this.xoffset,this.yoffset)}},{key:"UpdateMatrices",value:function(){if(null!=this.parent){var t=this.parent.texture,e=this.width/t.fw,n=this.height/t.fh;this.UpdateTransform(),this.translation.SetTransform(0,0,e,n),this.transformation.SetTransform(e*this.cx/this.width,n*this.cy/this.height,e,n)}}}]),e}();function Ss(t){return(Ss="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function As(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Os(t,e){return!e||"object"!==Ss(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ts(t){return(Ts=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xs(t,e){return(xs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ks=function(t){function e(t,n,r,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=Os(this,Ts(e).call(this,t,n,r,a))).fontData=i,s.lineHeight=i.font.common.attributes.lineHeight,s.chars=[],s.maxWidth=1024,s.text="",s.autoUpdateChars=!0,null!=o&&(s.text=o),s.ComputeText(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xs(t,e)}(e,ua),function(t,e,n){e&&As(t.prototype,e),n&&As(t,n)}(e,[{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display&&(t.globalAlpha=this.alpha,t.globalCompositeOperation=this.gco,this.DrawText(t)),this.children.length>0&&this.DrawChildren(t))}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),!0===this.display&&null!==this.programController&&this.GLDrawText(t),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t)))}},{key:"DrawText",value:function(t){for(var e=this.chars,n=this.texture.image,r=0;r<e.length;++r)e[r].Draw(t,n)}},{key:"GLDrawText",value:function(){var t=this.chars;if(!0===this.autoUpdateChars)for(var e=0;e<t.length;++e)t[e].GLDrawAuto(this.programController,this.tint.channel,this.texture.uniformId);else for(e=0;e<t.length;++e)t[e].GLDraw(this.programController,this.tint.channel,this.texture.uniformId)}},{key:"ComputeText",value:function(){var t,e,n,r=0,i=0,o=!1,a=0,s=0,u=0,l=0,c=this.chars,h=this.text;this.UpdateTransform(),c.length=0,this.fontData.font.kernings&&(t=this.fontData.font.kernings.kerning);for(var f=0;f<h.length;++f){var y=h.charCodeAt(f);n=c[f-1-i],10!==y?(e=new ws(0,0,this.GetCharDataById(y)),null!=t&&e.ApplyKernings(t),e.Crunch(n),u=e.position.x+e.width,l=e.position.y+e.height,(u>this.maxWidth||!0===o)&&(e.position.SetSame(0),e.yadvance=this.lineHeight*++r,e.position.Add(e.xoffset,e.yoffset+e.yadvance),o=!1),u>a&&(a=u),l>s&&(s=l),e.parent=this,e.UpdateMatrices(),c.push(e)):(i++,o=!0)}this.w=a,this.h=s}},{key:"UpdateChars",value:function(){for(var t=this.chars,e=0;e<t.length;++e)t[e].UpdateMatrices()}},{key:"GetCharDataById",value:function(t){for(var e=this.fontData.font.chars.char,n=0;n<e.length;++n)if(parseInt(e[n].attributes.id)===t)return e[n].attributes}},{key:"UpdateInBuffer",value:function(){throw new Error(_s)}},{key:"GetBufferData",value:function(){throw new Error(_s)}}]),e}(),_s="Cannot access buffer data directly on BitmapText!";function Cs(t){return(Cs="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ps(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Es(t,e){return!e||"object"!==Cs(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Rs(t){return(Rs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Is(t,e){return(Is=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Ds=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=Es(this,Rs(e).call(this,t,n))).text=r,o.style=En(i),o.maxWidth=void 0,o.alpha=1,o.gco=_e,o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Is(t,e)}(e,Yo),function(t,e,n){e&&Ps(t.prototype,e),n&&Ps(t,n)}(e,[{key:"Draw",value:function(t){if(this.PreDraw(t),!0===this.render){if(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display){var e=this.style;!0===e.shadow.applied&&e.shadow.Apply(t),!0===e.text.applied&&(e.text.Apply(t),t.globalAlpha=this.alpha,t.globalCompositeOperation=this.gco,t.fillText(this.text,0,0,this.maxWidth),t.strokeText(this.text,0,0,this.maxWidth))}this.children.length>0&&this.DrawChildren(t)}}},{key:"IntersectsPoint",value:function(){return!1}}]),e}();function js(t){return(js="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ls(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Ns(t,e){return!e||"object"!==js(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gs(t){return(Gs=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Bs(t,e){return(Bs=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Fs=Math.cos,Us=Math.sin,Ms=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Ns(this,Gs(e).call(this,0,0))).focus=t,r.target=n,r.velocity=new pt(0,0),r.force=new pt(1,1),r.stopRadiusSq=1e3,r.EPSILON=2e-4,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Bs(t,e)}(e,Yo),function(t,e,n){e&&Ls(t.prototype,e),n&&Ls(t,n)}(e,[{key:"Process",value:function(){var t=this.target;if(null!=t){Xs.SetV(t.position),Xs.Invert(),Xs.AddV(this.focus),Vs.SetV(this.position).SubtractV(Xs);var e=Vs.GetMagnitudeSquared();if(e<this.stopRadiusSq)return;e*=this.EPSILON;var n=Vs.GetAngle();this.velocity.Set(e*Fs(n),e*Us(n)).MultiplyV(this.force),this.position.SubtractV(this.velocity)}}},{key:"SetTarget",value:function(t){return this.target=t,this}}]),e}(),Vs=new pt(0,0),Xs=new pt(0,0);n.d(e,"Math",function(){return I}),n.d(e,"Assert",function(){return Dr.a}),n.d(e,"Pool",function(){return ot}),n.d(e,"FlagList",function(){return Oa}),n.d(e,"FlagEnum",function(){return xa}),n.d(e,"Cache",function(){return Lr}),n.d(e,"Glob",function(){return ka.a}),n.d(e,"Maker",function(){return Pa}),n.d(e,"Utility",function(){return R}),n.d(e,"Cipher",function(){return r}),n.d(e,"BrowserUtility",function(){return i}),n.d(e,"Style",function(){return v}),n.d(e,"Time",function(){return m}),n.d(e,"CharacterSets",function(){return Ra.a}),n.d(e,"CanvasManager",function(){return Da}),n.d(e,"Vector2D",function(){return pt}),n.d(e,"Matrix2D",function(){return Po}),n.d(e,"Transform2D",function(){return jo}),n.d(e,"QuadtreeNode",function(){return Ua}),n.d(e,"Ease",function(){return o}),n.d(e,"Collision",function(){return c}),n.d(e,"Geom",function(){return f}),n.d(e,"Path",function(){return b}),n.d(e,"CoreEntity2D",function(){return No}),n.d(e,"Container2D",function(){return Yo}),n.d(e,"Stage2D",function(){return is}),n.d(e,"Stadium",function(){return as}),n.d(e,"Graphic2D",function(){return ea}),n.d(e,"Sprite",function(){return ua}),n.d(e,"Tilesprite",function(){return fs}),n.d(e,"Char",function(){return ws}),n.d(e,"BitmapText",function(){return ks}),n.d(e,"Text",function(){return Ds}),n.d(e,"Camera2D",function(){return Ms}),n.d(e,"Shader",function(){return g}),n.d(e,"Load",function(){return w}),n.d(e,"Controller",function(){return A}),n.d(e,"CP",function(){return O}),n.d(e,"Motion",function(){return T}),n.d(e,"Particle",function(){return k}),n.d(e,"Texture",function(){return _}),n.d(e,"Animator",function(){return C}),n.d(e,"Debug",function(){return E}),n(13)}])});