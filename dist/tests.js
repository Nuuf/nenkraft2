/**
* @package     Nenkraft2
* @author      Gustav 'Nuuf' Åberg <gustavrein@gmail.com>
* @version     0.1.1
* @copyright   (C) 2018 Gustav 'Nuuf' Åberg
* @license     {@link https://github.com/Nuuf/nenkraft2/blob/master/LICENSE}
*/!function(t){var e={};function n(r){if(e[r])return e[r].exports;var i=e[r]={i:r,l:!1,exports:{}};return t[r].call(i.exports,i,i.exports,n),i.l=!0,i.exports}n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)n.d(r,i,function(e){return t[e]}.bind(null,i));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=23)}([function(t,e,n){"use strict";n.d(e,"a",function(){return f});var r=n(8);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=Math.ceil,a=Math.round,s=Math.abs,u=Math.sqrt,l=Math.atan2,c=Math.cos,h=Math.sin,f=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x=e,this.y=n}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"Copy",value:function(){return!0===p?d.Retrieve(this.x,this.y):new t(this.x,this.y)}},{key:"FromPool",value:function(e,n){return!0===p?d.Retrieve(e,n):new t(e,n)}},{key:"AbsoluteCopy",value:function(){var t=this.Copy();return t.Positive(),t}},{key:"SetV",value:function(t){return this.x=t.x,this.y=t.y,this}},{key:"Set",value:function(t,e){return this.x=t,this.y=e,this}},{key:"SetSame",value:function(t){return this.x=t,this.y=t,this}},{key:"Is0",value:function(){return 0===this.x&&0===this.y}},{key:"AddVC",value:function(t){return this.Copy().AddV(t)}},{key:"AddV",value:function(t){return this.x+=t.x,this.y+=t.y,this}},{key:"Add",value:function(t,e){return this.x+=t,this.y+=e,this}},{key:"SubtractVC",value:function(t){return this.Copy().SubtractV(t)}},{key:"SubtractV",value:function(t){return this.x-=t.x,this.y-=t.y,this}},{key:"Subtract",value:function(t,e){return this.x-=t,this.y-=e,this}},{key:"MultiplyVC",value:function(t){return this.Copy().MultiplyV(t)}},{key:"MultiplyV",value:function(t){return this.x*=t.x,this.y*=t.y,this}},{key:"Multiply",value:function(t,e){return this.x*=t,this.y*=e,this}},{key:"DivideVC",value:function(t){return this.Copy().DivideV(t)}},{key:"DivideV",value:function(t){return this.x/=t.x,this.y/=t.y,this}},{key:"Divide",value:function(t,e){return this.x/=t,this.y/=e,this}},{key:"Normalize",value:function(){var t=this.GetMagnitude();return this.Divide(t,t)}},{key:"Positive",value:function(){return this.x=s(this.x),this.y=s(this.y),this}},{key:"Negative",value:function(){return this.x=-s(this.x),this.y=-s(this.y),this}},{key:"Invert",value:function(){return this.x=-this.x,this.y=-this.y,this}},{key:"Rotate",value:function(t){var e=h(t),n=c(t),r=this.x,i=this.y;return this.x=r*n-i*e,this.y=r*e+i*n,this}},{key:"RotateAroundV",value:function(t,e){return this.SubtractV(t).Rotate(e).AddV(t)}},{key:"RotateAround",value:function(t,e,n){return this.SubtractV(t,e).Rotate(n).AddV(t,e)}},{key:"RotateAbsolute",value:function(t){return this.Rotate(t-this.GetAngle())}},{key:"RotateAbsoluteAroundV",value:function(t,e){return this.SubtractV(t).RotateAbsolute(e).AddV(t)}},{key:"RotateAbsoluteAround",value:function(t,e,n){return this.SubtractV(t,e).RotateAbsolute(n).AddV(t,e)}},{key:"PushFromV",value:function(t,e){var n=this.Copy();return n.SubtractV(t).Normalize().Multiply(e,e),this.AddV(n)}},{key:"PushFrom",value:function(t,e,n){var r=this.Copy();return r.SubtractV(t,e).Normalize().Multiply(n,n),this.AddV(r)}},{key:"GetWeightedAverageV",value:function(t,e){return this.FromPool(this.x*(1-e)+t.x*e,this.y*(1-e)+t.y*e)}},{key:"GetWeightedAverage",value:function(t,e,n){return this.FromPool(this.x*(1-n)+t*n,this.y*(1-n)+e*n)}},{key:"GetAngle",value:function(){return l(this.y,this.x)}},{key:"GetAngleBetweenV",value:function(t){return l(this.y-t.y,this.x-t.x)}},{key:"GetAngleBetween",value:function(t,e){return l(this.y-e,this.x-t)}},{key:"GetDotV",value:function(t){return this.x*t.x+this.y*t.y}},{key:"GetDot",value:function(t,e){return this.x*t+this.y*e}},{key:"GetCrossV",value:function(t){return this.x*t.y+this.y*t.x}},{key:"GetCross",value:function(t,e){return this.x*e+this.y*t}},{key:"GetMagnitudeSquared",value:function(){return this.x*this.x+this.y*this.y}},{key:"GetMagnitude",value:function(){return u(this.x*this.x+this.y*this.y)}},{key:"GetDistanceSquaredV",value:function(t){return this.Copy().SubtractV(t).GetMagnitudeSquared()}},{key:"GetDistanceSquared",value:function(t,e){return this.Copy().Subtract(t,e).GetMagnitudeSquared()}},{key:"GetDistanceV",value:function(t){return this.Copy().SubtractV(t).GetMagnitude()}},{key:"GetDistance",value:function(t,e){return this.Copy().Subtract(t,e).GetMagnitude()}},{key:"GetPerpendicularCCWV",value:function(t){return this.FromPool(-(t.y-this.y),t.x-this.x)}},{key:"GetPerpendicularCCWV",value:function(t,e){return this.FromPool(-(e-this.y),t-this.x)}},{key:"GetPerpendicularCWV",value:function(t){return this.FromPool(t.y-this.y,-(t.x-this.x))}},{key:"GetPerpendicularCW",value:function(t,e){return this.FromPool(e-this.y,-(t-this.x))}},{key:"GetNormalAV",value:function(t){return this.GetPerpendicularCCWV(t).Normalize()}},{key:"GetNormalA",value:function(t,e){return this.GetPerpendicularCCW(t,e).Normalize()}},{key:"GetNormalBV",value:function(t){return this.GetPerpendicularCWV(t).Normalize()}},{key:"GetNormalB",value:function(t,e){return this.GetPerpendicularCW(t,e).Normalize()}},{key:"GetMidpointV",value:function(t){return this.Copy().AddV(t).Divide(2,2)}},{key:"GetMidpoint",value:function(t,e){return this.Copy().Add(t,e).Multiply(.5,.5)}},{key:"IsEqualToV",value:function(t){return this.x===t.x&&this.y===t.y}},{key:"IsEqualTo",value:function(t,e){return this.x===t&&this.y===e}},{key:"GetProjectionOntoV",value:function(t){var e=this.GetDotV(t);if(0===e)return this.FromPool(0,0);var n=t.GetMagnitude(),r=e/(n*n),i=t.Copy();return i.Multiply(r,r),i}},{key:"GetProjectionOnto",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);if(0===r)return this.FromPool(0,0);var i=n.GetMagnitude(),o=r/(i*i);return n.Multiply(o,o),n}},{key:"GetReflectionV",value:function(t){var e=t.Copy(),n=this.GetDotV(e);return e.Multiply(2,2),e.Multiply(n,n),this.SubtractVC(e)}},{key:"GetReflection",value:function(t,e){var n=this.Copy();n.Set(t,e);var r=this.GetDotV(n);return n.Multiply(2,2),n.Multiply(r,r),this.SubtractVC(n)}},{key:"Store",value:function(){return d.Store(this),this}},{key:"AddTo",value:function(t){for(var e=0,n=t.length;e<n;++e)t[e].AddV(this);return this}},{key:"Floor",value:function(){return this.x=0|this.x,this.y=0|this.y,this}},{key:"Ceil",value:function(){return this.x=o(this.x),this.y=o(this.y),this}},{key:"Round",value:function(){return this.x=a(this.x),this.y=a(this.y),this}},{key:"GetMinMaxDot",value:function(t){for(var e=1/0,n=-e,r=0,i=0,o=t.length,a=this.Copy();i<o;++i)(r=t[i].GetDotV(this))>n&&(n=r),r<e&&(e=r);return a.Set(e,n),a}}],[{key:"SortMinMag",value:function(t,e){return t.GetMagnitudeSquared()-e.GetMagnitudeSquared()}},{key:"pool",get:function(){return d}},{key:"USE_POOL",get:function(){return p},set:function(t){p=t}}]),t}(),d=new r.a(f),p=!0;d.Retrieve=function(t,e){this.PreRetrieve();var n=this.objects.pop();return n.Set(t,e),n},d.Flood(function(t){t.Set(0,0)},1e3)},function(t,e,n){"use strict";n.r(e);var r={};n.r(r),n.d(r,"CCH1",function(){return C}),n.d(r,"CCH1Decipher",function(){return E});var i={};n.r(i),n.d(i,"GenerateSimpleBase64PNG",function(){return P}),n.d(i,"ImageFromDataURL",function(){return R}),n.d(i,"ParsedXMLToJSON",function(){return _}),n.d(i,"XMLToJSON",function(){return D}),n.d(i,"DownloadAsJSON",function(){return I});var o={};n.r(o),n.d(o,"Linear",function(){return B}),n.d(o,"QuadIn",function(){return F}),n.d(o,"QuadOut",function(){return U}),n.d(o,"QuadInOut",function(){return V}),n.d(o,"SineIn",function(){return M}),n.d(o,"SineOut",function(){return X}),n.d(o,"SineInOut",function(){return Y}),n.d(o,"CircIn",function(){return H}),n.d(o,"CircOut",function(){return W}),n.d(o,"CircInOut",function(){return q});var a={};n.r(a),n.d(a,"Result",function(){return Q}),n.d(a,"CollideRel",function(){return J});var s={};n.r(s),n.d(s,"Result",function(){return rt}),n.d(s,"CollideRel",function(){return it}),n.d(s,"ElasticResponse",function(){return ot});var u={};n.r(u),n.d(u,"Result",function(){return vt}),n.d(u,"CollideRel",function(){return bt}),n.d(u,"ReflectingResponse",function(){return mt});var l={};n.r(l),n.d(l,"Result",function(){return Ot}),n.d(l,"CollideRel",function(){return kt}),n.d(l,"AxisSeparates",function(){return Ct});var c={};n.r(c),n.d(c,"AABB2DvsAABB2D",function(){return a}),n.d(c,"CirclevsCircle",function(){return s}),n.d(c,"CirclevsLine",function(){return u}),n.d(c,"PolygonvsPolygon",function(){return l});var h={};n.r(h),n.d(h,"Rectangular",function(){return jt}),n.d(h,"Isosceles",function(){return Lt}),n.d(h,"Cyclic",function(){return Nt}),n.d(h,"Equilateral",function(){return Gt}),n.d(h,"Star",function(){return Bt}),n.d(h,"Butterfly",function(){return Ft}),n.d(h,"Supershape",function(){return Ut});var f={};n.r(f),n.d(f,"AABB2D",function(){return Vt.a}),n.d(f,"Circle",function(){return Mt.a}),n.d(f,"Line2D",function(){return Xt.a}),n.d(f,"Ray2D",function(){return Xt.a}),n.d(f,"Polygon2D",function(){return Yt.a}),n.d(f,"PolygonConstruction",function(){return h});var d={};n.r(d),n.d(d,"Timer",function(){return $t}),n.d(d,"Ticker",function(){return ee});var p={};n.r(p),n.d(p,"TEXTURE_2D",function(){return me}),n.d(p,"TEXTURE_2D_BATCH",function(){return ge}),n.d(p,"PIXEL_BATCH",function(){return we}),n.d(p,"RECTANGLE",function(){return Ae}),n.d(p,"CIRCLE",function(){return Se}),n.d(p,"LINE2D",function(){return xe});var y={};n.r(y),n.d(y,"ImageLoader",function(){return _e}),n.d(y,"SpritesheetLoader",function(){return Fe}),n.d(y,"XHRLoader",function(){return Ie});var v={};n.r(v),n.d(v,"GLProgramController",function(){return Ve}),n.d(v,"GLCircleProgramController",function(){return an}),n.d(v,"GLLine2DProgramController",function(){return yn}),n.d(v,"GLPixelBatchProgramController",function(){return Tn}),n.d(v,"GLRectangleProgramController",function(){return In}),n.d(v,"GLTexture2DBatchProgramController",function(){return Mn}),n.d(v,"GLTexture2DProgramController",function(){return Jn});var b={};n.r(b),n.d(b,"ProgramController",function(){return v});var m={};n.r(m),n.d(m,"Option",function(){return $n}),n.d(m,"Command",function(){return er}),n.d(m,"Registry",function(){return or});var g={};n.r(g),n.d(g,"Motion",function(){return sr}),n.d(g,"Manager",function(){return cr});var w={};n.r(w),n.d(w,"Particle2D",function(){return ai}),n.d(w,"Oscillation",function(){return dr}),n.d(w,"System",function(){return pi});var A={};n.r(A),n.d(A,"Particle2D",function(){return w});var S,x,T,O=n(2),k=n(3);function C(t,e){var n,r,i=0,o=t.split(""),a=o.length,s=[];for(e=void 0===e?1:e;i<a;++i)n=((n=o[i]).charCodeAt(0)+e).toString(2),r=Object(O.RandomInteger)(1,9),s.push(r+"x"+n.replace(/1/g,r));return s.join(" ")}function E(t,e){var n,r=0,i=t.split(" "),o=i.length,a=[];for(e=void 0===e?1:e;r<o;++r)n=(n=i[r]).slice(2-n.length),a.push(String.fromCharCode(parseInt(n.replace(/[2-9]/g,"1"),2)-e));return a.join("")}function P(t,e,n){var r=t();return null==S&&(S=document.createElement("canvas"),x=S.getContext("2d")),x.clearRect(0,0,S.width,S.height),S.width=r.w,S.height=r.h,null!=e&&(S.width=e),null!=n&&(S.height=n),x.setTransform(1,0,0,1,0,0),r.Draw(x),S.toDataURL("image/png")}function R(t,e,n,r){var i=new Image;return i.width=e,i.height=n,i.onload=r,i.src=t,i}function _(t,e){var n,r,i,o,a,s,u={},l=t.childNodes,c=l.length;if(1===t.nodeType){if((c=(r=t.attributes).length)>0)for(u.attributes={},n=0,i=r.item(n);n<c;i=r.item(++n))u.attributes[i.nodeName]=i.nodeValue}else 3===t.nodeType&&(/^\s*$/g.exec(t.nodeValue)||(u=t.nodeValue,!0===e&&(u=u.replace(/^\s+|\s+&|\n/gim,""))));if(null!=l)for(c=l.length,n=0,o=l.item(n);n<c;o=l.item(++n))void 0===u[o.nodeName]?u[o.nodeName]=_(o,e):(void 0===u[o.nodeName].push&&(s=u[o.nodeName],u[o.nodeName]=[],Object(O.IsObjectEmpty)(s)||u[o.nodeName].push(s)),a=_(o,e),Object(O.IsObjectEmpty)(a)||u[o.nodeName].push(a));return u["#text"]&&0===u["#text"].length&&delete u["#text"],u}function D(t,e){return null==T&&(T=new DOMParser),_(T.parseFromString(t,"text/xml"),e)}function I(t,e){var n="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(t)),r=document.createElement("a");r.setAttribute("href",n),r.setAttribute("download",e+".json"),r.click()}var j=Math.sin,L=Math.cos,N=Math.sqrt,G=Math.PI,B=function(t,e,n,r){return n*t/r+e},F=function(t,e,n,r){return n*(t/=r)*t+e},U=function(t,e,n,r){return-n*(t/=r)*(t-2)+e},V=function(t,e,n,r){return(t/=.5*r)<1?.5*n*t*t+e:.5*-n*(--t*(t-2)-1)+e},M=function(t,e,n,r){return-n*L(t/r*(.5*G))+n+e},X=function(t,e,n,r){return n*j(t/r*(.5*G))+e},Y=function(t,e,n,r){return.5*-n*(L(G*t/r)-1)+e},H=function(t,e,n,r){return-n*(N(1-(t/=r)*t)-1)+e},W=function(t,e,n,r){return t/=r,n*N(1- --t*t)+e},q=function(t,e,n,r){return(t/=.5*r)<1?.5*-n*(N(1-t*t)-1)+e:.5*n*(N(1-(t-=2)*t)+1)+e},z=n(0);function K(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Q=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new z.a(0,0),this.occured=!1}return function(t,e,n){e&&K(t.prototype,e),n&&K(t,n)}(t,[{key:"Reset",value:function(){this.mtv.SetSame(0),this.occured=!1}}]),t}(),J=function(t,e,n){var r=t.shape,i=r.w,o=r.h,a=t.anchor,s=e.shape,u=s.w,l=s.h,c=e.anchor;Z.Set(r.tl.x-t.relative.x,r.tl.y-t.relative.y),$.Set(s.tl.x-e.relative.x,s.tl.y-e.relative.y);var h=$.x+i,f=Z.x+u,d=$.y+o,p=Z.y+l;return void 0!=a&&(Z.x+=a.x*i,Z.y+=a.y*o),void 0!=c&&($.x+=c.x*u,$.y+=c.y*l),Z.x<h&&$.x<f&&Z.y<d&&$.y<p&&(void 0!=n&&(tt[0].Set(Z.x-h,0),tt[1].Set(f-$.x,0),tt[2].Set(0,Z.y-d),tt[3].Set(0,p-$.y),tt.sort(z.a.SortMinMag),n.mtv.SetV(tt[0]),n.occured=!0),!0)},Z=new z.a(0,0),$=new z.a(0,0),tt=[new z.a(0,0),new z.a(0,0),new z.a(0,0),new z.a(0,0)];function et(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var nt=Math.sqrt,rt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new z.a(0,0),this.poc={a:new z.a(0,0),b:new z.a(0,0),c:new z.a(0,0)},this.mtd=0,this.delta=new z.a(0,0),this.occured=!1}return function(t,e,n){e&&et(t.prototype,e),n&&et(t,n)}(t,[{key:"Reset",value:function(){this.poc.SetSame(0),this.poc.SetSame(0),this.poc.SetSame(0),this.mtv.SetSame(0),this.mtd=0,this.delta.SetSame(0),this.occured=!1}}]),t}(),it=function(t,e,n){var r=t.shape,i=e.shape,o=r.radius,a=i.radius,s=o+a,u=t.anchor,l=e.anchor;ut.SetV(t.relative),lt.SetV(e.relative),dt.Set(lt.x-ut.x,lt.y-ut.y);var c=dt.GetMagnitudeSquared();if(void 0!=u&&(ut.x+=u.x*r.diameter,ut.y+=u.y*r.diameter),void 0!=l&&(lt.x+=l.x*i.diameter,lt.y+=l.y*i.diameter),s*s>c){if(void 0!=n){var h=nt(c),f=(r.radiusSquared-i.radiusSquared+c)/(h+h),d=nt(r.radiusSquared-f*f)/h,p=-dt.y*d,y=dt.x*d;ct.Set(ut.x+dt.x*f/h,ut.y+dt.y*f/h),ht.Set(ct.x+p,ct.y+y),ft.Set(ct.x-p,ct.y-y),ut.SubtractV(lt),ut.Divide(s,s);var v=h-o-a;n.poc.SetV(ct),n.poc.SetV(ht),n.poc.SetV(ft),n.mtv.SetV(ut),n.mtd=v,n.delta.SetV(dt),n.occured=!0}return!0}return!1},ot=function(t,e,n){at.SetV(n.delta),at.Normalize(),st.SetV(n.mtv);var r=t.mass,i=e.mass,o=t.velocity,a=e.velocity,s=2*(o.GetDotV(at)-a.GetDotV(at))/(r+i);o.Set(o.x-s*i*at.x,o.y-s*i*at.y),a.Set(a.x+s*r*at.x,a.y+s*r*at.y),st.Multiply(n.mtd,n.mtd),st.Divide(2,2),t.relative.SubtractV(st),e.relative.AddV(st)},at=new z.a(0,0),st=new z.a(0,0),ut=new z.a(0,0),lt=new z.a(0,0),ct=new z.a(0,0),ht=new z.a(0,0),ft=new z.a(0,0),dt=new z.a(0,0);function pt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yt=Math.sqrt,vt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new z.a(0,0),this.cp=new z.a(0,0),this.sOrE=0,this.occured=!1}return function(t,e,n){e&&pt(t.prototype,e),n&&pt(t,n)}(t,[{key:"Reset",value:function(){this.mtv.Set(0,0),this.cp.Set(0,0),this.sOrE=0,this.occured=!1}}]),t}(),bt=function(t,e,n){var r=e.shape,i=t.shape,o=e.relative,a=t.relative;gt.Set(r.s.x+o.x,r.s.y+o.y),wt.Set(r.e.x+o.x,r.e.y+o.y);var s=Object(k.ClosestPointOnLine)(gt,wt,a);At.Set(a.x-s.x,a.y-s.y);var u=At.GetMagnitudeSquared();if(u<i.radiusSquared){if(n){var l=i.radius-yt(u);At.Normalize(),At.Multiply(l,l),n.mtv.SetV(At),n.cp.SetV(s),n.occured=!0,s===gt?n.sOrE=1:s===wt&&(n.sOrE=2)}return!0}return!1},mt=function(t,e,n){var r,i,o=e.shape,a=t.velocity,s=t.relative,u=n.cp;0!==n.sOrE?(r=u.SubtractVC(s)).Normalize():r=o.GetNormalA(),i=a.GetReflectionV(r),a.SetV(i),s.AddV(n.mtv)},gt=new z.a(0,0),wt=new z.a(0,0),At=new z.a(0,0);function St(t){throw new Error('"'+t+'" is read-only')}function xt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tt=Math.abs,Ot=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.mtv=new z.a(0,0),this.olAxis=new z.a(0,0),this.mtd=1/0,this.occured=!1}return function(t,e,n){e&&xt(t.prototype,e),n&&xt(t,n)}(t,[{key:"Reset",value:function(){this.occured=!1,this.mtv.Set(0,0),this.mtd=1/0,this.olAxis.Set(0,0)}}]),t}(),kt=function(t,e,n){for(var r=0,i=t.shape,o=e.shape,a=i.normals,s=o.normals,u=a.length,l=s.length;r<u;++r)if(!0===Ct(t,e,a[r],n))return!1;for(r=0;r<l;++r)if(!0===Ct(t,e,s[r],n))return!1;return void 0!=n&&(n.mtv.SetV(n.olAxis),n.mtv.Multiply(n.mtd,n.mtd),n.occured=!0),!0},Ct=function(t,e,n,r){var i=n.MinMaxDot(t.shape.vertices),o=n.MinMaxDot(e.shape.vertices),a=e.relative.SubtractVC(t.relative).GetDotV(n);if(o.Add(a,a),i.x>o.y||o.x>i.y)return!0;if(void 0!=r){var s=0,u=i.x,l=i.y,c=o.x,h=o.y,f=0,d=0;u<c?l<h?(St("mtd"),s=l-c):(St("o1"),f=l-c,St("o2"),f<(d=h-u)?(St("mtd"),s=f):(St("mtd"),s=-d)):l>h?(St("mtd"),s=u-h):(St("o1"),f=l-c,St("o2"),f<(d=h-u)?(St("mtd"),s=f):(St("mtd"),s=-d));var p=Tt(s);p<r.mtd&&(r.mtd=p,r.olAxis.SetV(n),s<0&&r.olAxis.Invert())}return!1},Et=Math.PI,Pt=Math.cos,Rt=Math.sin,_t=Math.abs,Dt=Math.pow,It=Math.exp,jt=function(t,e,n,r,i){var o=new z.a(e,n),a=new z.a(e+r,n),s=new z.a(e+r,n+i),u=new z.a(e,n+i);return t.Recreate([o,a,s,u]),t.ComputeBounds(),t.GetNormalsA(),t},Lt=function(t,e,n,r,i){var o=new z.a(e,n),a=new z.a(e+.5*r,n+i),s=new z.a(e-.5*r,n+i);return t.Recreate([o,a,s]),t.ComputeBounds(),t.GetNormalsA(),t},Nt=function(t,e,n,r,i){var o,a,s,u=0,l=i,c=2*Et/l;for(t.Recreate([]);u<l;++u)o=Pt(s=c*u)*r,a=Rt(s)*r,t.AddVertex(new z.a(e+o,n+a));return t.ComputeBounds(),t.GetNormalsA(),t},Gt=function(t,e,n,r){var i,o,a=2.0943951023931953;return t.Recreate([]),i=Pt(0)*r,o=Rt(0)*r,t.AddVertex(new z.a(e+i,n+o)),i=Pt(a)*r,o=Rt(a)*r,t.AddVertex(new z.a(e+i,n+o)),i=Pt(2*a)*r,o=Rt(2*a)*r,t.AddVertex(new z.a(e+i,n+o)),t.Rotate(-90*new Math.RADIAN),t.ComputeBounds(),t.GetNormalsA(),t},Bt=function(t,e,n,r,i,o){var a,s,u,l,c=0,h=2*o,f=2*Math.PI/h;for(t.Recreate([]);c<h;++c)l=0==(1&c)?r:i,u=f*c,a=Math.cos(u)*l,s=Math.sin(u)*l,t.AddVertex(new z.a(e+a,n+s));return t.ComputeBounds(),t.GetNormalsA(),t},Ft=function t(e,n,r,i,o){var a,s,u,l=0,c=t.C;for(e.Recreate([]);l<i;++l)u=l*c._1*Et/i,a=Pt(u)*(It(Pt(u))-c._2*Pt(c._3*u)-Dt(Rt(u/c._4),c._5))*o,s=Rt(u)*(It(Pt(u))-c._2*Pt(c._3*u)-Dt(Rt(u/c._4),c._5))*o,e.AddVertex(new z.a(n+a,r+s));return e.ComputeBounds(),e.GetNormalsA(),e};Ft.C={_1:24,_2:2,_3:4,_4:12,_5:5};var Ut=function t(e,n,r,i,o,a,s,u,l){var c,h,f,d,p,y,v=0,b=o,m=t.C;for(s=void 0===s?1:s,u=void 0===u?1:u,l=void 0===l?1:l,e.Recreate([]);v<b;++v)p=Pt(a*(f=v*Et*2/o)/4)/m._A,p=_t(p),p=Dt(p,u),y=Rt(a*f/4)/m._B,y=_t(y),y=Dt(y,l),d=Dt(p+y,1/s),0===_t(d)?(c=0,h=0):(d=1/d,c=Pt(f)*d*i,h=Rt(f)*d*i),e.AddVertex(new z.a(n+c,r+h));return e.ComputeBounds(),e.GetNormalsA(),e};Ut.C={_A:1,_B:1};var Vt=n(5),Mt=n(12),Xt=n(7),Yt=n(13),Ht=n(14),Wt=n(6);function qt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var zt=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.context=n,this.holderContext=e,this.handle=r,this.removeOnNextCall=i}return function(t,e,n){e&&qt(t.prototype,e),n&&qt(t,n)}(t,[{key:"Execute",value:function(){this.handle.apply(this.context,arguments),!0===this.removeOnNextCall&&this.Remove()}},{key:"Remove",value:function(){this.holderContext.Remove(this.handle,this.context)}}]),t}();function Kt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Qt=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.listeners=[],this.stopPropagation=!1,this.target=null,this.data=null}return function(t,e,n){e&&Kt(t.prototype,e),n&&Kt(t,n)}(t,[{key:"GetListenerIndex",value:function(t,e){var n,r=0,i=this.listeners,o=i.length;if(0===i.length)return-1;for(;r<o;++r)if((n=i[r]).context===e&&n.handle===t)return r;return-1}},{key:"Add",value:function(t,e,n){var r=new zt(this,e,t,n);this.listeners.push(r)}},{key:"Remove",value:function(t,e){var n=this.GetListenerIndex(t,e);-1!==n&&this.listeners.fickleSplice(n)}},{key:"Dump",value:function(t){var e=0,n=this.listeners,r=n.length;if(0!==n.length)if(void 0!==t)for(;e<r;++e)n[e].context===t&&this.listeners.fickleSplice(e);else this.listeners.length=0}},{key:"Dispatch",value:function(t,e){var n=0,r=this.listeners.slice(),i=r.length;if(0!==r.length){for(this.stopPropagation=!1,this.target=t,this.data=e;n<i&&(r[n].Execute(this),!0!==this.stopPropagation);++n);this.target=null,this.data=null}}}]),t}();function Jt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Zt=Math.round,$t=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopTime=Zt(null==e?0:e),this.time=0,this.isRunning=!1,this.canResume=!1,this.count=0,this.onStop=new Qt,this.onFinish=new Qt,this.onStart=new Qt,this.onReset=new Qt,this.onPause=new Qt,this.onResume=new Qt}return function(t,e,n){e&&Jt(t.prototype,e),n&&Jt(t,n)}(t,[{key:"Reset",value:function(){this.onReset.Dispatch(this,null),this.count=0,this.time=0,this.isRunning=!1,this.canResume=!1}},{key:"Start",value:function(t){this.stopTime=Zt(null==t?this.stopTime:t),this.stopTime>0&&(this.time=0,this.isRunning=!0,this.canResume=!1,this.onStart.Dispatch(this,{stopTime:this.stopTime}))}},{key:"Stop",value:function(){!0===this.isRunning&&(this.isRunning=!1,this.onStop.Dispatch(this,null))}},{key:"Pause",value:function(){!0===this.isRunning&&!1===this.canResume&&(this.isRunning=!1,this.canResume=!0,this.onPause.Dispatch(this,null))}},{key:"Resume",value:function(){!0===this.canResume&&(this.isRunning=!0,this.canResume=!1,this.onResume.Dispatch(this,null))}},{key:"Process",value:function(){this.time<this.stopTime&&!0===this.isRunning&&++this.time>=this.stopTime&&(this.isRunning=!1,this.count++,this.onFinish.Dispatch(this,null))}}]),t}();function te(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ee=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.SetDesiredRate(n),this.onProcess=e,this.intervalId=null,this.afId=null,this.delta=0,this.then=0,this.now=0,this.desiredRate=0,this.supplyDelta=!0,r||this.StartAF()}return function(t,e,n){e&&te(t.prototype,e),n&&te(t,n)}(t,[{key:"Process",value:function(){this.onProcess(this.ComputeDelta())}},{key:"ProcessAF",value:function(){this.onProcess(this.ComputeDelta()),null!==this.afId&&(this.afId=requestAnimationFrame(this.ProcessAF))}},{key:"ComputeDelta",value:function(){return this.now=Date.now(),this.delta=this.now-this.then,this.then=this.now,this.delta}},{key:"GetTPS",value:function(){return Object(k.PrecisionRound)(1/this.delta*1e3,2)}},{key:"SetDesiredRate",value:function(t){this.desiredRate=void 0===t?16.66:1e3/t}},{key:"Start",value:function(t){if(null!==this.afId)return ie("%cTicker: RAF is running!","color:red;".concat(re)),null;null!==this.intervalId?!0===t?(this.Stop(),this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),ie("%cTicker: Starting interval!","color:#0F0;".concat(re))):ie("%cTicker: Interval already running!","color:#F00;".concat(re)):(this.intervalId=setInterval(this.Process.bind(this),this.desiredRate),ie("%cTicker: Starting interval!","color:#0F0;".concat(re)))}},{key:"StartAF",value:function(t){if(null!==this.intervalId)return ie("%cTicker: Interval is running!","color:#F00;".concat(re)),null;null!==this.afId?!0===t?(this.Stop(),this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),ie("%cTicker: Starting RAF!","color:#0F0;".concat(re))):ie("%cTicker: RAF already running!","color:#F00;".concat(re)):(this.ProcessAF=this.ProcessAF.bind(this),this.afId=requestAnimationFrame(this.ProcessAF),ie("%cTicker: Starting RAF!","color:#0F0;".concat(re)))}},{key:"Stop",value:function(){null!==this.intervalId&&(clearInterval(this.intervalId),this.intervalId=null,ie("%cTicker: Stopping interval!","color:cyan;".concat(re))),null!==this.afId&&(cancelAnimationFrame(this.afId),this.afId=null,ie("%cTicker: Stopping RAF!","color:cyan;".concat(re)))}}],[{key:"LOG",get:function(){return ne},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_LOG"),ne=!!t}}]),t}(),ne=!0,re="background-color:black;font-family:Arial;font-size:16px;padding:5px;",ie=function(){!1!==ne&&console.log.apply(null,arguments)},oe=n(17),ae=n.n(oe),se=n(18),ue=n.n(se),le=n(19),ce=n.n(le),he=n(20),fe=n.n(he),de=n(21),pe=n.n(de),ye=n(22),ve=n.n(ye),be=function(t){var e,n,r="@vertex@",i="@fragment@";e=t.indexOf(r)+r.length,n=t.indexOf("@vertex-end@");var o=t.substring(e,n);return e=t.indexOf(i)+i.length,n=t.indexOf("@fragment-end@"),{vertex:o,fragment:t.substring(e,n)}},me=be(ae.a),ge=be(ue.a),we=be(ce.a),Ae=be(fe.a),Se=be(pe.a),xe=be(ve.a),Te=n(4);function Oe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ke=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.type=e,this.items=[]}return function(t,e,n){e&&Oe(t.prototype,e),n&&Oe(t,n)}(t,[{key:"Store",value:function(t){var e=!1;return null==t?(console.warn("Item is null."),null):(null!=t.id&&""!==t.id?e=!this.Contains(t,t.id):t.data&&null!=t.data.id&&""!==t.data.id&&(e=!this.Contains(t,t.data.id)),!1===e?(console.warn("Invalid item. Check the item id. The item has not been stored"),!1):(this.items.push(t),!0))}},{key:"StoreSafe",value:function(t){return null!=this.type&&Object(Te.a)(t,Te.a.IS_INSTANCE_OF,this.type),Object(Te.a)(t,Te.a.IS_SAME_TYPE,Ce),t.id?(Object(Te.a)(t.id,Te.a.IS_SAME_TYPE,Ee),Object(Te.a)(t.id,Te.a.IS_NOT,"")):(Object(Te.a)(t.data,Te.a.IS_SAME_TYPE,Ce),Object(Te.a)(t.data.id,Te.a.IS_SAME_TYPE,Ee),Object(Te.a)(t.data.id,Te.a.IS_NOT,"")),this.Store(t)}},{key:"GetById",value:function(t){for(var e=0,n=this.items,r=n.length,i=n[e];e<r;i=n[++e])if(null!=i&&(i.id===t||null!=i.data&&i.data.id===t))return i;return null}},{key:"Contains",value:function(t,e){for(var n=0,r=this.items,i=r.length,o=r[n];n<i;o=r[++n])if(null!=o){if(o===t)return!0;if(o.id===e)return!0;if(null!=o.data&&o.data.id===e)return!0}return!1}}]),t}(),Ce=Object.create(null),Ee="string";var Pe=function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.image=e,this.id=null,this.w=0,this.h=0,this.fw=0,this.fh=0,this.uniformId=0,this.id=null!=n?n:e.id,this.w=null!=r?r:e.naturalWidth,this.h=null!=i?i:e.naturalHeight,this.fw=null!=o?o:e.naturalWidth,this.fh=null!=a?a:e.naturalHeight};function Re(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var _e=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.imageCache=new ke(Image),this.basicTextureCache=new ke(Pe),this.onImageLoaded=new Qt,this.onComplete=new Qt,this.count=0,this.loading=!1,this.toLoad=null,this.createTexture=!1,null!=r&&this.onComplete.Add(r,this),null!=e&&this.Load(e,n)}return function(t,e,n){e&&Re(t.prototype,e),n&&Re(t,n)}(t,[{key:"Load",value:function(t,e){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),null!=e&&(this.createTextures=e),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];if(null!=e){var n=new Image;n.onload=this.OnLoad.bind(this),n.onerror=this.OnError.bind(this),n.src=e.src,n.id=e.id,n.data=Object.create(null),n.data.w=e.w,n.data.h=e.h,n.data.fw=e.fw,n.data.fh=e.fh}else this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{imageCache:this.imageCache,basicTextureCache:this.basicTextureCache})}},{key:"OnLoad",value:function(t){var e=t.currentTarget;e.onload=null,e.onerror=null,this.imageCache.StoreSafe(e),!0===this.createTextures&&this.basicTextureCache.StoreSafe(new Pe(e,null,e.data.w,e.data.h,e.data.fw,e.data.fh)),this.onImageLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)}},{key:"OnError",value:function(){throw new Error("Request failed")}},{key:"GetImageById",value:function(t){return this.imageCache.GetById(t)}},{key:"GetBasicTextureById",value:function(t){return this.basicTextureCache.GetById(t)}}]),t}();function De(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ie=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.XHRcache=new ke(XMLHttpRequest),this.dataCache=new ke,this.onXHRLoaded=new Qt,this.onComplete=new Qt,this.count=0,this.loading=!1,this.toLoad=null,null!=n&&this.onComplete.Add(n,this),null!=e&&this.Load(e)}return function(t,e,n){e&&De(t.prototype,e),n&&De(t,n)}(t,[{key:"Load",value:function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];if(null!=e){var n=new XMLHttpRequest;switch(n.open("GET",e.src),e.type){case"json":n.onreadystatechange=this.OnLoadJSON.bind(this);break;default:n.onreadystatechange=this.OnLoadXML.bind(this)}n.onerror=this.OnError.bind(this),null!=n.data?n.data.id=e.id:n.data={id:e.id},n.send()}else this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{XHRcache:this.XHRcache,dataCache:this.dataCache})}},{key:"OnLoadXML",value:function(t){var e=t.currentTarget;200!==e.status&&null==e.responseText||4!==e.readyState||(e.onload=null,e.onerror=null,this.XHRcache.StoreSafe(e),this.dataCache.Store({id:e.data.id,data:D(e.responseText,!0)}),this.onXHRLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count),e.abort())}},{key:"OnLoadJSON",value:function(t){var e=t.currentTarget;200!==e.status&&null==e.responseText||4!==e.readyState||(e.onload=null,e.onerror=null,this.XHRcache.StoreSafe(e),this.dataCache.Store({id:e.data.id,data:JSON.parse(e.responseText)}),this.onXHRLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count),e.abort())}},{key:"OnError",value:function(t){throw console.error(t),new Error("Request failed")}},{key:"GetXHRById",value:function(t){return this.XHRcache.GetById(t)}},{key:"GetDataById",value:function(t){return this.dataCache.GetById(t).data}}]),t}();function je(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Le=function(){function t(e,n,r,i,o,a){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.rate=o,this.timer=o,this.x=e,this.y=n,this.w=r,this.h=i,this.nextFrameIndex=null,this.id=null,null!=a&&(this.id=a)}return function(t,e,n){e&&je(t.prototype,e),n&&je(t,n)}(t,[{key:"Process",value:function(){return this.timer--<=0&&(this.Reset(),!0)}},{key:"Apply",value:function(t){t.ClipReconfigure(this.x,this.y,this.w,this.h)}},{key:"Reset",value:function(){this.timer=this.rate}}]),t}();function Ne(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ge=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.id,this.basicTexture=e,this.data=n,this.frameCache=new ke(Le)}return function(t,e,n){e&&Ne(t.prototype,e),n&&Ne(t,n)}(t,[{key:"GenerateFrames",value:function(){for(var t,e,n,r=0,i=this.data,o=i.frames,a=i.meta.frameTags,s=o.length;r<s;++r)e=(t=o[r]).frame,n=a[r],this.frameCache.Store(new Le(e.x,e.y,e.w,e.h,t.duration,n?n.name:null))}},{key:"GetFrameById",value:function(t){return this.frameCache.GetById(t)}}]),t}();function Be(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Fe=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.spritesheetCache=new ke(Ge),this.xhrLoader=new Ie,this.imageLoader=new _e,this.onComplete=new Qt,this.onSpritesheetLoaded=new Qt,this.count=0,this.loading=!1,this.toLoad=null,this.pairCount=0,this.tempBasicTexture=null,this.tempData=null,this.xhrLoader.onXHRLoaded.Add(this.OnPartXHRLoaded,this),this.imageLoader.onImageLoaded.Add(this.OnPartImageLoaded,this),null!=n&&this.onComplete.Add(n,this),null!=e&&this.Load(e)}return function(t,e,n){e&&Be(t.prototype,e),n&&Be(t,n)}(t,[{key:"Load",value:function(t){null===this.toLoad&&(this.toLoad=[]),this.toLoad.push.apply(this.toLoad,t),!1===this.loading&&(this.count=0,this.loading=!0,this.Haul(this.count))}},{key:"Haul",value:function(t){var e=this.toLoad[t];null!=e?(e.data.id=e.image.id=e.id,this.xhrLoader.Load([e.data]),this.imageLoader.Load([e.image],!0)):(this.count=0,this.loading=!1,this.toLoad=null,this.onComplete.Dispatch(this,{spritesheetCache:this.spritesheetCache}))}},{key:"OnPartLoaded",value:function(){if(2==++this.pairCount){var t=this.tempData.meta.size;this.tempBasicTexture.fw=t.w,this.tempBasicTexture.fh=t.h;var e=new Ge(this.tempBasicTexture,this.tempData);this.spritesheetCache.StoreSafe(e),this.pairCount=0,this.onSpritesheetLoaded.Dispatch(e,{count:this.count}),this.Haul(++this.count)}}},{key:"OnPartXHRLoaded",value:function(t){this.tempData=this.xhrLoader.GetData(t.target.data.id),this.OnPartLoaded()}},{key:"OnPartImageLoaded",value:function(t){this.tempBasicTexture=this.imageLoader.GetBasicTexture(t.target.id),this.OnPartLoaded()}},{key:"GetSpritesheetById",value:function(t){return this.spritesheetCache.GetById(t)}}]),t}();function Ue(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ve=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.gl=e,this.data={},this.program=null,this.attributes=null,this.uniforms=null,null!=e&&null!=n&&this.Init(n.v,n.f)}return function(t,e,n){e&&Ue(t.prototype,e),n&&Ue(t,n)}(t,[{key:"Init",value:function(t,e){var n=this.gl,r=this.CreateShader(t,n.VERTEX_SHADER),i=this.CreateShader(e,n.FRAGMENT_SHADER),o=this.program=n.createProgram();if(n.attachShader(o,r),n.attachShader(o,i),n.linkProgram(o),!n.getProgramParameter(o,n.LINK_STATUS)){var a=n.getProgramInfoLog(o);throw new Error("Program link failed:"+a)}n.detachShader(o,r),n.detachShader(o,i),n.deleteShader(r),n.deleteShader(i),this.attributes={},this.uniforms={}}},{key:"CreateShader",value:function(t,e){var n=this.gl,r=n.createShader(e);if(n.shaderSource(r,t),n.compileShader(r),!n.getShaderParameter(r,n.COMPILE_STATUS)){var i=n.getShaderInfoLog(r);throw new Error("Shader compilation failed:"+i)}return r}},{key:"AssignAttribute",value:function(t){this.attributes[t]=this.gl.getAttribLocation(this.program,t)}},{key:"AssignUniform",value:function(t){this.uniforms[t]=this.gl.getUniformLocation(this.program,t)}},{key:"Execute",value:function(){}}],[{key:"LAST_USED_CONTROLLER",get:function(){return Me},set:function(t){Me=t}}]),t}(),Me=null;function Xe(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ye=Math.max,He=Math.min,We=Math.round,qe=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.channel=new Float32Array([null==e?0:e,null==n?0:n,null==r?0:r,null==i?1:i]),this.value="",this.currentConversion="",this.ComputeValueRGBA()}return function(t,e,n){e&&Xe(t.prototype,e),n&&Xe(t,n)}(t,[{key:"Copy",value:function(){var e=new t(this.channel[0],this.channel[1],this.channel[2],this.channel[3]);return e.value=this.value,e.currentConversion=this.currentConversion,e}},{key:"ComputeValueRGBA",value:function(){return this.value="rgba(".concat(this.channel.join(",").concat(")")),this.value}},{key:"ComputeValueHSLA",value:function(){return this.value="hsla("+this.channel[0]+","+this.channel[1]+"%,"+this.channel[2]+"%,"+this.channel[3]+")",this.value}},{key:"ComputeValueHex",value:function(){return this.value="#"+this.channel[0].toString(16)+this.channel[1].toString(16)+this.channel[2].toString(16),this.value}},{key:"ConvertToHSLA",value:function(t){var e=0,n=0,r=this.channel[0]/ze,i=this.channel[1]/ze,o=this.channel[2]/ze,a=Ye(r,i,o),s=He(r,i,o),u=a-s,l=.5*(a+s);a!==s&&(n=l>.5?u/(2-a-s):u/(a+s),e=a===r?(i-o)/u+(i<o?6:0):a===i?(o-r)/u+2:(r-i)/u+4,e/=6),this.channel[0]=360*e,this.channel[1]=100*n,this.channel[2]=100*l,!0===t&&(this.channel[0]=We(this.channel[0]),this.channel[1]=We(this.channel[1]),this.channel[2]=We(this.channel[2])),this.currentConversion="hsl",this.ComputeValueHSLA()}},{key:"SetRGB",value:function(t,e,n,r){this.channel[0]=Object(O.Clamp)(t,Ke,ze),this.channel[1]=Object(O.Clamp)(e,Ke,ze),this.channel[2]=Object(O.Clamp)(n,Ke,ze),this.currentConversion="rgb",r||this.ComputeValueRGBA()}},{key:"SetRGBA",value:function(t,e,n,r){this.SetRGB(t,e,n,!0),this.channel[3]=Object(O.Clamp)(r,0,1),this.ComputeValueRGBA()}},{key:"SetHex",value:function(t){var e=(t=t.replace(/#/g,"")).match(/.{2}/g);null==(e=e.map(O.Base16ToBase10))[3]&&(e[3]=1),this.SetRGBA(e[0],e[1],e[2],e[3])}},{key:"IncreaseChannel",value:function(t,e){this.channel[t]+=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()}},{key:"SetChannel",value:function(t,e){this.channel[t]=e,"rgb"===this.currentConversion?this.ComputeValueRGBA():"hsl"===this.currentConversion&&this.ComputeValueHSLA()}},{key:"Normalize",value:function(){this.channel[0]=Qe*this.channel[0],this.channel[1]=Qe*this.channel[1],this.channel[2]=Qe*this.channel[2]}},{key:"r",get:function(){return this.channel[0]},set:function(t){this.channel[0]=t}},{key:"g",get:function(){return this.channel[1]},set:function(t){this.channel[1]=t}},{key:"b",get:function(){return this.channel[2]},set:function(t){this.channel[2]=t}},{key:"a",get:function(){return this.channel[3]},set:function(t){this.channel[3]=t}}]),t}(),ze=255,Ke=0,Qe=1/ze;function Je(t){return(Je="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ze(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $e(t,e){return!e||"object"!==Je(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function tn(t,e,n,r){return(tn="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=nn(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function en(t,e,n){return(en="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=nn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function nn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=rn(t)););return t}function rn(t){return(rn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function on(t,e){return(on=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var an=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=$e(this,rn(e).call(this,t,Se))).essenceBuffer=null,n.vertices=null,n.fillColor=null,n.outlineColor=null,n.outline=5,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&on(t,e)}(e,Ve),function(t,e,n){e&&Ze(t.prototype,e),n&&Ze(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array(Object(k.TriRectArray)(0,0,1,1)),this.fillColor=new qe,this.outlineColor=new qe,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uFillColor"),this.AssignUniform("uOutlineColor"),this.AssignUniform("uRadius"),this.AssignUniform("uOutline")}},{key:"Execute",value:function(t,n,r,i){var o=this.gl,a=this.attributes,s=this.uniforms,u=this.vertices,l=this.fillColor.channel,c=this.outlineColor.channel;Object(k.TriRectArray)(n-i,r-i,2*i,2*i,u),this!==en(rn(e.prototype),"LAST_USED_CONTROLLER",this)&&(o.useProgram(this.program),function(t,e,n,r,i){if(!tn(t,e,n,r||t)&&i)throw new Error("failed to set property")}(rn(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),o.bindBuffer(o.ARRAY_BUFFER,this.essenceBuffer),o.bufferSubData(o.ARRAY_BUFFER,0,u),o.enableVertexAttribArray(a.aPosition),o.vertexAttribPointer(a.aPosition,2,o.FLOAT,!1,0,0),o.uniformMatrix3fv(s.uProjection,!1,t),o.uniform4f(s.uFillColor,l[0],l[1],l[2],l[3]),o.uniform4f(s.uOutlineColor,c[0],c[1],c[2],c[3]),o.uniform1f(s.uOutline,this.outline),o.uniform1f(s.uRadius,i),o.drawArrays(o.TRIANGLE_STRIP,0,6)}}]),e}();function sn(t){return(sn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function un(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function ln(t,e){return!e||"object"!==sn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function cn(t,e,n,r){return(cn="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=fn(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function hn(t,e,n){return(hn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=fn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function fn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=dn(t)););return t}function dn(t){return(dn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function pn(t,e){return(pn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var yn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=ln(this,dn(e).call(this,t,xe))).essenceBuffer=null,n.vertices=null,n.color=null,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&pn(t,e)}(e,Ve),function(t,e,n){e&&un(t.prototype,e),n&&un(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array([-1,0,1,0]),this.color=new qe,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uColor")}},{key:"Execute",value:function(t,n,r){var i=this.gl,o=this.attributes,a=this.uniforms,s=this.vertices,u=this.color.channel;s[0]=n.x,s[1]=n.y,s[2]=r.x,s[3]=r.y,this!==hn(dn(e.prototype),"LAST_USED_CONTROLLER",this)&&(i.useProgram(this.program),function(t,e,n,r,i){if(!cn(t,e,n,r||t)&&i)throw new Error("failed to set property")}(dn(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),i.bindBuffer(i.ARRAY_BUFFER,this.essenceBuffer),i.bufferSubData(i.ARRAY_BUFFER,0,s),i.enableVertexAttribArray(o.aPosition),i.vertexAttribPointer(o.aPosition,2,i.FLOAT,!1,0,0),i.uniformMatrix3fv(a.uProjection,!1,t),i.uniform4f(a.uColor,u[0],u[1],u[2],u[3]),i.drawArrays(i.LINES,0,2)}}]),e}();function vn(t){return(vn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function bn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function mn(t,e){return!e||"object"!==vn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function gn(t,e,n,r){return(gn="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=An(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function wn(t,e,n){return(wn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=An(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function An(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Sn(t)););return t}function Sn(t){return(Sn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function xn(t,e){return(xn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Tn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=mn(this,Sn(e).call(this,t,we))).dataBuffer=null,n.previousNumberOfElements=0,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&xn(t,e)}(e,Ve),function(t,e,n){e&&bn(t.prototype,e),n&&bn(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.dataBuffer=t.createBuffer(),this.AssignAttribute("aProjection1"),this.AssignAttribute("aProjection2"),this.AssignAttribute("aProjection3"),this.AssignAttribute("aPosition"),this.AssignAttribute("aColor"),this.AssignAttribute("aPointSize")}},{key:"Execute",value:function(t,n){var r=this.gl,i=this.attributes;wn(Sn(e.prototype),"LAST_USED_CONTROLLER",this)!==this&&r.useProgram(this.program),r.bindBuffer(r.ARRAY_BUFFER,this.dataBuffer),n!==this.previousNumberOfElements?r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW):r.bufferSubData(r.ARRAY_BUFFER,0,t),r.enableVertexAttribArray(i.aProjection1),r.vertexAttribPointer(i.aProjection1,3,r.FLOAT,!1,64,0),r.enableVertexAttribArray(i.aProjection2),r.vertexAttribPointer(i.aProjection2,3,r.FLOAT,!1,64,12),r.enableVertexAttribArray(i.aProjection3),r.vertexAttribPointer(i.aProjection3,3,r.FLOAT,!1,64,24),r.enableVertexAttribArray(i.aPosition),r.vertexAttribPointer(i.aPosition,2,r.FLOAT,!1,64,36),r.enableVertexAttribArray(i.aColor),r.vertexAttribPointer(i.aColor,4,r.FLOAT,!1,64,44),r.enableVertexAttribArray(i.aPointSize),r.vertexAttribPointer(i.aPointSize,1,r.FLOAT,!1,64,60),r.drawArrays(r.POINTS,0,n),this.previousNumberOfElements=n,function(t,e,n,r,i){if(!gn(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Sn(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)}}]),e}();function On(t){return(On="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function kn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Cn(t,e){return!e||"object"!==On(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function En(t,e,n,r){return(En="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=Rn(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Pn(t,e,n){return(Pn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Rn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Rn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=_n(t)););return t}function _n(t){return(_n=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Dn(t,e){return(Dn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var In=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Cn(this,_n(e).call(this,t,Ae))).essenceBuffer=null,n.vertices=null,n.fillColor=null,n.outlineColor=null,n.outline=5,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Dn(t,e)}(e,Ve),function(t,e,n){e&&kn(t.prototype,e),n&&kn(t,n)}(e,[{key:"Initialise",value:function(){var t=this.gl;this.essenceBuffer=t.createBuffer(),this.vertices=new Float32Array(Object(k.TriRectArray)(0,0,1,1)),this.fillColor=new qe,this.outlineColor=new qe,t.bindBuffer(t.ARRAY_BUFFER,this.essenceBuffer),t.bufferData(t.ARRAY_BUFFER,this.vertices,t.DYNAMIC_DRAW),t.bindBuffer(t.ARRAY_BUFFER,null),this.AssignAttribute("aPosition"),this.AssignUniform("uProjection"),this.AssignUniform("uFillColor"),this.AssignUniform("uOutlineColor"),this.AssignUniform("uSize"),this.AssignUniform("uOutline")}},{key:"Execute",value:function(t,n,r,i,o){var a=this.gl,s=this.attributes,u=this.uniforms,l=this.vertices,c=this.fillColor.channel,h=this.outlineColor.channel;Object(k.TriRectArray)(n,r,i,o,l),this!==Pn(_n(e.prototype),"LAST_USED_CONTROLLER",this)&&(a.useProgram(this.program),function(t,e,n,r,i){if(!En(t,e,n,r||t)&&i)throw new Error("failed to set property")}(_n(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),a.bindBuffer(a.ARRAY_BUFFER,this.essenceBuffer),a.bufferSubData(a.ARRAY_BUFFER,0,l),a.enableVertexAttribArray(s.aPosition),a.vertexAttribPointer(s.aPosition,2,a.FLOAT,!1,0,0),a.uniformMatrix3fv(u.uProjection,!1,t),a.uniform4f(u.uFillColor,c[0],c[1],c[2],c[3]),a.uniform4f(u.uOutlineColor,h[0],h[1],h[2],h[3]),a.uniform1f(u.uOutline,this.outline),a.uniform2f(u.uSize,i,o),a.drawArrays(a.TRIANGLE_STRIP,0,6)}}]),e}();function jn(t){return(jn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Ln(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Nn(t,e){return!e||"object"!==jn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Gn(t,e,n,r){return(Gn="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=Fn(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function Bn(t,e,n){return(Bn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=Fn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function Fn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Un(t)););return t}function Un(t){return(Un=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Vn(t,e){return(Vn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Mn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Nn(this,Un(e).call(this,t,ge))).originalTexture=null,n.boundTexture=null,n.essenceBuffer=null,n.dataBuffer=null,n.indexBuffer=null,n.previousNumberOfElements=0,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Vn(t,e)}(e,Ve),function(t,e,n){e&&Ln(t.prototype,e),n&&Ln(t,n)}(e,[{key:"BindBasicTexture",value:function(t){var e=this.gl,n=Object(k.TriRectArray)(0,0,t.w,t.h);this.aia=e.getExtension("ANGLE_instanced_arrays"),this.originalTexture=t,this.boundTexture=e.createTexture(),this.essenceBuffer=e.createBuffer(),this.dataBuffer=e.createBuffer(),n.push.apply(n,Object(k.TriRectArray)(0,0,1,1)),e.bindTexture(e.TEXTURE_2D,this.boundTexture),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.MIRRORED_REPEAT),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,e.NEAREST),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.NEAREST),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,e.RGBA,e.UNSIGNED_BYTE,t.image),e.bindBuffer(e.ARRAY_BUFFER,this.essenceBuffer),e.bufferData(e.ARRAY_BUFFER,new Float32Array(n),e.STATIC_DRAW),e.bindBuffer(e.ARRAY_BUFFER,null),e.bindTexture(e.TEXTURE_2D,null),this.AssignAttribute("aPosition"),this.AssignAttribute("aTexCoord"),this.AssignAttribute("aProjection1"),this.AssignAttribute("aProjection2"),this.AssignAttribute("aProjection3"),this.AssignAttribute("aTranslation1"),this.AssignAttribute("aTranslation2"),this.AssignAttribute("aTranslation3"),this.AssignAttribute("aTransformation1"),this.AssignAttribute("aTransformation2"),this.AssignAttribute("aTransformation3"),this.AssignUniform("uImage")}},{key:"Execute",value:function(t,n){var r=this.gl,i=this.aia,o=this.attributes,a=this.uniforms;this!==Bn(Un(e.prototype),"LAST_USED_CONTROLLER",this)&&(r.useProgram(this.program),r.activeTexture(r.TEXTURE0),r.bindTexture(r.TEXTURE_2D,this.boundTexture),r.uniform1i(a.uImage,0),r.bindBuffer(r.ARRAY_BUFFER,this.essenceBuffer),r.enableVertexAttribArray(o.aPosition),r.vertexAttribPointer(o.aPosition,2,r.FLOAT,!1,0,0),i.vertexAttribDivisorANGLE(o.aPosition,0),r.enableVertexAttribArray(o.aTexCoord),r.vertexAttribPointer(o.aTexCoord,2,r.FLOAT,!1,0,48),i.vertexAttribDivisorANGLE(o.aTexCoord,0),function(t,e,n,r,i){if(!Gn(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Un(e.prototype),"LAST_USED_CONTROLLER",this,this,!0)),r.bindBuffer(r.ARRAY_BUFFER,this.dataBuffer),n!==this.previousNumberOfElements?r.bufferData(r.ARRAY_BUFFER,t,r.DYNAMIC_DRAW):r.bufferSubData(r.ARRAY_BUFFER,0,t),r.enableVertexAttribArray(o.aProjection1),r.vertexAttribPointer(o.aProjection1,3,r.FLOAT,!1,108,0),i.vertexAttribDivisorANGLE(o.aProjection1,1),r.enableVertexAttribArray(o.aProjection2),r.vertexAttribPointer(o.aProjection2,3,r.FLOAT,!1,108,12),i.vertexAttribDivisorANGLE(o.aProjection2,1),r.enableVertexAttribArray(o.aProjection3),r.vertexAttribPointer(o.aProjection3,3,r.FLOAT,!1,108,24),i.vertexAttribDivisorANGLE(o.aProjection3,1),r.enableVertexAttribArray(o.aTranslation1),r.vertexAttribPointer(o.aTranslation1,3,r.FLOAT,!1,108,36),i.vertexAttribDivisorANGLE(o.aTranslation1,1),r.enableVertexAttribArray(o.aTranslation2),r.vertexAttribPointer(o.aTranslation2,3,r.FLOAT,!1,108,48),i.vertexAttribDivisorANGLE(o.aTranslation2,1),r.enableVertexAttribArray(o.aTranslation3),r.vertexAttribPointer(o.aTranslation3,3,r.FLOAT,!1,108,60),i.vertexAttribDivisorANGLE(o.aTranslation3,1),r.enableVertexAttribArray(o.aTransformation1),r.vertexAttribPointer(o.aTransformation1,3,r.FLOAT,!1,108,72),i.vertexAttribDivisorANGLE(o.aTransformation1,1),r.enableVertexAttribArray(o.aTransformation2),r.vertexAttribPointer(o.aTransformation2,3,r.FLOAT,!1,108,84),i.vertexAttribDivisorANGLE(o.aTransformation2,1),r.enableVertexAttribArray(o.aTransformation3),r.vertexAttribPointer(o.aTransformation3,3,r.FLOAT,!1,108,96),i.vertexAttribDivisorANGLE(o.aTransformation3,1),i.drawArraysInstancedANGLE(r.TRIANGLE_STRIP,0,6,n)}}]),e}();function Xn(t){return(Xn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Yn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Hn(t,e){return!e||"object"!==Xn(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Wn(t,e,n,r){return(Wn="undefined"!=typeof Reflect&&Reflect.set?Reflect.set:function(t,e,n,r){var i,o=zn(t,e);if(o){if((i=Object.getOwnPropertyDescriptor(o,e)).set)return i.set.call(r,n),!0;if(!i.writable)return!1}if(i=Object.getOwnPropertyDescriptor(r,e)){if(!i.writable)return!1;i.value=n,Object.defineProperty(r,e,i)}else!function(t,e,n){e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n}(r,e,n);return!0})(t,e,n,r)}function qn(t,e,n){return(qn="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(t,e,n){var r=zn(t,e);if(r){var i=Object.getOwnPropertyDescriptor(r,e);return i.get?i.get.call(n):i.value}})(t,e,n||t)}function zn(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=Kn(t)););return t}function Kn(t){return(Kn=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Qn(t,e){return(Qn=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Jn=function(t){function e(t){var n;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(n=Hn(this,Kn(e).call(this,t,me))).originalTexture0=null,n.boundTexture0=null,n.essenceBuffer0=null,n.originalTexture1=null,n.boundTexture1=null,n.essenceBuffer1=null,n.originalTexture2=null,n.boundTexture2=null,n.essenceBuffer2=null,n.originalTexture3=null,n.boundTexture3=null,n.essenceBuffer3=null,n.lastUsedUnit=0,n.Initialise(),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Qn(t,e)}(e,Ve),function(t,e,n){e&&Yn(t.prototype,e),n&&Yn(t,n)}(e,[{key:"Initialise",value:function(){this.AssignAttribute("aPosition0"),this.AssignAttribute("aTexCoord0"),this.AssignAttribute("aPosition1"),this.AssignAttribute("aTexCoord1"),this.AssignAttribute("aPosition2"),this.AssignAttribute("aTexCoord2"),this.AssignAttribute("aPosition3"),this.AssignAttribute("aTexCoord3"),this.AssignUniform("uImage"),this.AssignUniform("uUnitId"),this.AssignUniform("uProjection"),this.AssignUniform("uTranslation"),this.AssignUniform("uTransformation"),this.AssignUniform("uTint")}},{key:"BindBasicTexture",value:function(t,e){var n=this.gl,r=Object(k.TriRectArray)(0,0,t.w,t.h);(null==e||e<0||e>3)&&(e=0),t.uniformId=e,this["originalTexture"+e]=t,this["boundTexture"+e]=n.createTexture(),this["essenceBuffer"+e]=n.createBuffer(),r.push.apply(r,Object(k.TriRectArray)(0,0,1,1)),n.bindTexture(n.TEXTURE_2D,this["boundTexture"+e]),n.texImage2D(n.TEXTURE_2D,0,n.RGBA,n.RGBA,n.UNSIGNED_BYTE,t.image),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_S,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_WRAP_T,n.REPEAT),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MAG_FILTER,n.NEAREST),n.texParameteri(n.TEXTURE_2D,n.TEXTURE_MIN_FILTER,n.NEAREST),n.bindBuffer(n.ARRAY_BUFFER,this["essenceBuffer"+e]),n.bufferData(n.ARRAY_BUFFER,new Float32Array(r),n.STATIC_DRAW),n.bindBuffer(n.ARRAY_BUFFER,null),n.bindTexture(n.TEXTURE_2D,null)}},{key:"BindUnit",value:function(t,e,n,r){null!=this["boundTexture"+r]&&(t.activeTexture(t.TEXTURE0+r),t.bindTexture(t.TEXTURE_2D,this["boundTexture"+r]),t.bindBuffer(t.ARRAY_BUFFER,this["essenceBuffer"+r]),t.enableVertexAttribArray(n["aPosition"+r]),t.vertexAttribPointer(n["aPosition"+r],2,t.FLOAT,!1,0,0),t.enableVertexAttribArray(n["aTexCoord"+r]),t.vertexAttribPointer(n["aTexCoord"+r],2,t.FLOAT,!1,0,48))}},{key:"Execute",value:function(t,n,r,i,o){var a=this.gl,s=this.attributes,u=this.uniforms;this!==qn(Kn(e.prototype),"LAST_USED_CONTROLLER",this)?(a.useProgram(this.program),this.BindUnit(a,u,s,0),this.BindUnit(a,u,s,1),this.BindUnit(a,u,s,2),this.BindUnit(a,u,s,3),a.uniform1f(u.uUnitId,o),a.uniform1i(u.uImage,o),function(t,e,n,r,i){if(!Wn(t,e,n,r||t)&&i)throw new Error("failed to set property")}(Kn(e.prototype),"LAST_USED_CONTROLLER",this,this,!0),this.lastUsedUnit=o):o!==this.lastUsedUnit&&(a.uniform1f(u.uUnitId,o),a.uniform1i(u.uImage,o),this.lastUsedUnit=o),a.uniform4fv(u.uTint,i),a.uniformMatrix3fv(u.uProjection,!1,t),a.uniformMatrix3fv(u.uTranslation,!1,n),a.uniformMatrix3fv(u.uTransformation,!1,r),a.drawArrays(a.TRIANGLE_STRIP,0,6)}}]),e}();function Zn(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $n=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.priority=i,this.breakIfExecuted=!!o,this.data={},this.command=null}return function(t,e,n){e&&Zn(t.prototype,e),n&&Zn(t,n)}(t,[{key:"Execute",value:function(t,e,n){return this.handle(t,e,n),this.breakIfExecuted}}]),t}();function tr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var er=function(){function t(e,n,r,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e.split(" "),this.handle=n,this.info=r,this.data={},this.options=null,this.registry=null,this.optionPrefix=null==o?nr:o,this.dsCopy=[],this.dataSeparator="=",this.allOptionIds=null,this.fullInfo=null,this.continueToPrime=!!i,this.filterNull=!1}return function(t,e,n){e&&tr(t.prototype,e),n&&tr(t,n)}(t,[{key:"Execute",value:function(t,e,n){this.HandleData(t,e),!0===this.filterNull&&(t=t.filter(rr)),!0===this.HandleOptions(t,e,n)&&this.handle(t,e,n)}},{key:"AddOption",value:function(t,e,n,r,i,o){null!=(o=null==o?this.optionPrefix:o)&&(t=t.replace(/\S+/g,o+"$&")),null==this.options&&(this.options=[]),r=null==r?0:r;var a=0,s=this.options,u=s.length,l=s[a],c=new $n(t,e,n,r,i);for(c.command=this;a<u;l=s[++a])if(l.priority<=r)return s.splice(a,0,c),this.allOptionIds=this.GetAllOptionIds(),this;return this.options.push(c),this.allOptionIds=this.GetAllOptionIds(),this}},{key:"HandleData",value:function(t,e){var n,r=0,i=this.dataSeparator,o=this.dsCopy;o.push.apply(o,t);for(var a=o.length;r<a;++r)2===(n=o[r].split(i)).length&&(t[r]=null,e[n[0]]=n[1]);o.length=0}},{key:"HandleOptions",value:function(t,e,n){if(0===t.length)return this.continueToPrime;var r=this.GetAndRemoveMatchingOptionIds(t);if(null==r)return this.continueToPrime;for(var i=0,o=r.length;i<o;++i)if(!0===this.GetOptionById(r[i]).Execute(t,e,n))return!1;return this.continueToPrime}},{key:"GetOptionById",value:function(t){for(var e=0,n=this.options,r=n.length,i=n[e];e<r;i=n[++e])if(-1!==(i=n[e]).id.indexOf(t))return i;return null}},{key:"GetAllOptionIds",value:function(){for(var t=0,e=this.options,n=e.length,r=[];t<n;++t)r.push.apply(r,e[t].id);return r}},{key:"GetAndRemoveMatchingOptionIds",value:function(t){var e=this.allOptionIds;if(null==e)return null;for(var n,r=0,i=e.length,o=[];r<i;++r)-1!==(n=t.indexOf(e[r]))&&o.push(t.fickleSplice(n));return o}},{key:"GenerateInfoString",value:function(){for(var t=0,e="COMMAND: "+this.id.join(", ")+" -> "+this.info+"\n",n=this.options,r=n.length,i=n[t];t<r;i=n[++t])e+="OPTION: "+(i=n[t]).id.join(", ")+" -> "+i.info+"\n";return e}},{key:"OPTION_PREFIX",get:function(){return nr},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_OPTION_PREFIX"),nr=t}}]),t}(),nr="",rr=function(t){return null!=t};function ir(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var or=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.commands=[],this.splitter=" "}return function(t,e,n){e&&ir(t.prototype,e),n&&ir(t,n)}(t,[{key:"AddCommand",value:function(t){if(null==t.registry)return this.commands.push(t),t.registry=this,t}},{key:"RemoveCommand",value:function(t){var e=this.commands,n=e.indexOf(t);if(-1!==n)return t.registry=null,e.fickleSplice(n)}},{key:"GetCommandById",value:function(t){for(var e,n,r=0,i=this.commands,o=i.length,a=i[r];r<o;a=i[++r])if(a)for(e=0,n=a.id.length;e<n;++e)if(a.id[e]===t)return a;return null}},{key:"Parse",value:function(t,e){var n=String(t).split(this.splitter),r=n.shift(),i=this.GetCommandById(r);return i?(i.Execute(n,{},e),null):r}}]),t}();function ar(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var sr=function(){function t(e,n,r,i,a,s){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.id=e,this.target=n,this.propertyString=r,this.value=i,this.duration=a,this.easing=o[null==s?ur:s],this.time=0,this.startValue=0,this.change=0,this.property=null,this.properyObject=null,this.running=!1,this.onStart=new Qt,this.onEnd=new Qt,this.onStop=new Qt,this.onReconfigure=new Qt,this.onReset=new Qt}return function(t,e,n){e&&ar(t.prototype,e),n&&ar(t,n)}(t,[{key:"Start",value:function(){var t=this.propertyString.split(".");this.property=t[t.length-1],this.propertyObject=Object(O.Nested)(this.target,this.propertyString,!0),this.startValue=this.propertyObject[this.property],this.change=this.value-this.startValue,this.time=0,this.running=!0,this.onStart.Dispatch(this,null)}},{key:"Stop",value:function(){this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onStop.Dispatch(this,null)}},{key:"Process",value:function(){!0===this.running&&(this.propertyObject[this.property]=this.easing(this.time,this.startValue,this.change,this.duration),++this.time>=this.duration&&(this.running=!1,this.propertyObject[this.property]=this.value,this.onEnd.Dispatch(this,null)))}},{key:"Reconfigure",value:function(t,e,n,r){null!=t&&(this.propertyString=t),this.value=e,this.duration=n,this.easing=o[null==r?ur:r],this.onReconfigure.Dispatch(this,null)}},{key:"NewValue",value:function(t){this.value=t,this.Start()}},{key:"Reset",value:function(){if(null==this.propertyObject||null==this.property)return!1;this.propertyObject[this.property]=this.startValue,this.property=null,this.propertyObject=null,this.startValue=0,this.change=0,this.time=0,this.running=!1,this.onReset.Dispatch(this,null)}}]),t}(),ur="Linear";function lr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var cr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.motions=[],this.target=e}return function(t,e,n){e&&lr(t.prototype,e),n&&lr(t,n)}(t,[{key:"Create",value:function(t,e,n,r,i){if(null==this.GetMotionById(t)){var o=new sr(t,this.target,e,n,r,i);return this.motions.push(o),o}return null}},{key:"Add",value:function(t){null==this.GetMotionById(t.id)&&this.motions.push(t)}},{key:"Start",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Start(),e}},{key:"StartMultiple",value:function(t){for(var e=0,n=(t=t.split(" ")).length;e<n;++e)this.Start(t[e])}},{key:"Stop",value:function(t){var e=this.GetMotionById(t);return null!==e&&e.Stop(),e}},{key:"StopMultiple",value:function(t){for(var e=0,n=(t=t.split(" ")).length;e<n;++e)this.Stop(t[e])}},{key:"Reset",value:function(t){var e=this.GetMotionByid(t);return null!==e&&e.Reset(),e}},{key:"ResetMultiple",value:function(t){for(var e=0,n=(t=t.split(" ")).length;e<n;++e)this.Reset(t[e])}},{key:"Process",value:function(){for(var t=0,e=this.motions,n=e.length;t<n;++t)e[t].Process()}},{key:"GetMotionById",value:function(t){for(var e=0,n=this.motions,r=n.length;e<r;++e)if(n[e].id===t)return n[e];return null}}]),t}(),hr=n(8);function fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var dr=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.velocityX=null,this.velocityY=null,this.torque=null,this.accelerationX=null,this.accelerationY=null,this.spin=null,this.growthX=null,this.growthY=null,this.gravityX=null,this.gravityY=null,this.active=!0}return function(t,e,n){e&&fr(t.prototype,e),n&&fr(t,n)}(t,[{key:"CreateOscillatingObject",value:function(t,e,n,r){if(null!==this[t])throw new Error("Invalid key");this[t]={from:e,to:n,amplitude:r,active:!0}}},{key:"SetOscillatingObject",value:function(t,e,n,r){var i=this[t];if(null==i)return this.CreateOscillatingObject(t,e,n,r);i.from=e,i.to=n,i.amplitude=r,i.active=!0}},{key:"Nullify",value:function(t){null!=this[t]&&(this[t].active=!1)}}]),t}();function pr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var yr=Math.cos,vr=Math.sin,br=Math.atan2,mr=Math.sqrt,gr=Math.abs,wr=Math.PI,Ar=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.array=new Float32Array(9),this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}return function(t,e,n){e&&pr(t.prototype,e),n&&pr(t,n)}(t,[{key:"Identity",value:function(){this.a=1,this.b=0,this.c=0,this.d=1,this.e=0,this.f=0}},{key:"Copy",value:function(){var e=new t;return e.Set(this.a,this.b,this.c,this.d,this.e,this.f),e}},{key:"Set",value:function(t,e,n,r,i,o){return this.a=t,this.b=e,this.c=n,this.d=r,this.e=i,this.f=o,this}},{key:"SetTransform",value:function(t,e,n,r,i,o,a,s,u){t=null==t?0:t,e=null==e?0:e,n=null==n?1:n,r=null==r?1:r,i=null==i?0:i,o=null==o?0:o,a=null==a?0:a,s=null==s?0:s,u=null==u?0:u;var l=vr(i),c=yr(i),h=-vr(o),f=yr(o),d=vr(a),p=yr(a),y=c*n,v=l*n,b=-l*r,m=c*r;return this.a=p*y+d*b,this.b=p*v+d*m,this.c=h*y+f*b,this.d=h*v+f*m,this.e=t+s*y+u*b,this.f=e+s*v+u*m,this}},{key:"Translate",value:function(t,e){this.e+=t,this.f+=e}},{key:"TranslateTo",value:function(t,e){this.e=t,this.f=e}},{key:"ApplyTranslation",value:function(t,e){this.e=t*this.a+e*this.c+this.e,this.f=t*this.b+e*this.d+this.f}},{key:"ApplyScale",value:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e}},{key:"Scale",value:function(t,e){this.a*=t,this.b*=e,this.c*=t,this.d*=e,this.e*=t,this.f*=e}},{key:"Rotate",value:function(t){var e=Math.sin(t),n=Math.cos(t),r=this.a,i=this.c,o=this.e;this.a=r*n-this.b*e,this.b=r*e+this.b*n,this.c=i*n-this.d*e,this.d=i*e+this.d*n,this.e=o*n-this.f*e,this.f=o*e+this.f*n}},{key:"Decompose",value:function(t){var e=this.a,n=this.b,r=this.c,i=this.d,o=-br(-r,i),a=br(n,e);gr(o+a)<Sr?(t.rotation=a,e<0&&i>=0&&(t.rotation+=wr),t.skew.SetSame(0)):t.skew.Set(o,a),t.scale.Set(mr(e*e+n*n),mr(r*r+i*i)),t.position.Set(this.e,this.f)}},{key:"ApplyToContext",value:function(t){t.setTransform(this.a,this.b,this.c,this.d,this.e,this.f)}},{key:"AsArray",value:function(t){var e=this.array;return!0===t?(e[0]=this.a,e[1]=this.b,e[2]=0,e[3]=this.c,e[4]=this.d,e[5]=0,e[6]=this.e,e[7]=this.f,e[8]=1):(e[0]=this.a,e[1]=this.c,e[2]=this.e,e[3]=this.b,e[4]=this.d,e[5]=this.f,e[6]=0,e[7]=0,e[8]=1),e}}]),t}(),Sr=1e-5;function xr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Tr=Math.cos,Or=Math.sin,kr=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.position=new z.a(e,n),this.scale=new z.a(1,1),this.skew=new z.a(0,0),this.pivot=new z.a(0,0),this.localTransform=new Ar,this.globalTransform=new Ar,this.rotation=0,this.skewCX=1,this.skewSX=0,this.skewCY=0,this.skewSY=1}return function(t,e,n){e&&xr(t.prototype,e),n&&xr(t,n)}(t,[{key:"Set",value:function(t){t.Decompose(this),this.UpdateSkew()}},{key:"UpdateLocal",value:function(){var t=this.localTransform,e=this.position,n=this.scale,r=this.pivot;t.a=this.skewCX*n.x,t.b=this.skewSX*n.x,t.c=this.skewCY*n.y,t.d=this.skewSY*n.y,t.e=e.x-r.x*t.a+r.y*t.c,t.f=e.y-r.y*t.b+r.y*t.d}},{key:"UpdateGlobal",value:function(t){var e=this.localTransform,n=this.globalTransform,r=this.position,i=this.scale,o=this.pivot;e.a=this.skewCX*i.x,e.b=this.skewSX*i.x,e.c=this.skewCY*i.y,e.d=this.skewSY*i.y,e.e=r.x-o.x*e.a+o.y*e.c,e.f=r.y-o.y*e.b+o.y*e.d,n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.e=e.e*t.a+e.f*t.c+t.e,n.f=e.e*t.b+e.f*t.d+t.f}},{key:"UpdateSkew",value:function(){var t=this.skew,e=this.rotation;this.skewCX=Tr(e+t.y),this.skewSX=Or(e+t.y),this.skewCY=-Or(e-t.x),this.skewSY=Tr(e-t.x)}},{key:"ApplyGlobal",value:function(t){this.globalTransform.ApplyToContext(t)}}]),t}();function Cr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Er=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.transform=new kr(e,n),this.data={},this.parent=null,this.w=0,this.h=0,this.bounds=null,this.boundsDirty=!0,this.globalPosition=null}return function(t,e,n){e&&Cr(t.prototype,e),n&&Cr(t,n)}(t,[{key:"UpdateTransform",value:function(){null!=this.parent?this.transform.UpdateGlobal(this.parent.transform.globalTransform):this.transform.UpdateGlobal(Pr.globalTransform)}},{key:"GetGlobalPosition",value:function(){var t=this.transform.globalTransform;return null===this.globalPosition?this.globalPosition=new z.a(t.e,t.f):this.globalPosition.Set(t.e,t.f),this.globalPosition}},{key:"ComputeBounds",value:function(t){var e=0,n=0;return null!=t&&(e=this.width*t.x,n=this.height*t.y),null===this.bounds?(this.bounds=new Vt.a(this.x-e,this.y-n,this.x+this.width-e,this.y+this.height-n),this.bounds.belongsTo=this):this.bounds.Set(this.x-e,this.y-n,this.x+this.width-e,this.y+this.height-n),this.boundsDirty=!1,this.bounds}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t,this.transform.UpdateSkew()}},{key:"scale",get:function(){return this.transform.scale}},{key:"position",get:function(){return this.transform.position}},{key:"pivot",get:function(){return this.transform.pivot}},{key:"x",get:function(){return this.transform.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.transform.position.y},set:function(t){this.transform.position.y=t}},{key:"width",get:function(){return this.w*this.scale.x},set:function(t){this.w=t}},{key:"height",get:function(){return this.h*this.scale.y},set:function(t){this.h=t}}]),t}(),Pr=new kr;function Rr(t){return(Rr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function _r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Dr(t,e){return!e||"object"!==Rr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Ir(t){return(Ir=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function jr(t,e){return(jr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Lr=Math.abs,Nr=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=Dr(this,Ir(e).call(this,t,n))).children=[],r.render=!0,r.display=!0,r.transformShouldUpdate=!0,r.transformAutomaticUpdate=!0,r.motionManager=null,r.isBatchParent=!1,r.childDataBuffer=null,r.bufferData=null,r.programController=null,r.bufferStartIndex=0,r.bufferEndIndex=0,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&jr(t,e)}(e,Er),function(t,e,n){e&&_r(t.prototype,e),n&&_r(t,n)}(e,[{key:"PreDraw",value:function(){}},{key:"GLPreDraw",value:function(){}},{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&this.DrawChildren(t))}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren():this.GLDrawChildren(t)))}},{key:"RequestTransformUpdate",value:function(){this.transformShouldUpdate=!0}},{key:"DrawChildren",value:function(t){for(var e=0,n=this.children,r=n.length;e<r;++e)n[e].Draw(t)}},{key:"GLDrawChildren",value:function(t){for(var e=0,n=this.children,r=n.length;e<r;++e)n[e].GLDraw(t)}},{key:"GLBatchDrawChildren",value:function(){null!=this.childDataBuffer&&null!=this.programController&&this.programController.Execute(this.childDataBuffer,this.children.length)}},{key:"ComputeBatchBuffer",value:function(t){for(var e,n,r=0,i=this.children,o=i.length,a=[];r<o;++r)e=i[r],n=null!=t?t(e):e.GetBufferData(),e.bufferStartIndex=a.length,e.bufferEndIndex=a.length+n.length,a.push.apply(a,n);this.childDataBuffer=new Float32Array(a)}},{key:"UpdateInBuffer",value:function(){throw new Error(Gr)}},{key:"GetBufferData",value:function(){throw new Error(Gr)}},{key:"AddChild",value:function(t){var e=t.parent;return null!==e&&e.RemoveChild(t),this.children.push(t),t.parent=this,t}},{key:"AddChildren",value:function(){var t=0,e=arguments;Object(O.IsArray)(e[0])&&(e=e[0]);for(var n=e.length;t<n;++t)this.AddChild(e[t])}},{key:"AddSibling",value:function(t){var e=this.parent;return null!==e&&e.AddChild(t),t}},{key:"RemoveChild",value:function(t){var e=this.children,n=e.indexOf(t);if(-1!==n)return t.parent=null,e.fickleSplice(n)}},{key:"RemoveChildren",value:function(){var t,e,n=0,r=arguments;Object(O.IsArray)(i[0])&&(function(t){throw new Error('"'+t+'" is read-only')}("children"),i=i[0]);for(var i=this.children,o=[],a=r.length;n<a;++n)t=r[n],-1!==(e=i.indexOf(t))&&(o.push(i.fickleSplice(e)),t.parent=null);return o}},{key:"Swap",value:function(t){if(null!==this.parent){var e=this.parent.children,n=e.indexOf(this);if(-1!==n){-1===t&&(t=e.length-1);var r=e[t];e[t]=this,e[n]=r}}}},{key:"SendToFront",value:function(){this.Swap(-1)}},{key:"SendToBack",value:function(){this.Swap(0)}},{key:"Dump",value:function(){for(var t=0,e=this.children,n=e.length;t<n;++t)e[t].parent=null;e.length=0}},{key:"Destroy",value:function(){this.Dump(),null!==this.parent&&this.parent.RemoveChild(this)}},{key:"AttachTo",value:function(t){t.AddChild(this)}},{key:"Detach",value:function(){return null!==this.parent?this.parent.RemoveChild(this):null}},{key:"GetChildClosestTo",value:function(t,e){var n,r,i,o=0,a=1/0,s=this.children,u=s.length;if(0!==s.length){for(;o<u;++o)n=s[o],void 0!==e&&!1===e(n)||(r=Lr(n.position.GetDistanceSquared(t.x,t.y)))<a&&(a=r,i=n);return i}return null}},{key:"GetChildFurthestFrom",value:function(t,e){var n,r,i,o=0,a=0,s=this.children,u=s.length;if(0!==s.length){for(;o<u;++o)n=s[o],void 0!==e&&!1===e(n)||(r=Lr(n.position.GetDistanceSquared(t.x,t.y)))>a&&(a=r,i=n);return i}return null}},{key:"UseAsBatchParent",value:function(t){this.isBatchParent=!0,this.programController=t}}]),e}();Nr.prototype.Mount=Nr.prototype.AddChildren;var Gr="Cannot access buffer data directly on Container2D!",Br=n(9);function Fr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ur=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.frames=[],this.controller=e,this.sprite=e.sprite,this.id=n,this.onEnd=new Qt,this.onStop=new Qt,this.onStart=new Qt,this.currentFrame=0,this.currentFrameIndex=0,this.playing=!1,this.rate=60,this.timer=0,this.reverse=!1,this.overrideFrameRate=!1,null!=r&&(this.rate=r)}return function(t,e,n){e&&Fr(t.prototype,e),n&&Fr(t,n)}(t,[{key:"CreateFrame",value:function(t,e,n,r,i){i=null==i?this.rate:i,this.frames.push(new Le(t,e,n,r,i))}},{key:"AddFrame",value:function(t){(null==t.rate||t.rate<=0)&&(t.rate=this.rate),this.frames.push(t)}},{key:"GenerateFrame",value:function(t,e,n,r,i,o){var a,s=0,u=n/r;for(o=null==o?{}:o;s<i;++s)a=o[s],this.CreateFrame(s%u*t,(s/u|0)*e,t,e,a)}},{key:"SetFrame",value:function(t){t=null==t?0:t;var e=this.frames[t];void 0!==e&&(this.currentFrame=e,this.currentFrameIndex=t,this.currentFrame.Apply(this.sprite))}},{key:"GetFrameById",value:function(t,e){for(var n=0,r=this.frames,i=r.length;n<i;++n)if(r[n].id===t)return!0===e?n:r[n]}},{key:"SetFrameById",value:function(t){var e=this.GetFrameById(t,!0);this.SetFrame(e)}},{key:"Start",value:function(){this.playing=!0,this.onStart.Dispatch()}},{key:"Stop",value:function(){this.playing=!1,this.onStop.Dispatch()}},{key:"Process",value:function(){!0===this.playing&&(!0===this.overrideFrameRate?--this.timer<=0&&(this.timer=this.rate,this.NextFrame()):!0===this.currentFrame.Process()&&this.NextFrame())}},{key:"NextFrame",value:function(){var t=!1,e=this.frames,n=e.length;!1===this.reverse?++this.currentFrameIndex:--this.currentFrameIndex,this.currentFrameIndex>=n?(this.currentFrameIndex=0,t=!0):this.currentFrameIndex<0&&(this.currentFrameIndex=n-1,t=!0),this.currentFrame=e[this.currentFrameIndex],this.currentFrame.Apply(this.sprite),!0===t&&this.onEnd.Dispatch()}},{key:"Clear",value:function(){this.frames=[],this.currentFrame=null,this.playing=!1,this.currentFrameIndex=0,this.timer=this.rate}},{key:"Restart",value:function(t){this.SetFrame(t),this.ResetAllFrames(),this.Start(),this.timer=this.rate}},{key:"Reset",value:function(){this.SetFrame(0),this.ResetAllFrames(),this.timer=this.rate,this.playing=!1}},{key:"ResetAllFrames",value:function(){for(var t=0,e=this.frames,n=e.length;t<n;++t)e[t].Reset()}}]),t}();function Vr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Mr=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.animations=[],this.sprite=null,this.currentAnimation=null,null!=e&&(this.sprite=e)}return function(t,e,n){e&&Vr(t.prototype,e),n&&Vr(t,n)}(t,[{key:"CreateAnimation",value:function(t,e){var n=Ur(this,t,e);return this.animations.push(n),n}},{key:"AddAnimation",value:function(t){t.controller=this,this.animations.push(t)}},{key:"GetAnimationById",value:function(t){for(var e=0,n=this.animations,r=n.length,i=n[e];e<r;i=n[++e])if(i&&i.id===t)return i;return null}},{key:"PlayAnimation",value:function(t,e){var n=this.GetAnimationById(t);null!==n&&(this.currentAnimation=n,n.Restart(e))}},{key:"StopCurrentAnimation",value:function(){null!==this.currentAnimation&&this.currentAnimation.Stop()}},{key:"Process",value:function(){null!==this.currentAnimation&&this.currentAnimation.Process()}}]),t}(),Xr=n(10);function Yr(t){return(Yr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Hr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function Wr(t,e){return!e||"object"!==Yr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function qr(t){return(qr=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function zr(t,e){return(zr=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Kr=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=Wr(this,qr(e).call(this,t,n))).anchor=new z.a(0,0),i.SetPath(r),i.alpha=1,i.gco=Br.DEFAULT,i.interactive=!0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&zr(t,e)}(e,Nr),function(t,e,n){e&&Hr(t.prototype,e),n&&Hr(t,n)}(e,[{key:"Draw",value:function(t){if(this.PreDraw(t),!0===this.render){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t);var e=this.path;e&&e.Draw&&!0===this.display&&(t.globalAlpha=this.alpha,t.globalCompositeOperation=this.gco,e.Draw(t)),this.children.length>0&&this.DrawChildren(t)}}},{key:"GLDraw",value:function(t){if(this.GLPreDraw(t),!0===this.render){!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1));var e=this.path;e&&e.GLDraw&&!0===this.display&&e.GLDraw(t,this.transform),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t))}}},{key:"GetBufferData",value:function(){this.UpdateTransform();var t=this.transform.globalTransform.AsArray(!0);null==this.bufferData&&(this.bufferData=[]);var e=this.bufferData;return e.length=0,e[0]=t[0],e[1]=t[1],e[2]=t[2],e[3]=t[3],e[4]=t[4],e[5]=t[5],e[6]=t[6],e[7]=t[7],e[8]=t[8],this.path&&this.path.GetBufferData&&e.push.apply(e,this.path.GetBufferData()),e}},{key:"UpdateInBuffer",value:function(){this.UpdateTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.parent.childDataBuffer,n=this.bufferStartIndex;e[n]=t[0],e[n+1]=t[1],e[n+2]=t[2],e[n+3]=t[3],e[n+4]=t[4],e[n+5]=t[5],e[n+6]=t[6],e[n+7]=t[7],e[n+8]=t[8],this.path&&this.path.UpdateInBuffer&&this.path.UpdateInBuffer(e,n+9)}},{key:"IntersectsPoint",value:function(t){return!1!==this.interactive&&(Qr.SetV(t),Qr.SubtractV(this.position),this.path.IntersectsPoint(Qr))}},{key:"SetPath",value:function(t){void 0!==t&&(void 0!==t.w&&void 0!==t.h?(this.w=t.w,this.h=t.h):void 0!==t.GetLength?this.w=this.h=t.GetLength():void 0!==t.diameter?this.w=this.h=t.diameter:void 0!==t.aabb&&(this.w=t.aabb.w,this.h=t.aabb.h),this.path=t)}}]),e}(),Qr=new z.a(0,0);function Jr(t){return(Jr="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function Zr(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function $r(t,e){return!e||"object"!==Jr(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ti(t){return(ti=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ei(t,e){return(ei=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var ni=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=$r(this,ti(e).call(this,t,n))).anchor=new z.a(0,0),o.clip=new Vt.a(0,0,0,0),o.shape=new Vt.a(0,0,0,0),o.textureTransformation=new Ar,o.textureTranslation=new Ar,o.originalShape=new Vt.a(0,0,0,0),o.tint=new qe(1,1,1,1),o.texture=null,o.gco=Br.DEFAULT,o.interactive=!0,o.programController=null,o.animationController=null,r instanceof Jn?(o.programController=r,null!=i?o.SetTexture(r["originalTexture"+i]):o.SetTexture(r.originalTexture0)):null==r?o.SetTexture(ri):o.SetTexture(r),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ei(t,e)}(e,Nr),function(t,e,n){e&&Zr(t.prototype,e),n&&Zr(t,n)}(e,[{key:"Draw",value:function(t){if(this.PreDraw(t),!0===this.render){if(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display){var e=this.clip,n=e.tl,r=e.br,i=this.anchor;t.globalAlpha=this.tint.channel[3],t.globalCompositeOperation=this.gco,t.drawImage(this.texture.image,n.x,n.y,r.x,r.y,-this.w*i.x,-this.h*i.y,this.w,this.h)}this.children.length>0&&this.DrawChildren(t)}}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),!0===this.display&&null!==this.programController&&this.programController.Execute(this.transform.globalTransform.AsArray(!0),this.textureTranslation.AsArray(!0),this.textureTransformation.AsArray(!0),this.tint.channel,this.texture.uniformId),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t)))}},{key:"GetBufferData",value:function(){this.UpdateTransform(),this.UpdateTextureTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.textureTranslation.AsArray(!0),n=this.textureTransformation.AsArray(!0);null==this.bufferData&&(this.bufferData=[]);var r=this.bufferData;return r.length=0,r[0]=t[0],r[1]=t[1],r[2]=t[2],r[3]=t[3],r[4]=t[4],r[5]=t[5],r[6]=t[6],r[7]=t[7],r[8]=t[8],r[9]=e[0],r[10]=e[1],r[11]=e[2],r[12]=e[3],r[13]=e[4],r[14]=e[5],r[15]=e[6],r[16]=e[7],r[17]=e[8],r[18]=n[0],r[19]=n[1],r[20]=n[2],r[21]=n[3],r[22]=n[4],r[23]=n[5],r[24]=n[6],r[25]=n[7],r[26]=n[8],r}},{key:"UpdateInBuffer",value:function(){this.UpdateTransform(),this.UpdateTextureTransform();var t=this.transform.globalTransform.AsArray(!0),e=this.textureTranslation.AsArray(!0),n=this.textureTransformation.AsArray(!0),r=this.parent.childDataBuffer,i=this.bufferStartIndex;r[i]=t[0],r[i+1]=t[1],r[i+2]=t[2],r[i+3]=t[3],r[i+4]=t[4],r[i+5]=t[5],r[i+6]=t[6],r[i+7]=t[7],r[i+8]=t[8],r[i+9]=e[0],r[i+10]=e[1],r[i+11]=e[2],r[i+12]=e[3],r[i+13]=e[4],r[i+14]=e[5],r[i+15]=e[6],r[i+16]=e[7],r[i+17]=e[8],r[i+18]=n[0],r[i+19]=n[1],r[i+20]=n[2],r[i+21]=n[3],r[i+22]=n[4],r[i+23]=n[5],r[i+24]=n[6],r[i+25]=n[7],r[i+26]=n[8]}},{key:"UpdateTextureTransform",value:function(){var t=this.w/this.texture.fw,e=this.h/this.texture.fh;this.textureTranslation.TranslateTo(-this.w*this.anchor.x,-this.h*this.anchor.y),this.textureTransformation.TranslateTo(t*this.clip.tl.x/this.w,e*this.clip.tl.y/this.h)}},{key:"UpdateShape",value:function(t){null!=t&&(this.originalShape=t),this.shape.SetC(this.originalShape),this.shape.Scale(this.scale.x,this.scale.y)}},{key:"SetTexture",value:function(t){this.texture=t,this.ClipReconfigure(0,0,t.w,t.h),this.shape.SetC(this.clip),this.originalShape.SetC(this.shape)}},{key:"ClipReconfigure",value:function(t,e,n,r){var i=n/this.texture.fw,o=r/this.texture.fh,a=this.width,s=this.height;this.clip.Set(t,e,n,r),this.w=n,this.h=r,0!==a&&0!==s&&(this.width=a,this.height=s),this.textureTranslation.SetTransform(-n*this.anchor.x,-r*this.anchor.y,i,o),this.textureTransformation.SetTransform(i*this.clip.tl.x/n,o*this.clip.tl.y/r,i,o)}},{key:"CreateAnimation",value:function(t){null===this.animationController&&(this.animationController=new Mr(this));var e=0,n=this.animationController.CreateAnimation(t.id,t.rate);if(null!=t.spritesheet)for(;e<t.frames.length;++e)n.AddFrame(t.spritesheet.GetFrameById(t.frames[e]));return n}},{key:"IntersectsPoint",value:function(t){if(!1===this.interactive)return!1;var e=t.SubtractVC(this.position);return e.Add(this.width*this.anchor.x,this.height*this.anchor.y),this.shape.IntersectsPoint(e)}},{key:"width",get:function(){return this.w*this.scale.x},set:function(t){this.scale.x=t/this.w}},{key:"height",get:function(){return this.h*this.scale.y},set:function(t){this.scale.y=t/this.h}},{key:"alpha",get:function(){return this.tint.channel[3]},set:function(t){this.tint.channel[3]=t}}],[{key:"BUILD_DEFAULT_TEXTURE",value:function(t){if(!0===ii)throw new Error("Function can only be called once!");ri=new Pe(R(P(function(){var t=new Xr.a;return t.AddVertex(new z.a(0,0)),t.AddVertex(new z.a(64,0)),t.AddVertex(new z.a(64,64)),t.AddVertex(new z.a(0,64)),t.AddVertex(new z.a(0,0)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(64,0)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(64,64)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(0,64)),t.ComputeBounds(),t.style.stroke.lineWidth=3,new Kr(0,0,t)}),64,64,t),"__DEFAULT_SPRITE_TEXTURE__",64,64,64,64),ii=!0}},{key:"DEFAULT_TEXTURE",get:function(){return ri}}]),e}(),ri=null,ii=!1;function oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ai=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.velocity=new z.a(0,0),this.torque=0,this.spin=0,this.growth=new z.a(1,1),this.acceleration=new z.a(1,1),this.initialScale=new z.a(1,1),this.fade=!1,this.deflate=!1,this.gravity=new z.a,this.lifespan=0,this.lifespanTotal=0,this.dead=!1,this.entity=null,this.system=null,this.oscillation=null,this.oscillationOffset=0,this.Renew(e,n)}return function(t,e,n){e&&oi(t.prototype,e),n&&oi(t,n)}(t,[{key:"Process",value:function(){if(!0!==this.dead)if(this.lifespan++<this.lifespanTotal){var t=this.entity,e=this.velocity,n=1-this.lifespan/this.lifespanTotal,r=this.oscillation;if(e.AddV(this.gravity).MultiplyV(this.acceleration),0!==this.torque&&e.Rotate(this.torque),t.position.AddV(e),!0===this.fade&&(t.alpha=n),!0===this.deflate?t.scale.Set(n*this.initialScale.x,n*this.initialScale.y):t.scale.MultiplyV(this.growth),t.rotation+=this.spin,null!==r&&!0===r.active){var i=this.lifespan+this.oscillationOffset;null!=r.torque&&!0===r.torque.active&&(this.torque=Object(k.Oscillate)(i,r.torque.from,r.torque.to,r.torque.amplitude)),null!=r.spin&&!0===r.spin.active&&(this.spin=Object(k.Oscillate)(i,r.spin.from,r.spin.to,r.spin.amplitude)),null!=r.velocityX&&!0===r.velocityX.active&&(this.velocity.x=Object(k.Oscillate)(i,r.velocityX.from,r.velocityX.to,r.velocityX.amplitude)),null!=r.velocityY&&!0===r.velocityY.active&&(this.velocity.y=Object(k.Oscillate)(i,r.velocityY.from,r.velocityY.to,r.velocityY.amplitude)),null!=r.gravityX&&!0===r.gravityX.active&&(this.gravity.x=Object(k.Oscillate)(i,r.gravityX.from,r.gravityX.to,r.gravityX.amplitude)),null!=r.gravityY&&!0===r.gravityY.active&&(this.gravity.y=Object(k.Oscillate)(i,r.gravityY.from,r.gravityY.to,r.gravityY.amplitude)),null!=r.accelerationX&&!0===r.accelerationX.active&&(this.acceleration.x=Object(k.Oscillate)(i,r.accelerationX.from,r.accelerationX.to,r.accelerationX.amplitude)),null!=r.accelerationY&&!0===r.accelerationY.active&&(this.acceleration.y=Object(k.Oscillate)(i,r.accelerationY.from,r.accelerationY.to,r.accelerationY.amplitude)),null!=r.growthX&&!0===r.growthX.active&&(this.growth.x=Object(k.Oscillate)(i,r.growthX.from,r.growthX.to,r.growthX.amplitude)),null!=r.growthY&&!0===r.growthY.active&&(this.growth.y=Object(k.Oscillate)(i,r.growthY.from,r.growthY.to,r.growthY.amplitude))}}else this.dead=!0,this.entity.display=!1}},{key:"Renew",value:function(t,e){if(null!=t){this.dead=!1;var n=this.entity;if(null==t.texture)throw new Error("No texture or controller provided!");if(null===n?(n=this.entity=new ni(0,0,t.texture,t.unitId),null!=t.anchor&&(n.anchor.SetV(t.anchor),n.UpdateTextureTransform())):this.ResetEntity(t.unitId),null!=t.frames&&(t.frames[Object(O.RandomInteger)(0,t.frames.length-1)].Apply(n),n.scale.SetSame(1),n.UpdateTextureTransform()),this.RenewVector(t.position,n.position,e,0,0),this.RenewVector(t.velocity,this.velocity,e,0,0),this.RenewVector(t.gravity,this.gravity,e,0,0),this.RenewVector(t.acceleration,this.acceleration,e,1,1),this.RenewVector(t.growth,this.growth,e,1,1),this.RenewVector(t.scale,n.scale,e,1,1),this.RenewVector(t.scale,this.initialScale,e,1,1),null!=t.rotation?n.rotation=Object(O.MinMaxOrValue)(t.rotation):n.rotation=0,null!=t.lifespan?this.SetLifespan(t.lifespan):this.SetLifespan(0),null!=t.torque?this.torque=Object(O.MinMaxOrValue)(t.torque):this.torque=0,null!=t.spin?this.spin=Object(O.MinMaxOrValue)(t.spin):this.spin=0,null!=t.fade?this.fade=t.fade:this.fade=!1,null!=t.deflate?this.deflate=t.deflate:this.deflate=!1,null!=t.oscillation){var r=t.oscillation,i=this.oscillation;null===i&&(i=this.oscillation=new dr),i.active=!0,null!=r.offset?this.oscillationOffset=Object(O.MinMaxOrValue)(r.offset):this.oscillationOffset=0,null!=r.torque?i.SetOscillatingObject("torque",r.torque.from,r.torque.to,r.torque.amplitude):i.Nullify("torque"),null!=r.spin?i.SetOscillatingObject("spin",r.spin.from,r.spin.to,r.spin.amplitude):i.Nullify("spin"),null!=r.velocity&&(null!=r.velocity.x?i.SetOscillatingObject("velocityX",r.velocity.x.from,r.velocity.x.to,r.velocity.x.amplitude):i.Nullify("velocityX"),null!=r.velocity.y?i.SetOscillatingObject("velocityY",r.velocity.y.from,r.velocity.y.to,r.velocity.y.amplitude):i.Nullify("velocityY")),null!=r.gravity&&(null!=r.gravity.x?i.SetOscillatingObject("gravityX",r.gravity.x.from,r.gravity.x.to,r.gravity.x.amplitude):i.Nullify("gravityX"),null!=r.gravity.y?i.SetOscillatingObject("gravityY",r.gravity.y.from,r.gravity.y.to,r.gravity.y.amplitude):i.Nullify("gravityY")),null!=r.acceleration&&(null!=r.acceleration.x?i.SetOscillatingObject("accelerationX",r.acceleration.x.from,r.acceleration.x.to,r.acceleration.x.amplitude):i.Nullify("accelerationX"),null!=r.acceleration.y?i.SetOscillatingObject("accelerationY",r.acceleration.y.from,r.acceleration.y.to,r.acceleration.y.amplitude):i.Nullify("accelerationY")),null!=r.growth&&(null!=r.growth.x?i.SetOscillatingObject("growthX",r.growth.x.from,r.growth.x.to,r.growth.x.amplitude):i.Nullify("growthX"),null!=r.growth.y?i.SetOscillatingObject("growthY",r.growth.y.from,r.growth.y.to,r.growth.y.amplitude):i.Nullify("growthY"))}else null!==this.oscillation&&(this.oscillation.active=!1)}}},{key:"RenewVector",value:function(t,e,n,r,i){null!=t?null!=t.points?null!=t.moduloWrapper?(null!=t.indexGap&&(n+=t.indexGap),e.SetV(t.points[n%t.moduloWrapper])):e.SetV(Object(O.RandomInArray)(t.points)):null!=t.xy?e.SetSame(Object(O.MinMaxOrValue)(t.xy)):(null!=t.x?e.x=Object(O.MinMaxOrValue)(t.x):e.x=r,null!=t.y?e.y=Object(O.MinMaxOrValue)(t.y):e.y=i):e.Set(r,i)}},{key:"SetLifespan",value:function(t){this.lifespan=0,this.lifespanTotal=t}},{key:"ResetEntity",value:function(t){var e=this.entity;null!=t&&e.SetTexture(e.programController["originalTexture"+t]),e.scale.SetSame(1),e.alpha=1,e.display=!0,e.rotation=0}},{key:"Destroy",value:function(t){return(!0!==t||!1!==this.dead)&&(null!==this.system&&this.system.RemoveParticle(this),ui&&si.Store(this),!0)}}],[{key:"USE_POOl",get:function(){return ui},set:function(t){ui=!!t}},{key:"Pool",get:function(){return si}}]),t}(),si=new hr.a(z.a),ui=!0;function li(t){return(li="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function ci(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function hi(t){return(hi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fi(t,e){return(fi=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function di(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}si.Retrieve=function(t,e){this.PreRetrieve();var n=this.objects.pop();return n.Renew(t,e),n},si.Flood(function(){},1e3);var pi=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=function(t,e){return!e||"object"!==li(e)&&"function"!=typeof e?di(t):e}(this,hi(e).call(this,t,n))).particles=[],r.deletionTimer=new $t(60),r.deletionTimer.onFinish.Add(r.HandleParticleDeletion,di(di(r))),r.deletionTimer.Start(),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fi(t,e)}(e,Nr),function(t,e,n){e&&ci(t.prototype,e),n&&ci(t,n)}(e,[{key:"Process",value:function(){this.HandleParticles(),this.deletionTimer.Process()}},{key:"HandleParticles",value:function(){for(var t=0,e=this.particles,n=e.length;t<n;++t)e[t].Process()}},{key:"HandleParticleDeletion",value:function(){for(var t=0,e=this.particles,n=e.length,r=e[t];t<n;r=e[++t])r&&r.Destroy(!0)&&t--;this.deletionTimer.Start()}},{key:"AddParticle",value:function(t){return t.system=this,this.AddChild(t.entity),this.particles.push(t),t}},{key:"RemoveParticle",value:function(t){var e=this.particles,n=e.indexOf(t);if(-1!==n)return t.system=null,this.RemoveChild(t.entity),e.fickleSplice(n)}},{key:"Emit",value:function(t){for(var e=0;e<t.amount;++e)!0===ai.USE_POOL?this.AddParticle(ai.Pool.Retrieve(t,e)):this.AddParticle(new ai(t,e))}}]),e}();function yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var vi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.value=0}return function(t,e,n){e&&yi(t.prototype,e),n&&yi(t,n)}(t,[{key:"Add",value:function(t){this.value|=t}},{key:"Remove",value:function(t){this.value=this.value&~t}},{key:"Compare",value:function(t){return 0!=(this.value&t)}},{key:"Holds",value:function(t){return(this.value&t)===t}},{key:"Toggle",value:function(t){this.value^=t}}]),t}();function bi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var mi=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.NONE=0,this.next=1}return function(t,e,n){e&&bi(t.prototype,e),n&&bi(t,n)}(t,[{key:"Add",value:function(t){void 0===this[t=t.toUpperCase()]&&(this[t]=this.next,this.next=this.next<<1)}}]),t}(),gi=n(16);function wi(t){throw new Error('"'+t+'" is read-only')}function Ai(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Si=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.orders=[],this.classUsed=null,this.amount=1,this.locked=!1}return function(t,e,n){e&&Ai(t.prototype,e),n&&Ai(t,n)}(t,[{key:"Many",value:function(t){return this.amount=t,this}},{key:"Bind",value:function(t,e){return e&&(this.orders.length=0),this.orders.push(t),this}},{key:"Make",value:function(t){var e=0,n=this.amount,r=Object(O.CreateIteratorArgs)(arguments,"@","i");if(!0===this.locked)throw new Error('"Make" called twice before end!');for(this.locked=!0,this.orders.length=0,this.classUsed=t;e<n;++e)xi(arguments,r,e),this.orders.push(new(Function.prototype.bind.apply(t,arguments)));return this}},{key:"Call",value:function(t,e,n){var r,i,o,a=0,s=this.orders,u=Object(O.IsArray)(e),l="string"==typeof t,c=s[a];for(wi("isArray"),u=Array.isArray(e),wi("isString"),l="string"==typeof t,!0===u&&(o=Object(O.CreateIteratorArgs)(e,"@","i"));a<s.length;c=s[++a])!0===u&&(i=e.slice(),Object(O.ReplaceArgumentWithObjectValue)(c,i,"$"),xi(i,o,a)),!1===l?Object(O.Nested)(c,n,!1,!0,t.apply(null,i)):(r=Object(O.Nested)(c,t,!0),Object(O.Nested)(c,t).apply(r,i));return this}},{key:"Cast",value:function(t,e){for(var n=0,r=this.orders,i="string"==typeof e,o=r[n];n<r.length;o=r[++n])!0===i&&"$"===e[0]&&(e=Object(O.Nested)(o,e)),Object(O.Nested)(o,t,!1,!0,e);return this}},{key:"Done",value:function(){return this.amount=1,this.locked=!1,this.orders[0]}},{key:"Mass",value:function(){return this.amount=1,this.locked=!1,this.orders}}]),t}(),xi=function(t,e,n){var r=0,i=e[r],o=e.length;if(null!=e)for(;r<o;i=e[++r])if(-1!==i.iteratorIndex)if(i.mod&&i.val)switch(i.mod){case"+":t[i.iteratorIndex]=n+parseInt(i.val);break;case"*":t[i.iteratorIndex]=n*parseInt(i.val);break;case"-":t[i.iteratorIndex]=n-parseInt(i.val);break;case"/":t[i.iteratorIndex]=n/parseInt(i.val);break;default:throw new Error("Bad mod!")}else t[i.iteratorIndex]=n},Ti=n(11);function Oi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var ki=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.canvas=e,this.w=n,this.h=r,this.aspectRatio=Object(k.SimplifyAspectRatio)(n,r),this.onChange=new Qt,this.mode=i,this.stage=null,this.rootContainer=null,this.currentWidth=0,this.currentHeight=0,e.setAttribute("width",n),e.setAttribute("height",r),window.addEventListener("resize",this.OnWindowResize.bind(this))}return function(t,e,n){e&&Oi(t.prototype,e),n&&Oi(t,n)}(t,[{key:"OnWindowResize",value:function(){this[this.mode]()}},{key:"Trigger",value:function(){return this.OnWindowResize(),this}},{key:"Reconfigure",value:function(t,e,n){return this.w=t,this.h=e,this.mode=n,this}},{key:"BindStage",value:function(t){return this.stage=t,this}},{key:"BindRootContainer",value:function(t){return this.rootContainer=t,this}},{key:"SetCurrent",value:function(t,e){this.canvas.setAttribute("width",t),this.canvas.setAttribute("height",e),this.currentWidth=t,this.currentHeight=e,null!==this.stage&&(this.stage.w=t,this.stage.h=e,this.stage.mouse&&this.stage.mouse.scale.Set(t/this.w,e/this.h),this.stage.touch&&this.stage.touch.scale.Set(t/this.w,e/this.h),!0===this.stage.usingWebGL&&this.stage.GLConfig()),null!==this.rootContainer&&this.rootContainer.scale.Set(t/this.w,e/this.h)}},{key:"FillScreen",value:function(){this.SetCurrent(window.innerWidth,window.innerHeight)}},{key:"KeepAspectRatio",value:function(){var t=window.innerWidth,e=t/this.aspectRatio[0]*this.aspectRatio[1];this.SetCurrent(t,e)}},{key:"KeepAspectRatioMIN",value:function(){var t,e=window.innerWidth;e<=this.w&&(e=this.w),t=e/this.aspectRatio[0]*this.aspectRatio[1],this.SetCurrent(e,t)}},{key:"KeepAspectRatioMAX",value:function(){var t,e=window.innerWidth;e>=this.w&&(e=this.w),t=e/this.aspectRatio[0]*this.aspectRatio[1],this.SetCurrent(e,t)}},{key:"KeepAspectRatioFIT",value:function(){var t=window.innerWidth,e=t/this.aspectRatio[0]*this.aspectRatio[1];e>=window.innerHeight&&(t=(e=window.innerHeight)/this.aspectRatio[1]*this.aspectRatio[0]),this.SetCurrent(t,e)}}],[{key:"FILL_SCREEN",get:function(){return Ci}},{key:"KEEP_ASPECT_RATIO",get:function(){return Ei}},{key:"KEEP_ASPECT_RATIO_MIN",get:function(){return Pi}},{key:"KEEP_ASPECT_RATIO_MAX",get:function(){return Ri}},{key:"KEEP_ASPECT_RATIO_FIT",get:function(){return _i}}]),t}(),Ci="FillScreen",Ei="KeepAspectRatio",Pi="KeepAspectRatioMIN",Ri="KeepAspectRatioMAX",_i="KeepAspectRatioFIT";function Di(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Ii=function(){function t(e,n,r,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.nodes={},this.objects=[],this.convergence=[],this.objectCap=0,this.levelCap=0,this.level=0,this.aabb=null,this.hasSplit=!1,this.Set(e,n,r,i)}return function(t,e,n){e&&Di(t.prototype,e),n&&Di(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.aabb=t,this.level=e,this.objectCap=n,this.levelCap=r}},{key:"FromPool",value:function(e,n,r,i){return!0===Fi?Bi.Retrieve(e,n,r,i):new t(e,n,r,i)}},{key:"Store",value:function(){Bi.Store(this)}},{key:"Add",value:function(t){var e=0,n="",r=this.objects,i=this.nodes;if(!0!==this.hasSplit||null===(n=this.Marking(t))){if(r.push(t),this.level<this.levelCap&&r.length>this.objectCap)for(!1===this.hasSplit&&this.Split();e<r.length;)null!==(n=this.Marking(r[e]))?i[n].Add(r.fickleSplice(e)):++e}else i[n].Add(t)}},{key:"Converge",value:function(t){var e="",n=this.nodes,r=this.convergence;return r.length=0,r.push.apply(r,this.objects),!0===this.hasSplit&&(null!==(e=this.Marking(t))?r.push.apply(r,n[e].Converge(t)):(r.push.apply(r,n[ji].Converge(t)),r.push.apply(r,n[Li].Converge(t)),r.push.apply(r,n[Ni].Converge(t)),r.push.apply(r,n[Gi].Converge(t)))),r}},{key:"Split",value:function(){var t=this.level+1,e=this.objectCap,n=this.levelCap,r=this.nodes,i=this.aabb;r[ji]=this.FromStore(i.GetQuadrant(ji),t,e,n),r[Li]=this.FromStore(i.GetQuadrant(Li),t,e,n),r[Ni]=this.FromStore(i.GetQuadrant(Ni),t,e,n),r[Gi]=this.FromStore(i.GetQuadrant(Gi),t,e,n),this.hasSplit=!0}},{key:"Dump",value:function(){var t=this.nodes;this.objects.length=0,!0===this.hasSplit&&(t[ji].Dump(),t[Li].Dump(),t[Ni].Dump(),t[Gi].Dump(),!0===Fi&&(t[ji].Store(),t[Li].Store(),t[Ni].Store(),t[Gi].Store())),this.nodes={},this.hasSplit=!1}},{key:"Marking",value:function(t){var e=this.nodes;return!0===e[ji].aabb.ContainsAABB2D(t)?ji:!0===e[Li].aabb.ContainsAABB2D(t)?Li:!0===e[Ni].aabb.ContainsAABB2D(t)?Ni:!0===e[Gi].aabb.ContainsAABB2D(t)?Gi:null}},{key:"ConcatNodes",value:function(t){var e=this.nodes;return void 0===t&&(t=[]),t.push(this),!1===this.hasSplit?t:(e[ji].ConcatNodes(t),e[Li].ConcatNodes(t),e[Ni].ConcatNodes(t),e[Gi].ConcatNodes(t),t)}}],[{key:"pool",get:function(){return Bi}},{key:"USE_POOL",get:function(){return Fi},set:function(t){Fi=t}}]),t}(),ji="TL",Li="TR",Ni="BL",Gi="BR",Bi=new hr.a(Ii),Fi=!0;function Ui(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}Bi.Retrieve=function(t,e,n,r){this.PreRetrieve();var i=this.objects.pop();return i.Set(t,e,n,r),i},Bi.Flood(function(t){t.Set(null,0,0,0)},500);var Vi=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.element.setAttribute("tabindex","1"),this.element.focus(),this.element.addEventListener("keydown",this.OnKeyDown.bind(this)),this.element.addEventListener("keyup",this.OnKeyUp.bind(this)),this.onDown=new Qt,this.onUp=new Qt}return function(t,e,n){e&&Ui(t.prototype,e),n&&Ui(t,n)}(t,[{key:"OnKeyDown",value:function(t){t.preventDefault(),t.stopPropagation(),this.onDown.Dispatch(this.element,t)}},{key:"OnKeyUp",value:function(t){t.preventDefault(),t.stopPropagation(),this.onUp.Dispatch(this.element,t)}}]),t}();function Mi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Xi=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.position=new z.a,this.scale=new z.a(1,1),this.offset=new z.a(n,r),this.eventData={position:this.position,native:null},this.element.addEventListener("mousemove",this.OnMove.bind(this)),this.element.addEventListener("mousedown",this.OnDown.bind(this)),this.element.addEventListener("mouseup",this.OnUp.bind(this)),this.element.addEventListener("mouseleave",this.OnLeave.bind(this)),this.element.addEventListener("wheel",this.OnWheel.bind(this),{passive:!0}),this.onMove=new Qt,this.onDown=new Qt,this.onUp=new Qt,this.onLeave=new Qt,this.onWheel=new Qt}return function(t,e,n){e&&Mi(t.prototype,e),n&&Mi(t,n)}(t,[{key:"OnMove",value:function(t){return t.preventDefault(),t.stopPropagation(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onMove.Dispatch(this.element,this.eventData),!1}},{key:"OnDown",value:function(t){t.stopPropagation(),this.CalculatePosition(t.pageX,t.pageY),this.eventData.native=t,this.onDown.Dispatch(this.element,this.eventData)}},{key:"OnUp",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onUp.Dispatch(this.element,this.eventData)}},{key:"OnLeave",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onLeave.Dispatch(this.element,this.eventData)}},{key:"OnWheel",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onWheel.Dispatch(this.element,this.eventData)}},{key:"CalculatePosition",value:function(t,e){var n=this.position;n.Set(t,e),n.Subtract(this.element.offsetLeft,this.element.offsetTop),n.SubtractV(this.offset),n.DivideV(this.scale)}}],[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}}]),t}();function Yi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var Hi=function(){function t(e,n,r){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.element=e,this.position=new z.a,this.scale=new z.a(1,1),this.offset=new z.a(n,r),this.eventData={position:this.position,native:null},this.element.addEventListener("touchmove",this.OnMove.bind(this)),this.element.addEventListener("touchstart",this.OnStart.bind(this),{passive:!0}),this.element.addEventListener("touchend",this.OnEnd.bind(this)),this.element.addEventListener("touchcancel",this.OnCancel.bind(this)),this.onMove=new Qt,this.onStart=new Qt,this.onEnd=new Qt,this.onCancel=new Qt}return function(t,e,n){e&&Yi(t.prototype,e),n&&Yi(t,n)}(t,[{key:"OnMove",value:function(t){return t.preventDefault(),t.stopPropagation(),this.CalculatePosition(t.touches.item(0).pageX,t.touches.item(0).pageY),this.eventData.native=t,this.onMove.Dispatch(this.element,this.eventData),!1}},{key:"OnStart",value:function(t){t.stopPropagation(),this.CalculatePosition(t.touches.item(0).pageX,t.touches.item(0).pageY),this.eventData.native=t,this.onStart.Dispatch(this.element,this.eventData)}},{key:"OnEnd",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onEnd.Dispatch(this.element,this.eventData)}},{key:"OnCancel",value:function(t){t.stopPropagation(),this.eventData.native=t,this.onCancel.Dispatch(this.element,this.eventData)}},{key:"CalculatePosition",value:function(t,e){var n=this.position;n.Set(t,e),n.Subtract(this.element.offsetLeft,this.element.offsetTop),n.SubtractV(this.offset),n.DivideV(this.scale)}}],[{key:"x",get:function(){return this.position.x}},{key:"y",get:function(){return this.position.y}}]),t}();function Wi(t){return(Wi="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function qi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function zi(t){return(zi=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function Ki(t,e){return(Ki=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function Qi(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}var Ji=function(t){function e(t){var n;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),n=function(t,e){return!e||"object"!==Wi(e)&&"function"!=typeof e?Qi(t):e}(this,zi(e).call(this,t.x,t.y)),"string"==typeof t.canvas&&(t.canvas=document.getElementById(t.canvas)),n.canvas=t.canvas,n.w=t.canvas.width,n.h=t.canvas.height,n.id=null,n.backgroundColor="rgba(10,20,30,1)",n.clear=!0,n.fill=!0,n.usingWebGL=!1,n.positionReconfiguration=new z.a(t.x,t.y),n.canvasManager=null,n.mouse=null,n.touch=null,"WebGL"===t.mode){if(n.gl=t.canvas.getContext("webgl",{antialias:t.antialias,preserveDrawingBuffer:!0}),null==n.gl&&(n.gl=t.canvas.getContext("experimental-webgl")),null==n.gl)throw new Error("WebGL is not supported!");n.gl.clearColor(.0392156862745098,.0784313725490196,.11764705882352941,1),n.usingWebGL=!0,!0!==t.noTicker&&(n.ticker=new ee(n.GLProcess.bind(Qi(Qi(n))),60,t.halt)),n.GLConfig(n.gl)}else n.rc=t.canvas.getContext("2d"),!0!==t.noTicker&&(n.ticker=new ee(n.Process.bind(Qi(Qi(n))),60,t.halt));return null!=t.backgroundColor&&(n.backgroundColor=t.backgroundColor),!1===t.clear&&(n.clear=!1),!1===t.fill&&(n.fill=!1),null!=t.id&&(n.id=t.id),n.onProcess=new Qt,!0!==t.noMouse&&(n.mouse=new Xi(t.canvas,t.x,t.y)),!0!==t.noKeyboard&&(n.keyboard=new Vi(t.canvas)),!0!==t.noTouch&&(n.touch=new Hi(t.canvas,t.x,t.y)),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&Ki(t,e)}(e,Nr),function(t,e,n){e&&qi(t.prototype,e),n&&qi(t,n)}(e,[{key:"PreDraw",value:function(t){t.setTransform(1,0,0,1,0,0),t.globalAlpha=1,t.globalCompositeOperation=Br.DEFAULT,!0===this.fill?(t.fillStyle=this.backgroundColor,t.fillRect(0,0,this.w,this.h)):!0===this.clear&&t.clearRect(0,0,this.w,this.h)}},{key:"GLConfig",value:function(t){null==t&&(t=this.gl),this.position.SetSame(0),this.scale.Set(2/this.w,-2/this.h),this.position.Add(-1,1),this.position.Add(this.positionReconfiguration.x*this.scale.x,this.positionReconfiguration.y*this.scale.y),this.UpdateTransform(),t.viewport(0,0,this.w,this.h),t.enable(t.BLEND),t.disable(t.DEPTH_TEST),t.blendFunc(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA)}},{key:"GLPreDraw",value:function(t){!0===this.clear&&t.clear(t.COLOR_BUFFER_BIT)}},{key:"GLPostDraw",value:function(t){t.flush()}},{key:"Process",value:function(t){this.Draw(this.rc),this.onProcess.Dispatch(this,t)}},{key:"GLProcess",value:function(t){this.GLDraw(this.gl),this.GLPostDraw(this.gl),this.onProcess.Dispatch(this,t)}},{key:"MixedProcess",value:function(t){!0===this.usingWebGL?(this.GLDraw(this.gl),this.GLPostDraw(this.gl)):this.Draw(this.rc),this.onProcess.Dispatch(this,t)}}]),e}();function Zi(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var $i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stages=[],this.currentStage=null,this.onlyCurrent=!1,this.options=null,this.ticker=new ee(this.Process.bind(this),60,e.halt),this.SetOptions(e)}return function(t,e,n){e&&Zi(t.prototype,e),n&&Zi(t,n)}(t,[{key:"SetOptions",value:function(t){null!=t&&(this.options=t)}},{key:"CreateStage2D",value:function(t){var e,n=document.createElement("canvas");"string"==typeof t&&(e=t,t=null),null==t&&(t=this.options),null==t&&(t={}),null!==e&&(t.id=e),null!=t.width&&(n.width=t.width),null!=t.height&&(n.height=t.height),null!=t.className&&(n.className=t.className),null==t.rootNode&&(t.rootNode=document.body),t.rootNode.appendChild(n),t.canvas=n,t.noTicker=!0,t.halt=!0;var r=new Ji(t);return t.id=null,t.canvas=null,this.stages.push(r),r}},{key:"GetStages",value:function(){for(var t=0,e=0,n=this.stages,r=[],i=n.length,o=n[t];t<i;o=n[++t])for(o=n[t];e<arguments.length;++e)o.id===arguments[e]&&r.push(o);return r}},{key:"Process",value:function(t){for(var e=0,n=this.stages,r=n.length;e<r;++e)n[e].MixedProcess(t)}}]),t}();function to(t){return(to="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function eo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function no(t,e){return!e||"object"!==to(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ro(t){return(ro=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function io(t,e){return(io=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var oo=function(t){function e(t,n,r,i){var o;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(o=no(this,ro(e).call(this,t,n,null==r?ao:r,i))).pattern=null,o.patternOffset=new z.a(0,0),o}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&io(t,e)}(e,ni),function(t,e,n){e&&eo(t.prototype,e),n&&eo(t,n)}(e,[{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display&&null!==this.pattern&&(t.globalAlpha=this.tint.channel[3],t.globalCompositeOperation=this.gco,t.fillStyle=this.pattern,t.beginPath(),t.rect(0,0,this.w,this.h),t.closePath(),t.translate(this.patternOffset.x,this.patternOffset.y),t.fill()),this.children.length>0&&this.DrawChildren(t))}},{key:"GeneratePattern",value:function(t,e,n){null==this.programController?(this.pattern=t.createPattern(this.texture.image,null),this.w=e,this.h=n,this.scale.SetSame(1)):(this.width=e,this.height=n,this.textureTransformation.SetTransform(0,0,this.scale.x,this.scale.y))}},{key:"OffsetPattern",value:function(t,e){this.patternOffset.Add(t,e),this.textureTransformation.Translate(-t/this.w,-e/this.h)}},{key:"SetPatternOffset",value:function(t,e){this.patternOffset.Set(t,e),this.textureTransformation.TranslateTo(-t/this.w,-e/this.h)}},{key:"GetPatternOffset",value:function(){return this.patternOffset}}],[{key:"BUILD_DEFAULT_TEXTURE",value:function(t){if(!0===so)throw new Error("Function can only be called once!");ao=new Pe(R(P(function(){var t=new Xr.a;return t.AddVertex(new z.a(0,0)),t.AddVertex(new z.a(64,0)),t.AddVertex(new z.a(64,64)),t.AddVertex(new z.a(0,64)),t.AddVertex(new z.a(0,0)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(64,0)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(64,64)),t.AddVertex(new z.a(32,32)),t.AddVertex(new z.a(0,64)),t.ComputeBounds(),t.style.fill.color="#234d20",t.style.stroke.lineWidth=3,new Kr(0,0,t)}),64,64,t),"__DEFAULT_TILESPRITE_TEXTURE__",64,64,64,64),so=!0}},{key:"DEFAULT_TEXTURE",get:function(){return ao}}]),e}(),ao=null,so=!1;function uo(t){return(uo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function lo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function co(t,e){return!e||"object"!==uo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function ho(t){return(ho=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function fo(t,e){return(fo=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var po=function(t){function e(t,n,r){var i;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(i=co(this,ho(e).call(this,t,n))).id=parseInt(r.id),i.cx=parseInt(r.x),i.cy=parseInt(r.y),i.w=parseInt(r.width),i.h=parseInt(r.height),i.xoffset=parseInt(r.xoffset),i.yoffset=parseInt(r.yoffset),i.xadvance=parseInt(r.xadvance),i.yadvance=0,i.kernings=[],i.translation=new Ar,i.transformation=new Ar,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&fo(t,e)}(e,Er),function(t,e,n){e&&lo(t.prototype,e),n&&lo(t,n)}(e,[{key:"Draw",value:function(t,e){t.drawImage(e,this.cx,this.cy,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}},{key:"GLDrawAuto",value:function(t,e,n){this.UpdateMatrices(),t.Execute(this.transform.globalTransform.AsArray(!0),this.translation.AsArray(!0),this.transformation.AsArray(!0),e,n)}},{key:"GLDraw",value:function(t,e,n){t.Execute(this.transform.globalTransform.AsArray(!0),this.translation.AsArray(!0),this.transformation.AsArray(!0),e,n)}},{key:"ApplyKernings",value:function(t){for(var e,n=0,r=t.length;n<r;++n)e=t[n].attributes,parseInt(e.first)===this.id&&this.kernings.push(parseInt(e.first),parseInt(e.second),parseInt(e.amount))}},{key:"Crunch",value:function(t){if(this.position.SetSame(0),null!=t&&(this.x=t.x+t.xadvance,this.y=this.yadvance=t.yadvance,t.kernings&&t.kernings.length>0&&this.kernings.length>0))for(var e=0,n=this.kernings,r=n.length;e<r;e+=3)if(n[e+1]===t.id){this.x+=n[e+2];break}this.position.Add(this.xoffset,this.yoffset)}},{key:"UpdateMatrices",value:function(){if(null!=this.parent){var t=this.parent.texture,e=this.width/t.fw,n=this.height/t.fh;this.UpdateTransform(),this.translation.SetTransform(0,0,e,n),this.transformation.SetTransform(e*this.cx/this.width,n*this.cy/this.height,e,n)}}}]),e}();function yo(t){return(yo="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function vo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function bo(t,e){return!e||"object"!==yo(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function mo(t){return(mo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function go(t,e){return(go=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var wo=function(t){function e(t,n,r,i,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=bo(this,mo(e).call(this,t,n,r,a))).fontData=i,s.lineHeight=i.font.common.attributes.lineHeight,s.chars=[],s.maxWidth=1024,s.text="",s.autoUpdateChars=!0,null!=o&&(s.text=o),s.ComputeText(),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&go(t,e)}(e,ni),function(t,e,n){e&&vo(t.prototype,e),n&&vo(t,n)}(e,[{key:"Draw",value:function(t){this.PreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),this.transform.ApplyGlobal(t),!0===this.display&&(t.globalAlpha=this.alpha,t.globalCompositeOperation=this.gco,this.DrawText(t)),this.children.length>0&&this.DrawChildren(t))}},{key:"GLDraw",value:function(t){this.GLPreDraw(t),!0===this.render&&(!0===this.transformShouldUpdate&&(this.UpdateTransform(),!1===this.transformAutomaticUpdate&&(this.transformShouldUpdate=!1)),!0===this.display&&null!==this.programController&&this.GLDrawText(t),this.children.length>0&&!0===this.display&&(!0===this.isBatchParent?this.GLBatchDrawChildren(t):this.GLDrawChildren(t)))}},{key:"DrawText",value:function(t){for(var e=0,n=this.chars,r=n.length,i=this.texture.image;e<r;++e)n[e].Draw(t,i)}},{key:"GLDrawText",value:function(){var t=0,e=this.chars,n=e.length;if(!0===this.autoUpdateChars)for(;t<n;++t)e[t].GLDrawAuto(this.programController,this.tint.channel,this.texture.uniformId);else for(;t<n;++t)e[t].GLDraw(this.programController,this.tint.channel,this.texture.uniformId)}},{key:"ComputeText",value:function(){var t,e,n,r=0,i=0,o=0,a=!1,s=0,u=0,l=0,c=0,h=this.chars,f=this.text,d=f.length;for(this.UpdateTransform(),h.length=0,this.fontData.font.kernings&&(t=this.fontData.font.kernings.kerning);r<d;++r){var p=f.charCodeAt(r);n=h[r-1-o],10!==p?(e=new po(0,0,this.GetCharDataById(p)),null!=t&&e.ApplyKernings(t),e.Crunch(n),l=e.position.x+e.width,c=e.position.y+e.height,(l>this.maxWidth||!0===a)&&(e.position.SetSame(0),e.yadvance=this.lineHeight*++i,e.position.Add(e.xoffset,e.yoffset+e.yadvance),a=!1),l>s&&(s=l),c>u&&(u=c),e.parent=this,e.UpdateMatrices(),h.push(e)):(o++,a=!0)}this.w=s,this.h=u}},{key:"UpdateChars",value:function(){for(var t=0,e=this.chars,n=e.length;t<n;++t)e[t].UpdateMatrices()}},{key:"GetCharDataById",value:function(t){for(var e=0,n=this.fontData.font.chars.char,r=n.length;e<r;++e)if(parseInt(n[e].attributes.id)===t)return n[e].attributes}},{key:"UpdateInBuffer",value:function(){throw new Error(Ao)}},{key:"GetBufferData",value:function(){throw new Error(Ao)}}]),e}(),Ao="Cannot access buffer data directly on Container2D!";function So(t){return(So="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function xo(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function To(t,e){return!e||"object"!==So(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function Oo(t){return(Oo=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function ko(t,e){return(ko=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var Co=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=To(this,Oo(e).call(this,0,0))).focus=t,r.target=n,r.velocity=new z.a(0,0),r.stopRadiusSq=1e3,r.EPSILON=2e-4,r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&ko(t,e)}(e,Nr),function(t,e,n){e&&xo(t.prototype,e),n&&xo(t,n)}(e,[{key:"Process",value:function(){var t=this.target;if(null!=t){Po.SetV(t.position),Po.Invert(),Po.AddV(this.focus),Eo.SetV(this.position).SubtractV(Po);var e=Eo.GetMagnitudeSquared();if(e<this.stopRadiusSq)return;e*=this.EPSILON;var n=Eo.GetAngle();this.velocity.Set(e*Math.cos(n),e*Math.sin(n)),this.position.SubtractV(this.velocity)}}},{key:"SetTarget",value:function(t){return this.target=t,this}}]),e}(),Eo=new z.a(0,0),Po=new z.a(0,0);n.d(e,"Math",function(){return k}),n.d(e,"Assert",function(){return Te.a}),n.d(e,"Pool",function(){return hr.a}),n.d(e,"FlagList",function(){return vi}),n.d(e,"FlagEnum",function(){return mi}),n.d(e,"Cache",function(){return ke}),n.d(e,"Glob",function(){return gi.a}),n.d(e,"Maker",function(){return Si}),n.d(e,"Utility",function(){return O}),n.d(e,"Cipher",function(){return r}),n.d(e,"BrowserUtility",function(){return i}),n.d(e,"Style",function(){return Wt}),n.d(e,"Time",function(){return d}),n.d(e,"CharacterSets",function(){return Ti.a}),n.d(e,"CanvasManager",function(){return ki}),n.d(e,"Vector2D",function(){return z.a}),n.d(e,"Matrix2D",function(){return Ar}),n.d(e,"Transform2D",function(){return kr}),n.d(e,"QuadtreeNode",function(){return Ii}),n.d(e,"Ease",function(){return o}),n.d(e,"Collision",function(){return c}),n.d(e,"Geom",function(){return f}),n.d(e,"Path",function(){return Ht}),n.d(e,"CoreEntity2D",function(){return Er}),n.d(e,"Container2D",function(){return Nr}),n.d(e,"Stage2D",function(){return Ji}),n.d(e,"Stadium",function(){return $i}),n.d(e,"Graphic2D",function(){return Kr}),n.d(e,"Sprite",function(){return ni}),n.d(e,"Tilesprite",function(){return oo}),n.d(e,"Char",function(){return po}),n.d(e,"BitmapText",function(){return wo}),n.d(e,"Camera2D",function(){return Co}),n.d(e,"Shader",function(){return p}),n.d(e,"Load",function(){return y}),n.d(e,"Controller",function(){return b}),n.d(e,"CP",function(){return m}),n.d(e,"Motion",function(){return g}),n.d(e,"Particle",function(){return A}),n(27)},function(t,e,n){"use strict";n.r(e),n.d(e,"RandomInteger",function(){return u}),n.d(e,"RandomFloat",function(){return l}),n.d(e,"IsInteger",function(){return c}),n.d(e,"IsFloat",function(){return h}),n.d(e,"IsArray",function(){return f}),n.d(e,"Sign",function(){return d}),n.d(e,"Clamp",function(){return p}),n.d(e,"InverseClamp",function(){return y}),n.d(e,"FlipACoin",function(){return v}),n.d(e,"GenerateSequence",function(){return b}),n.d(e,"RandomInArray",function(){return m}),n.d(e,"MinMaxOrValue",function(){return g}),n.d(e,"UUID",function(){return w}),n.d(e,"ApplyProperties",function(){return A}),n.d(e,"Nested",function(){return S}),n.d(e,"ArrayGetRandom",function(){return x}),n.d(e,"ArrayShuffle",function(){return T}),n.d(e,"Base16ToBase10",function(){return O}),n.d(e,"Base2ToBase10",function(){return k}),n.d(e,"IsObjectEmpty",function(){return C}),n.d(e,"DeepClone",function(){return E}),n.d(e,"CreateIteratorArgs",function(){return P}),n.d(e,"ReplaceArgumentWithObjectValue",function(){return R}),n.d(e,"PRINT_VERSION",function(){return _});var r=n(3),i=n(11);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}var a=n(28).version,s=Math.random;function u(t,e){return s()*(e-t+1)+t|0}function l(t,e){return s()*(e-t)+t}function c(t){return Number(t)===t&&t%1==0}function h(t){return Number(t)===t&&t%1!=0}function f(t){return"[object Array]"===Object.prototype.toString.call(t)}function d(t,e){return 0===t?!0===e?1:0:t>0?1:-1}function p(t,e,n){return t<e?e:t>n?n:t}function y(t,e,n){return t<e?n:t>n?e:t}function v(t,e){return 1===u(1,2)?t:e}function b(t,e,n,i){for(var o=t,a=[];o<e;o+=n)a.push(Object(r.PrecisionRound)(o,i));return a}function m(t){return t[u(0,t.length-1)]}function g(t,e){return null!=t.min&&null!=t.max?l(t.min,t.max):null!=t.values&&t.values.length>0?m(t.values):null!=e&&t[e].length>0?m(t[e]):t}function w(t,e,n,r){var o,a,s=0,l="",h=t/e,f=i.a[n];for(t=null==t?32:t,e=null==e?4:e,n=null==n?0:n,r=null==r?"-":r;s<t;++s)0!==(a=s/h)&&c(a)?l+=r:(o=u(1,f.length-1),l+=f.charAt(o));return l}function A(t,e){var n;if(void 0!==e)for(n in e)void 0!==t[n]&&(t[n]=e[n])}function S(t,e,n,r,i,o){var a;if("string"==typeof e&&(o=null==o?".":o,e=e.split(o)),e.length>1){if(void 0!==t[a=e.shift()])return S(t[a],e,n,r,i,o)}else{if(void 0!==t[a=e.shift()])return!0===r?void(t[a]=i):!0===n?t:t[a];if(!0===r)return void(t[a]=i)}}function x(t,e){for(var n=0,r=[],i={},o=t.length;n<e;++n){var a=s()*o|0;void 0===i[a]?(i[a]=null,r.push(t[a])):n--}return r}function T(t){for(var e,n,r=t.length-1;r>=0;--r)n=s()*r|0,e=t[r],t[r]=t[n],t[n]=e}function O(t){return parseInt(t,16)}function k(t){return parseInt(t,2)}function C(t){var e;for(e in t)if(t.hasOwnProperty(e))return!1;return JSON.stringify(t)===JSON.stringify({})}function E(t){var e,n=null,r=!1;if("function"==typeof t)throw new TypeError("Object was of type: function. Not acceptable.");if(f(t))n=[],r=!0;else{if("object"!==o(t))return t;n={}}if(r)for(var i=0;i<t.length;++i)n[i]=E(t[i]);else for(e in t)t.hasOwnProperty(e)&&(n[e]=E(t[e]));return n}function P(t,e,n){for(var r,i,o,a,s=0,u=[];s<t.length;++s)"string"==typeof(r=t[s])&&0===r.indexOf(e)&&r.indexOf(n)===e.length&&(-1!==(a=r.indexOf("|"))?(i=r.slice(r.indexOf("(")+1,a),o=r.slice(a+1,r.indexOf(")")),u.push({mod:i,val:o,iteratorIndex:s})):u.push({iteratorIndex:s}));return u}function R(t,e,n){for(var r,i=0;i<e.length;++i)"string"==typeof(r=e[i])&&0===r.indexOf(n)&&(e[i]=S(t,r.slice(n.length)))}function _(t){t?console.log("nenkraft2 server version "+a):console.log("%cnenkraft2 %cversion %c"+a,"color:#f0f7da;background-color:#234d20;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#f0f7da;background-color:#36802d;font-family:Arial;font-size:18px;font-weight:900;padding:5px;","color:#f0f7da;background-color:#77ab59;font-family:Arial;font-size:18px;font-weight:900;padding:5px;")}},function(t,e,n){"use strict";n.r(e),n.d(e,"PII",function(){return l}),n.d(e,"PI5",function(){return c}),n.d(e,"DEGREES_TO_RADIANS",function(){return h}),n.d(e,"RADIANS_TO_DEGRESS",function(){return f}),n.d(e,"RADIAN",function(){return d}),n.d(e,"DegreesToRadians",function(){return p}),n.d(e,"RadiansToDegress",function(){return y}),n.d(e,"PrecisionRound",function(){return v}),n.d(e,"Spread",function(){return b}),n.d(e,"AttractRepel",function(){return m}),n.d(e,"Oscillate",function(){return g}),n.d(e,"LineLineIntersection",function(){return w}),n.d(e,"ClosestPointOnLine",function(){return A}),n.d(e,"LikeASquareGrid",function(){return S}),n.d(e,"TriRectArray",function(){return x}),n.d(e,"GreatestCommonDivisor",function(){return T}),n.d(e,"SimplifyAspectRatio",function(){return O}),n.d(e,"IntegerNotation",function(){return k});var r=Math.PI,i=Math.sin,o=Math.cos,a=Math.pow,s=Math.round,u=Math.ceil,l=2*r,c=.5*r,h=r/180,f=180/r,d=h;function p(t){return t*h}function y(t){return t*f}function v(t,e){if(null==e)return t;var n=a(10,e);return s(n*t)/n}function b(t,e,n,r){return t-n*(e-1)*.5+r*n}function m(t,e,n,r,a){var s=e.SubtractVC(t);if(s.GetMagnitudeSquared()<r*r){var u=s.GetAngle();n.Add(o(u)*a,i(u)*a)}}function g(t,e,n,r){var o=.5*(n-e);return e+o+i(p(t*r))*o}function w(t,e,n,r){var i=e.SubtractVC(t),o=r.SubtractVC(n),a=-o.x*i.y+i.x*o.y,s=t.x-n.x,u=t.y-n.y,l=(-i.y*s+i.x*u)/a,c=(o.x*u-o.y*s)/a;return l>=0&&l<=1&&c>=0&&c<=1&&(i.Set(t.x+c*i.x,t.y+c*i.y),i)}function A(t,e,n){var r=e.SubtractVC(t),i=((n.x-t.x)*r.x+(n.y-t.y)*r.y)/r.GetMagnitudeSquared();return i<0?t:i>1?e:(r.Set(t.x+i*r.x,t.y+i*r.y),r)}function S(t,e,n,r){for(var i=0,o=t.length,a=e/n|0;i<o;++i)t[i].Set(i%a*n,(i/a|0)*r)}function x(t,e,n,r,i){return null!=i?(i[0]=t,i[1]=e,i[2]=t+n,i[3]=e,i[4]=t,i[5]=e+r,i[6]=t,i[7]=e+r,i[8]=t+n,i[9]=e,i[10]=t+n,i[11]=e+r,i):[t,e,t+n,e,t,e+r,t,e+r,t+n,e,t+n,e+r]}function T(t,e){return 0===e?t:T(e,t%e)}function O(t,e,n){var r=T(t,e),i=null==n?[]:n;return i[0]=t/r,i[1]=e/r,i}function k(t,e,n){var r=t%e,i=t/e;return u(0===r?i+1:i)+n+(1+r)}},function(t,e,n){"use strict";(function(t){function r(t){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function i(t,e,n,a){if(void 0==a||"function"!=typeof t.Assert)switch(e){case i.IS:return void function(t,e,n){var r=!1;t!==e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_NOT:return void function(t,e,n){var r=!1;t===e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_SAME_TYPE:return void function(t,e,n){var i=!1;Array.isArray(t)||Array.isArray(e)?!Array.isArray(t)!=!Array.isArray(e)&&(i=!0):null===t||null===e?t!==e&&(i=!0):r(t)!==r(e)?i=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&t!==e&&(i=!0);o(i,t,e,n)}(t,n,e);case i.IS_NOT_SAME_TYPE:return void function(t,e,n){var i=!1;Array.isArray(t)||Array.isArray(e)?Array.isArray(t)&&Array.isArray(e)&&(i=!0):null===t||null===e?e===t&&(i=!0):r(t)===r(e)?i=!0:"number"!=typeof t&&"number"!=typeof e||(isNaN(t)||isNaN(e))&&isNaN(t)&&isNaN(e)&&(i=!0);o(i,t,e,n)}(t,n,e);case i.IS_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e||(r=!0);o(r,t,e.name,n)}(t,n,e);case i.IS_NOT_INSTANCE_OF:return void function(t,e,n){var r=!1;t instanceof e&&(r=!0);o(r,t,e.name,n)}(t,n,e);case i.IS_LESS_THAN:return void function(t,e,n){var r=!1;t>=e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_GREATER_THAN:return void function(t,e,n){var r=!1;t<=e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_LESS_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t>e&&(r=!0);o(r,t,e,n)}(t,n,e);case i.IS_GREATER_THAN_OR_EQUAL:return void function(t,e,n){var r=!1;t<e&&(r=!0);o(r,t,e,n)}(t,n,e);default:throw new Error("No comparison: "+e)}else t.Assert(e,n)}function o(t,e,n,r){if(t)throw function(t,e,n){switch(n){case i.IS:n=i.IS_NOT;break;case i.IS_NOT:n=i.IS;break;case i.IS_SAME_TYPE:n=i.IS_NOT_SAME_TYPE;break;case i.IS_NOT_SAME_TYPE:n=i.IS_SAME_TYPE;break;case i.IS_INSTANCE_OF:n=i.IS_NOT_INSTANCE_OF;break;case i.IS_NOT_INSTANCE_OF:n=i.IS_INSTANCE_OF;break;case i.IS_LESS_THAN:n=i.IS_GREATER_THAN_OR_EQUAL;break;case i.IS_GREATER_THAN:n=i.IS_LESS_THAN_OR_EQUAL;break;case i.IS_LESS_THAN_OR_EQUAL:n=i.IS_GREATER_THAN;break;case i.IS_GREATER_THAN_OR_EQUAL:n=i.IS_LESS_THAN;break;default:throw new Error("Unexpected error")}console.error(t,n,e)}(e,n,r),new Error("Assertion failed: "+r);i.LOG&&window&&function(t,e,n){console.log("%c<<||-?START?-||>>","background-color: black; color: #0FF; padding: 0px 25px;"),console.log("%cAssertion success: ","background-color: #333; color: #0F0; padding: 0px 25px;"),console.log(t),console.log(n),console.log(e),console.log("%c>>||-?END?-||<<","background-color: black; color: #FF0; padding: 0px 25px;")}(e,n,r)}n.d(e,"a",function(){return i}),i.IS="I",i.IS_NOT="IN",i.IS_SAME_TYPE="IST",i.IS_NOT_SAME_TYPE="INST",i.IS_INSTANCE_OF="IIO",i.IS_NOT_INSTANCE_OF="INIO",i.IS_LESS_THAN="ILT",i.IS_GREATER_THAN="IGT",i.IS_LESS_THAN_OR_EQUAL="ILTOE",i.IS_GREATER_THAN_OR_EQUAL="IGTOE",i.Assign=function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.IS=i.IS,e.IS_NOT=i.IS_NOT,e.IS_SAME_TYPE=i.IS_SAME_TYPE,e.IS_NOT_SAME_TYPE=i.IS_NOT_SAME_TYPE,e.IS_INSTANCE_OF=i.IS_INSTANCE_OF,e.IS_NOT_INSTANCE_OF=i.IS_NOT_INSTANCE_OF,e.IS_LESS_THAN=i.IS_LESS_THAN,e.IS_GREATER_THAN=i.IS_GREATER_THAN,e.IS_LESS_THAN_OR_EQUAL=i.IS_LESS_THAN_OR_EQUAL,e.IS_GREATER_THAN_OR_EQUAL=i.IS_GREATER_THAN_OR_EQUAL},i.LOG=!1}).call(this,n(15))},function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n(0);function i(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var o=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.tl=new r.a(e,n),this.br=new r.a(i,o),this.w=0,this.h=0,this.hw=0,this.hh=0,this.area=0,this.belongsTo=null,this.TYPE=c,this.ComputeWH()}return function(t,e,n){e&&i(t.prototype,e),n&&i(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.tl.Set(t,e),this.br.Set(n,r),this.ComputeWH()}},{key:"SetC",value:function(t){this.Set(t.tl.x,t.tl.y,t.br.x,t.br.y)}},{key:"Scale",value:function(t,e){this.tl.Multiply(t,e),this.br.Multiply(t,e),this.ComputeWH()}},{key:"ScaleV",value:function(t){this.tl.MultiplyV(t),this.br.MultiplyV(t),this.ComputeWH()}},{key:"ComputeWH",value:function(){this.w=this.br.x-this.tl.x,this.h=this.br.y-this.tl.y,this.hw=.5*this.w,this.hh=.5*this.h,this.area=this.w*this.h}},{key:"IntersectsPoint",value:function(t){return!(t.x<this.tl.x||t.x>this.br.x||t.y<this.tl.y||t.y>this.br.y)}},{key:"ContainsPoint",value:function(t){return t.x>this.tl.x&&t.x<this.br.x&&t.y>this.tl.y&&t.y<this.br.y}},{key:"IntersectsAABB2D",value:function(t){var e=this.tl,n=this.br,r=t.tl,i=t.br;return!(r.x>=n.x||r.y>=n.y||i.x<=e.x||i.y<=e.y)}},{key:"ContainsAABB2D",value:function(t){if(t.area>this.area)return!1;var e=this.tl,n=this.br,r=t.tl,i=t.br;return r.x>=e.x&&r.y>=e.y&&i.x<=n.x&&i.y<=n.y}},{key:"GetQuadrant",value:function(e){var n=this.tl,r=this.br;switch(e){case a:return new t(n.x,n.y,n.x+this.hw,n.y+this.hh);case s:return new t(n.x+this.hw,n.y,r.x,n.y+this.hh);case u:return new t(n.x,n.y+this.hh,n.x+this.hw,r.y);case l:return new t(n.x+this.hw,n.y+this.hh,r.x,r.y);default:return null}}}],[{key:"TYPE",get:function(){return c}}]),t}(),a="TL",s="TR",u="BL",l="BR",c=1},function(t,e,n){"use strict";n.r(e);var r=n(9),i=n(2);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#36802d",this.applied=!0,Object(i.ApplyProperties)(this,e)}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"Apply",value:function(t){t.fillStyle=this.color}}]),t}(),s="round",u="round";function l(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var c=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#c9df8a",this.lineCap=s,this.lineJoin=u,this.lineWidth=2,this.miterLimit=10,this.applied=!0,Object(i.ApplyProperties)(this,e)}return function(t,e,n){e&&l(t.prototype,e),n&&l(t,n)}(t,[{key:"Apply",value:function(t){t.strokeStyle=this.color,t.lineCap=this.lineCap,t.lineJoin=this.lineJoin,t.lineWidth=this.lineWidth,t.miterLimit=this.miterLimit}}]),t}();function h(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var f=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#234d20",this.blur=5,this.offsetX=0,this.offsetY=0,this.applied=!0,Object(i.ApplyProperties)(this,e)}return function(t,e,n){e&&h(t.prototype,e),n&&h(t,n)}(t,[{key:"Apply",value:function(t){t.shadowColor=this.color,t.shadowBlur=this.blur,t.shadowOffsetX=this.offsetX,t.shadowOffsetY=this.offsetY}}]),t}(),d="left",p="top";function y(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var v=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.fillColor="#36802d",this.strokeColor="#c9df8a",this.fontSize=22,this.font=null,this.fontFamily="Arial",this.align=d,this.baseline=p,this.lineWidth=.5,this.applied=!0,Object(i.ApplyProperties)(this,e),this.ConcatFont()}return function(t,e,n){e&&y(t.prototype,e),n&&y(t,n)}(t,[{key:"Apply",value:function(t){t.fillStyle=this.fillColor,t.strokeStyle=this.strokeColor,t.font=this.font,t.textAlign=this.align,t.textBaseline=this.baseline,t.lineWidth=this.lineWidth}},{key:"ConcatFont",value:function(){this.font=this.fontSize+"px "+this.fontFamily}}]),t}();var b=function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.color="#c9df8a",this.size=1,Object(i.ApplyProperties)(this,e)};n.d(e,"All",function(){return m}),n.d(e,"FFSa",function(){return g}),n.d(e,"SSa",function(){return w}),n.d(e,"FSa",function(){return A}),n.d(e,"SaT",function(){return S}),n.d(e,"P",function(){return x}),n.d(e,"Fill",function(){return a}),n.d(e,"Stroke",function(){return c}),n.d(e,"Shadow",function(){return f}),n.d(e,"Text",function(){return v}),n.d(e,"Pixel",function(){return b}),n.d(e,"GCO",function(){return r});var m=function(t){return{fill:new a(t?t.fill:null),stroke:new c(t?t.stroke:null),shadow:new f(t?t.shadow:null),text:new v(t?t.text:null),pixel:new b(t?t.pixel:null)}},g=function(t){return{fill:new a(t?t.fill:null),stroke:new c(t?t.stroke:null),shadow:new f(t?t.shadow:null)}},w=function(t){return{stroke:new c(t?t.stroke:null),shadow:new f(t?t.shadow:null)}},A=function(t){return{fill:new a(t?t.fill:null),shadow:new f(t?t.shadow:null)}},S=function(t){return{shadow:new f(t?t.shadow:null),text:new v(t?t.text:null)}},x=function(t){return{pixel:new b(t?t.pixel:null)}}},function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n(0),i=n(3);function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(e,n,i,o){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.s=new r.a(e,n),this.e=new r.a(i,o),this.epsilon=1e3,this.belongsTo=null,this.TYPE=s}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(t,[{key:"Set",value:function(t,e,n,r){this.s.Set(t,e),this.e.Set(n,r)}},{key:"SetC",value:function(t){this.s.SetV(t.s),this.e.SetV(t.e)}},{key:"Stretch",value:function(t){var e=.5*t;this.s.PushFromV(this.e,e),this.e.PushFromV(this.s,e)}},{key:"Rotate",value:function(t,e,n){e=void 0==e?.5:e;var r=this.s.Copy();r.AddV(this.e),r.Multiply(e,void 0==n?e:n),this.s.RotateAroundV(r,t),this.e.RotateAroundV(r,t)}},{key:"Cut",value:function(t,e){var n=0;for(null==e&&(e=[]);n<t.length;++n)e.push(this.s.GetWeightedAverageV(this.e,t[n]));return e}},{key:"GetLength",value:function(){return this.s.GetDistanceV(this.e)}},{key:"GetLengthSquared",value:function(){return this.s.GetDistanceSquaredV(this.e)}},{key:"IntersectsPoint",value:function(t){var e=this.s,n=this.e,r=(t.y-e.y)*(n.x-e.x)-(t.x-e.x)*(n.y-e.y);if(Math.abs(r)>this.epsilon)return!1;var i=(t.x-e.x)*(n.x-e.x)+(t.y-e.y)*(n.y-e.y);return!(i<0)&&!(i>this.GetLengthSquared())}},{key:"IntersectsLine",value:function(t){return Object(i.LineLineIntersection)(this.s,this.e,t.s,t.e)}},{key:"GetClosestPointTo",value:function(t){return Object(i.ClosestPointOnLine)(this.s,this.e,t)}},{key:"GetNormalA",value:function(){return this.s.GetNormalAV(this.e)}},{key:"GetNormalB",value:function(){return this.s.GetNormalBV(this.e)}}]),t}(),s=0},function(t,e,n){"use strict";function r(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}n.d(e,"a",function(){return i});var i=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.class=e,this.objects=[],this.floodFunction=null,this.floodAmount=null,this.context=null}return function(t,e,n){e&&r(t.prototype,e),n&&r(t,n)}(t,[{key:"Store",value:function(t){this.objects.push(t)}},{key:"PreRetrieve",value:function(){0===this.objects.length&&this.Flood()}},{key:"Retrieve",value:function(){return this.PreRetrieve(),this.objects.pop()}},{key:"Flood",value:function(t,e,n){var r=0;for(t&&(this.floodFunction=t),e&&(this.floodAmount=e),n&&(this.context=n);r<this.floodAmount;++r)if(null!=this.class){var i=new this.class;this.Store(i),this.floodFunction.call(this.context,i)}else this.Store(this.floodFunction.call(this.context))}},{key:"Flush",value:function(){this.objects.length=0}},{key:"Clean",value:function(){var t=this.objects.length;this.Flush(),this.Flood(void 0,t)}}]),t}()},function(t,e,n){"use strict";n.r(e),n.d(e,"DEFAULT",function(){return r}),n.d(e,"SOURCE_OVER",function(){return i}),n.d(e,"SOURCE_IN",function(){return o}),n.d(e,"SOURCE_OUT",function(){return a}),n.d(e,"SOURCE_ATOP",function(){return s}),n.d(e,"DESTINATION_OVER",function(){return u}),n.d(e,"DESTINATION_IN",function(){return l}),n.d(e,"DESTINATION_OUT",function(){return c}),n.d(e,"DESTINATION_ATOP",function(){return h}),n.d(e,"LIGHTER",function(){return f}),n.d(e,"COPY",function(){return d}),n.d(e,"XOR",function(){return p}),n.d(e,"MULTIPLY",function(){return y}),n.d(e,"OVERLAY",function(){return v}),n.d(e,"DARKEN",function(){return b}),n.d(e,"LIGHTEN",function(){return m}),n.d(e,"COLOR_DODGE",function(){return g}),n.d(e,"COLOR_BURN",function(){return w}),n.d(e,"HARD_LIGHT",function(){return A}),n.d(e,"SOFT_LIGHT",function(){return S}),n.d(e,"DIFFERENCE",function(){return x}),n.d(e,"EXCLUSION",function(){return T}),n.d(e,"HUE",function(){return O}),n.d(e,"SATURATION",function(){return k}),n.d(e,"COLOR",function(){return C}),n.d(e,"LUMINOSITY",function(){return E});var r="source-over",i="source-over",o="source-in",a="source-out",s="source-atop",u="destination-over",l="destination-in",c="destination-out",h="destination-atop",f="lighter",d="copy",p="xor",y="multiply",v="overlay",b="darken",m="lighten",g="color-dodge",w="color-burn",A="hard-light",S="soft-light",x="difference",T="exclusion",O="hue",k="saturation",C="color",E="luminosity"},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(13),i=n(6);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n){var r;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(r=s(this,u(e).call(this,t))).programController=null,r.style=Object(i.FFSa)(n),r}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r["a"]),function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"Draw",value:function(t){var e=0,n=this.vertices,r=this.style,i=n.length,o=n[e];for(t.beginPath(),t.moveTo(o.x,o.y);e<i;++e)o=n[e],t.lineTo(o.x,o.y);t.closePath(),!0===r.shadow.applied&&r.shadow.Apply(t),!0===r.fill.applied&&(r.fill.Apply(t),t.fill()),!0===r.stroke.applied&&(r.stroke.Apply(t),t.stroke())}}]),e}()},function(t,e,n){"use strict";e.a=["0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz!?#$%@&","0123456789","ABCDEFGHJIKLMNOPQRSTUWVXYZabcdefghijklmnopqrstuwvxyz","ABCDEFGHJIKLMNOPQRSTUWVXYZ","abcdefghijklmnopqrstuwvxyz","0123456789abcdefghijklmnopqrstuwvxyz","0123456789ABCDEFGHJIKLMNOPQRSTUWVXYZ"]},function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n(0),i=n(3),o=n(2);function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var s=Math.PI,u=Math.sin,l=Math.cos,c=function(){function t(e,n,i){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.center=new r.a(e,n),this.diameter=0,this.w=0,this.h=0,this.radiusSquared=0,this.radiusUnsquared=0,this.area=0,this.radius=i,this.belongsTo=null,this.TYPE=h}return function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(t,[{key:"Set",value:function(t,e,n){this.center.Set(t,e),this.radius=n}},{key:"SetC",value:function(t){this.center.SetV(t),this.radius=t.radius}},{key:"Scale",value:function(t){this.radius*=t}},{key:"IntersectsCircle",value:function(t){var e=this.radius+t.radius;return e*e>=this.center.GetDistanceSquaredV(t.center)}},{key:"IntersectsPoint",value:function(t){return this.radiusSquared>=this.center.GetDistanceSquaredV(t)}},{key:"GenerateRandomPoints",value:function(t,e,n){var i=0,a=o.RandomFloat,s=new r.a(this.x-this.radius,this.y-this.radius),u=new r.a(this.x+this.radius,this.y+this.radius),l=[];for(n=!!n,!0===e&&(a=o.RandomInteger);i<t;++i){for(var c=Nenkraft.Vector2D(a(s.x,u.x),a(s.y,u.y));this.IntersectsPoint(c)===n;)c.Set(a(s.x,u.x),a(s.y,u.y));l.push(c)}return l}},{key:"GeneratePerimeterPoints",value:function(t,e){var n=0,r=[];for(t*=e;n<t;n+=e)r.push(Nenkraft.Vector2D(this.x+l(Object(i.DegreesToRadians)(n))*this.radius,this.y+u(Object(i.DegreesToRadians)(n))*this.radius));return r}},{key:"x",get:function(){return this.center.x},set:function(t){this.center.x=t}},{key:"y",get:function(){return this.center.y},set:function(t){this.center.y=t}},{key:"radius",get:function(){return this.radiusUnsquared},set:function(t){this.radiusUnsquared=t,this.radiusSquared=t*t,this.diameter=this.w=this.h=2*t,this.area=s*t*t}}],[{key:"TYPE",get:function(){return h}}]),t}(),h=2},function(t,e,n){"use strict";n.d(e,"a",function(){return u});var r=n(2),i=n(0),o=n(7),a=n(5);function s(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var u=function(){function t(e){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.vertices=[],this.normals=[],this.perimeterMidPoints=[],this.centroid=new i.a(0,0),this.aabb=null,this.dirtyBounds=!0,this.belongsTo=null,this.TYPE=l,null!=e&&(e[0]instanceof i.a?this.AddPoints(e):this.PushPoints(e))}return function(t,e,n){e&&s(t.prototype,e),n&&s(t,n)}(t,[{key:"Copy",value:function(){for(var e=0,n=new t,r=this.vertices,i=r.length;e<i;++e)n.AddPoint(r[e].Copy());return n}},{key:"ExtractSegments",value:function(t){var e=0,n=this.vertices,r=n.length-1,i=n[e];for(null==t&&(t=[]);e<r;i=n[++e])t.push(new o.a(i,n[e+1]));return t.push(new o.a(n[r],n[0])),t}},{key:"GenerateRandomPoints",value:function(t,e,n){this.ComputeBounds(),n=!!n;var o=0,a=r.RandomFloat,s=this.aabb.tl,u=this.aabb.br,l=[];for(!0===e&&(a=r.RandomInteger);o<t;++o){for(var c=new i.a(a(s.x,u.x),a(s.y,u.y));this.IntersectsPoint(c)===n;)c.Set(a(s.x,u.x),a(s.y,u.y));l.push(c)}return l}},{key:"AddVertex",value:function(t){this.vertices.push(t)}},{key:"AddVertices",value:function(t){var e=0,n=t.length;if(t[0]instanceof i.a)this.vertices.push.apply(this.vertices,t);else if("number"==typeof t[0])for(;e<n;e+=2)this.AddVertex(new i.a(t[e],t[e+1]));else if(null!=t[0].x)for(;e<n;++e)this.AddVertex(new i.a(t[e].x,t[e].y))}},{key:"Recreate",value:function(t){this.vertices.length=0,void 0!=t&&this.vertices.push.apply(this.vertices,t)}},{key:"ComputeBounds",value:function(){var t,e=0,n=1/0,r=-n,i=n,o=-n,s=this.vertices,u=s.length;for(null===this.aabb&&(this.aabb=new a.a(0,0,0,0));e<u;++e)(t=s[e]).x<n&&(n=t.x),t.x>r&&(r=t.x),t.y<i&&(i=t.y),t.y>o&&(o=t.y);this.aabb.Set(n,i,r,o),this.dirtyBounds=!1}},{key:"Rotate",value:function(t,e,n,r){var i,o=0,a=this.aabb,s=a.tl.Copy(),u=this.vertices.length;for(!0===this.dirtyBounds&&!0===r?this.ComputeBounds():null===this.aabb&&this.ComputeBounds(),e=void 0===e?.5:e,s.AddV(a.br),s.Multiply(e,void 0===n?e:n);o<u;++o)(i=i[o]).RotateAroundV(s,t);this.dirtyBounds=!0}},{key:"GetControid",value:function(){var t,e=0,n=this.vertices,r=n.length,i=this.centroid;for(i.Set(0,0);e<r;++e)t=n[e],i.AddV(t);return i.Divide(r,r),i}},{key:"GetNormalsA",value:function(){var t=0,e=this.vertices,n=e.length-1,r=this.normals,i=e[t];for(r.length=0;t<n;i=e[++t])r.push(i.GetNormalAV(e[t+1]));return r.push(e[n].GetNormalAV(e[0])),r}},{key:"GetNormalsA",value:function(){var t=0,e=this.vertices,n=e.length-1,r=this.normals,i=e[t];for(r.length=0;t<n;i=e[++t])r.push(i.GetNormalBV(e[t+1]));return r.push(e[n].GetNormalBV(e[0])),r}},{key:"GetPerimeterMidPoints",value:function(){var t=0,e=this.vertices,n=e.length-1,r=this.perimeterMidPoints,i=e[t];for(r.length=0;t<n;i=e[++t])r.push(i.GetMidPointV(e[t+1]));return r.push(e[n].GetMidPointV(e[0])),r}},{key:"IntersectsPoint",value:function(t){if(!0===this.dirtyBounds&&this.ComputeBounds(),!1===this.aabb.IntersectsPoint(t))return!1;var e,n,r=0,i=!1,o=this.vertices,a=o.length,s=t.x,u=t.y,l=a-1;for(r=0,l=a-1;r<a;l=r++)e=o[r],n=o[l],e.y>u!=n.y>u&&s<(n.x-e.x)*(u-e.y)/(n.y-e.y)+e.x&&(i=!i);return i}}]),t}(),l=3},function(t,e,n){"use strict";n.r(e);var r=n(5),i=n(6);function o(t){return(o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function a(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function s(t,e){return!e||"object"!==o(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function u(t){return(u=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function l(t,e){return(l=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var c=function(t){function e(t,n,r,o,a){var l;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(l=s(this,u(e).call(this,t,n,r,o))).programController=null,l.style=Object(i.FFSa)(a),l}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&l(t,e)}(e,r["a"]),function(t,e,n){e&&a(t.prototype,e),n&&a(t,n)}(e,[{key:"Draw",value:function(t){var e=this.tl,n=this.br,r=this.style;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,e.y),t.lineTo(n.x,n.y),t.lineTo(e.x,n.y),t.closePath(),!0===r.shadow.applied&&r.shadow.Apply(t),!0===r.fill.applied&&(r.fill.Apply(t),t.fill()),!0===r.stroke.applied&&(r.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.tl.x,this.tl.y,this.w,this.h)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.fillColor&&null!==t.outlineColor&&null!==t.outline&&(t.fillColor.SetHex(this.style.fill.color),t.fillColor.Normalize(),t.outlineColor.SetHex(this.style.stroke.color),t.outlineColor.Normalize(),t.outline=this.style.stroke.lineWidth+.2),this}}]),e}(),h=n(12),f=n(3);function d(t){return(d="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function p(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function y(t,e){return!e||"object"!==d(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function v(t){return(v=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function b(t,e){return(b=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var m=function(t){function e(t,n,r,o){var a;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=y(this,v(e).call(this,t,n,r))).programController=null,a.style=Object(i.FFSa)(o),a}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&b(t,e)}(e,h["a"]),function(t,e,n){e&&p(t.prototype,e),n&&p(t,n)}(e,[{key:"Draw",value:function(t){var e=this.center,n=this.style;t.beginPath(),t.arc(e.x,e.y,this.radius,0,f.PII,!1),t.closePath(),!0===n.shadow.applied&&n.shadow.Apply(t),!0===n.fill.applied&&(n.fill.Apply(t),t.fill()),!0===n.stroke.applied&&(n.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.center.x,this.center.y,this.radius)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.fillColor&&null!==t.outlineColor&&null!==t.outline&&(t.fillColor.SetHex(this.style.fill.color),t.fillColor.Normalize(),t.outlineColor.SetHex(this.style.stroke.color),t.outlineColor.Normalize(),t.outline=this.style.stroke.lineWidth+.2),this}}]),e}(),g=n(7);function w(t){return(w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function A(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}function S(t,e){return!e||"object"!==w(e)&&"function"!=typeof e?function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t):e}function x(t){return(x=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)})(t)}function T(t,e){return(T=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var O=function(t){function e(t,n,r,o,a){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(s=S(this,x(e).call(this,t,n,r,o))).programController=null,s.style=Object(i.SSa)(a),s}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&T(t,e)}(e,g["a"]),function(t,e,n){e&&A(t.prototype,e),n&&A(t,n)}(e,[{key:"Draw",value:function(t){var e=this.s,n=this.e,r=this.style;t.beginPath(),t.moveTo(e.x,e.y),t.lineTo(n.x,n.y),t.closePath(),!0===r.shadow.applied&&r.shadow.Apply(t),!0===r.stroke.applied&&(r.stroke.Apply(t),t.stroke())}},{key:"GLDraw",value:function(t,e){null!==this.programController&&this.programController.Execute(e.globalTransform.AsArray(!0),this.s,this.e)}},{key:"LinkProgramController",value:function(t){return this.programController=t,this.LinkStyle(),this}},{key:"UseProgramController",value:function(t){return this.programController=t,this}},{key:"LinkStyle",value:function(){var t=this.programController;return null!==t&&null!==t.color&&(t.color.SetHex(this.style.stroke.color),t.color.Normalize()),this}}]),e}(),k=n(10);n.d(e,"AABB2D",function(){return c}),n.d(e,"Circle",function(){return m}),n.d(e,"Line2D",function(){return O}),n.d(e,"Ray2D",function(){return O}),n.d(e,"Polygon2D",function(){return k.a})},function(t,e){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return a});var r=n(2);function i(t){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}function o(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),this.functions={},this.values={},this.constants={},this.components={},this.objects={},this.lists={}}return function(t,e,n){e&&o(t.prototype,e),n&&o(t,n)}(e,[{key:"Define",value:function(t,e,n){this.Mark(t,e),this.Set(t,e,n)}},{key:"Mark",value:function(t,e){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if((t===l||t===c)&&void 0!==this[t][e])throw new Error("Constants cannot be reassigned!");this[t][e]=null}},{key:"Get",value:function(t,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof n)throw new Error("Id needs to be a string!");if(null==this[t])throw new Error("Type does not exist");if(!1===e.AllowGetNullUndefined&&null==this[t][n])throw new Error("Null or undefined!");return this[t][n]}},{key:"Set",value:function(t,e,n){if("string"!=typeof t)throw new Error("Type needs to be a string!");if("string"!=typeof e)throw new Error("Id needs to be a string!");switch(t){case s:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.functions[e])throw new Error("No mark!");this.functions[e]=n;break;case u:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.values[e])throw new Error("No mark!");this.values[e]=n;break;case l:if(n instanceof Object)throw new Error("Objects are not allowed!");if(null!==this.constants[e])throw new Error("No mark!");Object.defineProperty(this.constants,e,{writable:!1,configurable:!1,value:n});break;case c:if("function"!=typeof n)throw new Error("Needs to be a function!");if(null!==this.components[e])throw new Error("No mark!");Object.defineProperty(this.components,e,{writable:!1,configurable:!1,value:n});break;case h:if("object"!==i(n))throw new Error("Needs to be an object");if(!0===Object(r.IsArray)(n))throw new Error("Arrays are not allowed!");if(null!==this.objects[e])throw new Error("No mark!");this.objects[e]=n;break;case f:if(!1===Object(r.IsArray)(n))throw new Error("Needs to be an array!");if(null!==this.lists[e])throw new Error("No mark!");this.lists[e]=n;break;default:throw new Error("Unrecognized type!")}}}],[{key:"Assign",value:function(e){if(window&&!e?e=window:t&&!e&&(e=t),!e)throw new Error("No global namespace");e.FUNC=s,e.VAL=u,e.CONST=l,e.COMP=c,e.OBJ=h,e.LIST=f}},{key:"Create",value:function(n){var r=r||null;if(null==r){if(null==t)throw new Error("Neither window nor global exists!");if(void 0!==t[n])throw new Error("global."+n+" already exists!");t[n]=new e}else{if(void 0!==r[n])throw new Error("window."+n+" already exists!");r[n]=new e}}},{key:"FUNCTION",get:function(){return s}},{key:"VALUE",get:function(){return u}},{key:"CONSTANT",get:function(){return l}},{key:"COMPONENT",get:function(){return c}},{key:"OBJECT",get:function(){return h}},{key:"LIST",get:function(){return f}},{key:"AllowGetNullUndefined",get:function(){return d},set:function(t){(function(t){throw new Error('"'+t+'" is read-only')})("PS_AllowGetNullUndefined"),d=!!t}}]),e}(),s="functions",u="values",l="constants",c="components",h="objects",f="lists",d=!1}).call(this,n(15))},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nprecision mediump float;\r\n\r\nattribute vec2 aPosition0;\r\nattribute vec2 aTexCoord0;\r\n\r\nattribute vec2 aPosition1;\r\nattribute vec2 aTexCoord1;\r\n\r\nattribute vec2 aPosition2;\r\nattribute vec2 aTexCoord2;\r\n\r\nattribute vec2 aPosition3;\r\nattribute vec2 aTexCoord3;\r\n\r\nuniform mat3 uProjection;\r\nuniform mat3 uTranslation;\r\nuniform mat3 uTransformation;\r\n\r\nuniform float uUnitId;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  if ( uUnitId == 0.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition0, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord0, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 1.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition1, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord1, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 2.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition2, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord2, 1.0 ) ).xy;\r\n  } else if ( uUnitId == 3.0 ) {\r\n    gl_Position = vec4( ( uProjection * uTranslation * vec3( aPosition3, 1.0 ) ).xy, 0.0, 1.0 );\r\n    vTexCoord = ( uTransformation * vec3( aTexCoord3, 1.0 ) ).xy;\r\n  }\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nuniform sampler2D uImage;\r\nuniform vec4 uTint;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D( uImage, vTexCoord ) * uTint;\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\nattribute vec2 aTexCoord;\r\n\r\nattribute vec3 aProjection1;\r\nattribute vec3 aProjection2;\r\nattribute vec3 aProjection3;\r\n\r\nattribute vec3 aTranslation1;\r\nattribute vec3 aTranslation2;\r\nattribute vec3 aTranslation3;\r\n\r\nattribute vec3 aTransformation1;\r\nattribute vec3 aTransformation2;\r\nattribute vec3 aTransformation3;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  mat3 projection = mat3( aProjection1, aProjection2, aProjection3 );\r\n  mat3 translation = mat3( aTranslation1, aTranslation2, aTranslation3 );\r\n  mat3 transformation = mat3( aTransformation1, aTransformation2, aTransformation3 );\r\n  gl_Position = vec4( ( projection * translation * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vTexCoord = ( transformation * vec3( aTexCoord, 1.0 ) ).xy;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nuniform sampler2D uImage;\r\n\r\nvarying vec2 vTexCoord;\r\n\r\nvoid main() {\r\n  gl_FragColor = texture2D( uImage, vTexCoord );\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec3 aProjection1;\r\nattribute vec3 aProjection2;\r\nattribute vec3 aProjection3;\r\nattribute vec2 aPosition;\r\nattribute vec4 aColor;\r\nattribute float aPointSize;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  mat3 projection = mat3( aProjection1, aProjection2, aProjection3 );\r\n  gl_Position = vec4( ( projection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  gl_PointSize = aPointSize;\r\n  vColor = aColor;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = vColor;\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uFillColor;\r\nuniform lowp vec4 uOutlineColor;\r\nuniform vec2 uSize;\r\nuniform float uOutline;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vBorderX;\r\nvarying float vNegBorderX;\r\nvarying float vBorderY;\r\nvarying float vNegBorderY;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vFillColor = uFillColor;\r\n  vOutlineColor = uOutlineColor;\r\n  vPosition = aPosition;\r\n  vBorderX = -uSize.x * 0.5 + uOutline;\r\n  vNegBorderX = uSize.x * 0.5 - uOutline;\r\n  vBorderY = -uSize.y * 0.5 + uOutline;\r\n  vNegBorderY = uSize.y * 0.5 - uOutline;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vBorderX;\r\nvarying float vNegBorderX;\r\nvarying float vBorderY;\r\nvarying float vNegBorderY;\r\n\r\nvoid main() {\r\n  if (\r\n    vPosition.x > vBorderX &&\r\n    vPosition.x < vNegBorderX && \r\n    vPosition.y > vBorderY && \r\n    vPosition.y < vNegBorderY\r\n  ) {\r\n    gl_FragColor = vFillColor;\r\n  } else {\r\n    gl_FragColor = vOutlineColor;\r\n  }\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uFillColor;\r\nuniform lowp vec4 uOutlineColor;\r\nuniform float uRadius;\r\nuniform float uOutline;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vRadius;\r\nvarying float vOutline;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vFillColor = uFillColor;\r\n  vOutlineColor = uOutlineColor;\r\n  vPosition = aPosition;\r\n  vRadius = uRadius;\r\n  vOutline = uOutline;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vFillColor;\r\nvarying lowp vec4 vOutlineColor;\r\nvarying vec2 vPosition;\r\nvarying float vRadius;\r\nvarying float vOutline;\r\n\r\nvoid main() {\r\n  float d = dot( vPosition, vPosition );\r\n  float rs = vRadius * vRadius;\r\n  float ors = vRadius - vOutline;\r\n  ors = ors * ors;\r\n  if ( d < rs && d > ors ) {\r\n    gl_FragColor = vOutlineColor;\r\n  } else if ( d < rs ) {\r\n    gl_FragColor = vFillColor;\r\n  }\r\n}\r\n@fragment-end@"},function(t,e){t.exports="/**\r\n* @author Gustav 'Nuuf' Åberg <gustavrein@gmail.com>\r\n*/\r\n\r\n@vertex@\r\nattribute vec2 aPosition;\r\n\r\nuniform mat3 uProjection;\r\nuniform lowp vec4 uColor;\r\n\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_Position = vec4( ( uProjection * vec3( aPosition, 1.0 ) ).xy, 0.0, 1.0 );\r\n  vColor = uColor;\r\n}\r\n@vertex-end@\r\n\r\n@fragment@\r\nprecision mediump float;\r\n\r\nvarying lowp vec4 vColor;\r\n\r\nvoid main() {\r\n  gl_FragColor = vColor;\r\n}\r\n@fragment-end@"},function(t,e,n){t.exports=n(24)},function(t,e,n){n(25);var r=n(1);console.log(r),r.Utility.PRINT_VERSION(),r.Sprite.BUILD_DEFAULT_TEXTURE(function(){r.Tilesprite.BUILD_DEFAULT_TEXTURE(function(){var t=new r.Load.XHRLoader,e=new r.Load.ImageLoader,i=0;function o(){if(!(i<2)){var r=[];window.testData={xhrloader:t,imgloader:e};var o=n(29);o.keys().forEach(function(t){r.push(o(t))});for(var a=0,s=r.length;a<s;++a)r[a].default()}}t.Load([{id:"fontdataxml",src:"./assets/xhr/font.fnt",type:"xml"},{id:"fontdatajson",src:"./assets/xhr/font.json",type:"json"},{id:"fontNoK",src:"./assets/xhr/fontNoK.xml",type:"xml"}]),e.Load([{id:"fontimg",src:"./assets/images/font.png"},{id:"fontNoK",src:"./assets/images/fontNoK.png"}],!0),t.onComplete.Add(function(t){console.log(t.data),console.log(JSON.stringify(t.data.dataCache.items[0].data)===JSON.stringify(t.data.dataCache.items[1].data)),i++,o()}),e.onComplete.Add(function(t){console.log(t.data),i++,o()})})})},function(t,e,n){},,function(t,e){Array.prototype.indexPop=function(t){var e=this.length-1;if(e>1&&t<=e&&t>=0){var n=this[e];return this[e]=this[t],this[t]=n,this.pop()}return this.pop()},Array.prototype.indexShift=function(t){if(this.length>1&&t<=this.length-1&&t>=0){var e=this[0];return this[0]=this[t],this[t]=e,this.shift()}return this.shift()},Array.prototype.popSplice=function(t){var e=this.length-1;if(!(e<1)){for(var n=this[t];t<e;)this[t]=this[t+1],t++;return this.pop(),n}},Array.prototype.shiftSplice=function(t){if(!(this.length<1)){for(var e=this[t];t>0;)this[t]=this[t-1],t--;return this.shift(),e}},Array.prototype.fickleSplice=function(t){return t>.5*this.length|0?this.popSplice(t):this.shiftSplice(t)}},function(t){t.exports={name:"nenkraft2",version:"0.1.1",description:"A small rendering tool",main:"./dist/nenkraft2.js",devDependencies:{"@babel/core":"^7.0.0","@babel/preset-env":"^7.0.0","babel-loader":"^8.0.2","copy-webpack-plugin":"^4.5.2","css-loader":"^1.0.0",eslint:"^5.5.0","file-loader":"^2.0.0","html-loader":"^0.5.5","html-webpack-plugin":"^3.2.0","mini-css-extract-plugin":"^0.4.2","raw-loader":"^0.5.1",rimraf:"^2.6.2",webpack:"^4.17.2","webpack-cli":"^3.1.0","webpack-dev-server":"^3.1.8"},dependencies:{},scripts:{"build-prod":"webpack --env production --mode production","build-bundle-fe":"webpack --env bundle-fe --mode production","build-bundle-be":"webpack --env bundle-be --mode production",start:"webpack-dev-server --env development --mode development","clear-bundle-fe":"rimraf bundle-fe","clear-bundle-be":"rimraf bundle-be","clear-dist":"rimraf dist",ce:"rimraf dist bundle-fe bundle-be",be:"npm run ce && npm run build-prod && npm run build-bundle-be && npm run build-bundle-fe","lint-f":"eslint src tests --fix",lint:"eslint src tests"},keywords:["2d","rendering","command","vector","game","graphic","tween","animation","collision","canvas","web","webgl","utilities"],author:"nuuf",license:"MIT"}},function(t,e,n){var r={"./playground/bitmap-text.test":30,"./playground/cp.test":31,"./playground/graphic2d.test":32,"./playground/motion.test":33,"./playground/particle.test":34,"./playground/sprite.test":35,"./playground/stadium.test":36,"./playground/stage2d.test":37,"./playground/utilities.test":38,"./playground/vector2d.test":39,"./solid/1.test":40};function i(t){var e=o(t);return n(e)}function o(t){var e=r[t];if(!(e+1)){var n=new Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}return e}i.keys=function(){return Object.keys(r)},i.resolve=o,t.exports=i,i.id=29},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","BitmapText"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",e.style.backgroundColor="white",i.canvas.push(e),t.style.display="none",n.onclick=o;var a=e.getContext("2d");console.log(window.testData);var s=new r.BitmapText(100,100,window.testData.imgloader.GetBasicTextureById("fontNoK"),window.testData.xhrloader.GetDataById("fontNoK"),"Lorem ipsum dolor sit amet, \nconsectetur adipiscing elit, sed do eiusmod tempor incididunt ut labore et dolore magna aliqua. Ut enim ad minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat. Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur. Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum.");s.scale.SetSame(.5),s.lineHeight-=30,s.ComputeText(),console.log(s),s.Draw(a)}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","CP"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",i.canvas.push(e),t.style.display="none",n.onclick=o;var a=new r.CP.Registry;a.AddCommand(new r.CP.Command("myCommand",function(){console.log("hello command")},"this is my command",!0,"--")),a.Parse("myCommand"),a.GetCommandById("myCommand").AddOption("myOption",function(t,e,n){console.log(t,e,n),console.log("hello option")},"this is my option",0,!0).filterNull=!0,a.Parse("myCommand --myOption someData=1 otherDataaa=helloWorld randomString aa a a")}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Graphic2D"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",o.canvas.push(e),t.style.display="none",n.onclick=a;var s=e.getContext("2d"),u=new r.Path.AABB2D(0,0,50,50),l=new r.Graphic2D(0,0,u);l.position.SetSame(200),l.Draw(s);var c=new r.Path.Circle(0,0,25),h=new r.Graphic2D(0,0,c);h.position.SetSame(300),h.Draw(s);var f=new r.Path.Ray2D(0,0,50,50),d=new r.Graphic2D(0,0,f);d.position.SetSame(400),d.Draw(s);var p=new r.Path.Polygon2D;r.Geom.PolygonConstruction.Butterfly(p,0,0,5e3,50);var y=new r.Graphic2D(0,0,p);y.position.SetSame(600),y.rotation=45*i.RADIAN,y.Draw(s)}),t.appendChild(e);var o={canvas:[]};function a(){t.style.display=null,o.canvas.forEach(function(t){t.parentNode.removeChild(t)}),o.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Motion"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",i.canvas.push(e),t.style.display="none",n.onclick=o;var a=i.stage=new r.Stage2D({canvas:e,x:0,y:0,halt:!1}),s=new r.Container2D(0,0),u=new r.Camera2D(new r.Vector2D(0,0),{position:new r.Vector2D(0,0)}),l=new r.Container2D(960,540);a.AddChild(s),s.AddChild(u),u.AddChild(l),new r.CanvasManager(e,1920,1080,r.CanvasManager.KEEP_ASPECT_RATIO_FIT).BindStage(a).BindRootContainer(s).Trigger();var c=new r.Sprite(0,0,r.Sprite.DEFAULT_TEXTURE);c.motionManager=new r.Motion.Manager(c);var h=c.motionManager.Create("go","x",500,120,"SineInOut"),f=c.motionManager.Create("back","x",0,60,"QuadOut");h.onEnd.Add(function(){f.Start()}),f.onEnd.Add(function(){h.Start()}),h.Start(),c.anchor.SetSame(.5),l.AddChild(c),a.onProcess.Add(function(){u.Process(),c.motionManager.Process()}),a.mouse.onDown.Add(function(t){u.target.position.SetV(t.data.position.Copy().SubtractV(l.position).SubtractV(u.position))})}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Particle"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",i.canvas.push(e),t.style.display="none",n.onclick=o;var a=r.Math.RADIAN,s=i.stage=new r.Stage2D({canvas:e,x:0,y:0,halt:!1}),u=new r.Container2D(0,0),l=new r.Camera2D(new r.Vector2D(0,0),{position:new r.Vector2D(0,0)}),c=new r.Container2D(960,540);s.AddChild(u),u.AddChild(l),l.AddChild(c),new r.CanvasManager(e,1920,1080,r.CanvasManager.KEEP_ASPECT_RATIO_FIT).BindStage(s).BindRootContainer(u).Trigger();var h=new r.Geom.Polygon2D;r.Geom.PolygonConstruction.Star(h,0,0,50,25,5);for(var f=h.GenerateRandomPoints(1e3,!1,!0),d={texture:r.Sprite.DEFAULT_TEXTURE,anchor:{x:.5,y:.5},amount:5,rotation:{min:0,max:360*a},position:{points:f},lifespan:200,velocity:{x:0,y:{min:-2,max:2}},fade:!0,deflate:!0,spin:{min:360*-a,max:360*a},scale:{xy:{min:1,max:2}},oscillation:{gravity:{y:{from:-.1,to:.1,amplitude:7},x:{from:-.4,to:.25,amplitude:7}}}},p={texture:r.Sprite.DEFAULT_TEXTURE,anchor:{x:.5,y:.5},amount:23,rotation:{min:0,max:360*a},position:{points:f},lifespan:150,velocity:{x:{min:0,max:25}},fade:!0,scale:{xy:1}},y=[],v=0;v<=360;v+=12)y.push({x:3*Math.cos(r.Math.DegreesToRadians(v)),y:3*Math.sin(r.Math.DegreesToRadians(v))});var b={texture:r.Sprite.DEFAULT_TEXTURE,anchor:{x:.5,y:.5},amount:y.length,rotation:{min:0,max:360*a},position:{xy:0},lifespan:150,velocity:{points:y,moduloWrapper:y.length-1},fade:!0,scale:{xy:1}},m=c.AddChild(new r.Particle.Particle2D.System(0,0)),g=new r.Time.Timer(5);g.onFinish.Add(function(){m.Emit(p),m.Emit(b),m.Emit(d),g.Start()}),g.Start(),s.onProcess.Add(function(){l.Process(),m.Process(),g.Process()}),s.mouse.onDown.Add(function(t){l.target.position.SetV(t.data.position.Copy().SubtractV(c.position).SubtractV(l.position))})}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Sprite"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",i.canvas.push(e),t.style.display="none",n.onclick=o;var a=e.getContext("2d");new r.Sprite(100,100,r.Sprite.DEFAULT_TEXTURE).Draw(a)}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Stadium2D"),e.setAttribute("type","button"),e.addEventListener("click",function(){n.onclick=o,t.style.display="none";var e=i.stadium=new r.Stadium({width:600,height:400,className:"mcnvs",mode:"2d",fill:!1});e.CreateStage2D("stage1"),e.CreateStage2D("stage2"),e.CreateStage2D("stage3")}),t.appendChild(e);var i={stadium:null};function o(){t.style.display=null,i.stadium.ticker.Stop(),i.stadium.stages.forEach(function(t){t.canvas.parentNode.removeChild(t.canvas)}),n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(14);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Stage2D"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",o.canvas.push(e),t.style.display="none",n.onclick=a;var s=o.stage=new r.Stage2D({canvas:e,x:0,y:0,halt:!1}),u=new i.Circle(0,0,50),l=s.AddChild(new r.Graphic2D(100,100,u));s.onProcess.Add(function(){l.x++})}),t.appendChild(e);var o={canvas:[],stage:null};function a(){t.style.display=null,o.canvas.forEach(function(t){t.parentNode.removeChild(t)}),o.canvas.length=0,o.stage.ticker.Stop(),n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Utility"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",i.canvas.push(e),t.style.display="none",n.onclick=o;var a="a string",s=r.Cipher.CCH1(a,1),u=r.Cipher.CCH1Decipher(s,1);console.log(a,s,u),r.Assert.LOG=!0,Object(r.Assert)(a,"IST","another string");(new r.Cache).StoreSafe({id:"1"}),r.Glob.Assign(),r.Glob.Create("newGlob"),window.newGlob.Mark(r.Glob.FUNCTION,"newFunction"),window.newGlob.Define(r.Glob.FUNCTION,"newFunction",function(){console.log(window.newGlob)}),window.newGlob.Get(r.Glob.FUNCTION,"newFunction")(),console.log((new r.Maker).Many(1e3).Make(r.Vector2D,"@i(*|10)","@i(*|5)").Mass())}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0,n.onclick=null}}},function(t,e,n){"use strict";n.r(e);var r=n(1);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","Vector2D"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",t.style.display="none",n.onclick=o;var a=new r.Vector2D(1,1),s=new r.Vector2D(1,1);console.log(a.AddVC(s)),console.log(a.SubtractVC(s)),console.log(a.MultiplyVC(s)),console.log(a.DivideVC(s)),console.log(a.GetAngle()),console.log(a.GetAngleBetweenV(s)),console.log(a.GetProjectionOntoV(s)),i.canvas.push(e)}),t.appendChild(e);var i={canvas:[]};function o(){t.style.display=null,i.canvas.forEach(function(t){t.parentNode.removeChild(t)}),i.canvas.length=0}}},function(t,e,n){"use strict";n.r(e);var r=n(1),i=n(3),o=n(2);e.default=function(){var t=document.getElementById("buttons"),e=document.createElement("input"),n=document.getElementById("back-button");e.setAttribute("value","1"),e.setAttribute("type","button"),e.addEventListener("click",function(){var e=document.createElement("canvas");document.body.appendChild(e),e.setAttribute("width",window.innerWidth),e.setAttribute("height",window.innerHeight),e.style.display="initial",e.style.position="absolute",a.canvas.push(e),t.style.display="none",n.onclick=s;var u=a.stage=new r.Stage2D({canvas:e,x:0,y:0,halt:!1}),l=new r.Container2D(0,0),c=new r.Camera2D(new r.Vector2D(0,0),new r.Sprite(0,0,r.Sprite.DEFAULT_TEXTURE)),h=new r.Container2D(960,540),f=[];u.AddChild(l),l.AddChild(c),c.AddChild(h),h.AddChild(c.target),c.target.anchor.SetSame(.5),new r.CanvasManager(e,1920,1080,r.CanvasManager.KEEP_ASPECT_RATIO_FIT).BindStage(u).BindRootContainer(l).Trigger();var d=15;for(;d--;){var p=h.AddChild(new r.Sprite(0,0,r.Sprite.DEFAULT_TEXTURE));p.anchor.SetSame(.5),p.rotation=Object(o.RandomFloat)(180*-i.RADIAN,180*i.RADIAN),p.scale.SetSame(.1*d*5),f.push(p)}var y=new r.Tilesprite(0,0,r.Tilesprite.DEFAULT_TEXTURE);y.GeneratePattern(u.rc,640,640),h.AddChild(y),console.log(u),u.onProcess.Add(function(){c.Process(),f.forEach(function(t){t.rotation+=i.RADIAN}),y.OffsetPattern(1,1)}),u.mouse.onDown.Add(function(t){var e=t.data.position.Copy().SubtractV(h.position).SubtractV(c.position);c.target.position.SetV(e)})}),t.appendChild(e);var a={canvas:[],stage:null};function s(){t.style.display=null,a.canvas.forEach(function(t){t.parentNode.removeChild(t)}),a.canvas.length=0,a.stage.ticker.Stop(),n.onclick=null}}}]);